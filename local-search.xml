<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>BeyondCompare5 é‡åˆ¶è¯„ä¼°æ—¶é—´</title>
    <link href="/blog/553c7983.html"/>
    <url>/blog/553c7983.html</url>
    
    <content type="html"><![CDATA[<h2 id="é‡åˆ¶-BeyondCompare-5-è¯„ä¼°æ—¶é—´"><a href="#é‡åˆ¶-BeyondCompare-5-è¯„ä¼°æ—¶é—´" class="headerlink" title="é‡åˆ¶ BeyondCompare 5 è¯„ä¼°æ—¶é—´"></a>é‡åˆ¶ BeyondCompare 5 è¯„ä¼°æ—¶é—´</h2><div class="note note-primary">            <p>å‡çº§äº†MacOs 14.4.1  BeyondCompare 4é—ªé€€ï¼Œæ‘¸ğŸ è¯•è¯• BeyondCompare 5</p><p>æ—¶é—´è®°å½•ä½ç½®ï¼š<code>/Users/$(whoami)/Library/Application\ Support/Beyond\ Compare\ 5/registry.dat</code></p><p>å¯åŠ¨å…¥å£ï¼š &#x2F;Applications&#x2F;Beyond Compare.app&#x2F;Contents&#x2F;MacOS&#x2F;BCompare</p>          </div><hr><div class="note note-warning">            <p><code> /Applications/Beyond Compare.app/Contents/MacOS/</code> ç›®å½•ä¸‹æ“ä½œ</p>          </div><ul><li><p><code>BCompare</code>é‡å‘½å(<code>mv BCompare BCompare.real</code>) ä¸º <code>BCompare.real</code></p></li><li><p>åˆ›å»º <code>BCompare</code>æ–‡ä»¶ï¼Œä»¥è®°äº‹æœ¬æ‰“å¼€å†™å…¥</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-built_in">rm</span>  /Users/$(<span class="hljs-built_in">whoami</span>)/Library/Application\ Support/Beyond\ Compare\ 5/registry.dat<br><span class="hljs-string">&quot;`dirname &quot;</span><span class="hljs-variable">$0</span><span class="hljs-string">&quot;`&quot;</span>/BCompare.real <span class="hljs-variable">$@</span><br><span class="hljs-comment"># `dirname &quot;$0&quot;` è¾“å‡º ç‚¹</span><br><span class="hljs-comment"># ç¬¬ä¸‰è¡Œå®é™…æ•ˆæœ ./BCompare.real</span><br><span class="hljs-comment"># $@ ä»£è¡¨å¯åŠ¨è„šæœ¬çš„å‚æ•° </span><br><span class="hljs-comment"># å¦‚æœ æ‰§è¡Œçš„è„šæœ¬æ˜¯  ./BCompare.real å‚æ•°1 å‚æ•°2  </span><br><span class="hljs-comment"># åˆ™ ï¼š $@ ä»£è¡¨ å‚æ•°1 å’Œ å‚æ•°2</span><br></code></pre></td></tr></table></figure></li><li><p><code>chmod a+x BCompare</code> ç»™æ–‡ä»¶èµ‹æƒå³å¯ï¼Œ<u><em><strong>æ¯æ¬¡å¯åŠ¨éƒ½ä¼šé‡ç½®è¯„ä¼°æ—¶é—´ã€‚</strong></em></u></p></li></ul><div class="note note-warning">            <p>è½¯ä»¶æ›´æ–°åï¼Œé‡æ–°é…ç½®è„šæœ¬</p>          </div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-built_in">mv</span> /Applications/Beyond\ Compare.app/Contents/MacOS/BCompare /Applications/Beyond\ Compare.app/Contents/MacOS/BCompare.real<br><span class="hljs-built_in">cat</span> &gt; /Applications/Beyond\ Compare.app/Contents/MacOS/BCompare &lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">#!/bin/bash</span><br><span class="hljs-string">rm /Users/\$(whoami)/Library/Application\ Support/Beyond\ Compare\ 5/registry.dat</span><br><span class="hljs-string">&quot;\$(dirname &quot;\$0&quot;)&quot;/BCompare.real &quot;\$@&quot;</span><br><span class="hljs-string">EOF</span><br><span class="hljs-built_in">chmod</span> +x /Applications/Beyond\ Compare.app/Contents/MacOS/BCompare<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Crack</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Crack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gradleæ„å»ºSpringbooté¡¹ç›®ï¼Œè‡ªå®šä¹‰æ‰“åŒ…ã€Dockeré•œåƒæ„å»º--è‰ç¨¿</title>
    <link href="/blog/dd130cd7.html"/>
    <url>/blog/dd130cd7.html</url>
    
    <content type="html"><![CDATA[<h1 id="Gradleæ„å»ºSpringbooté¡¹ç›®ï¼Œè‡ªå®šä¹‰æ‰“åŒ…ã€Dockeré•œåƒæ„å»ºâ€“è‰ç¨¿"><a href="#Gradleæ„å»ºSpringbooté¡¹ç›®ï¼Œè‡ªå®šä¹‰æ‰“åŒ…ã€Dockeré•œåƒæ„å»ºâ€“è‰ç¨¿" class="headerlink" title="Gradleæ„å»ºSpringbooté¡¹ç›®ï¼Œè‡ªå®šä¹‰æ‰“åŒ…ã€Dockeré•œåƒæ„å»ºâ€“è‰ç¨¿"></a>Gradleæ„å»ºSpringbooté¡¹ç›®ï¼Œè‡ªå®šä¹‰æ‰“åŒ…ã€Dockeré•œåƒæ„å»ºâ€“è‰ç¨¿</h1><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><div class="note note-info">            <p><a href="https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#introduction"> Gradle æ’ä»¶ <code> org.springframework.boot</code> æ–‡æ¡£  https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#introduction </a></p><p><a href="https://bmuschko.github.io/gradle-docker-plugin/current/user-guide/"> Gradle æ’ä»¶ <code>&quot;com.bmuschko.docker-spring-boot-application</code> æ–‡æ¡£  https://bmuschko.github.io/gradle-docker-plugin/current/user-guide/ </a></p>          </div><blockquote><p> ä¸‹å›¾ IDEA Gradle çª—å£ ï¼Œ<code>com.bmuschko.docker-spring-boot-application</code> æ’ä»¶é»˜è®¤Tasksåˆ†ç»„ä½Dockerï¼Œä¸€å…±å››ä¸ª <code>dockerBuildImage\dockerCreateDockerFile\dockerSysncBuildContext\dcokerPushImage</code></p></blockquote><ul><li><code>dockerBuildIamge</code> : æ„å»ºdocekré•œåƒ</li><li><code>dockerCreateDockerFile </code> :  æ„å»ºdockerfileï¼Œä¸‹é¢ä»£ç ä½¿ç”¨äº†è‡ªå®šä¹‰dockerfile</li><li><code>dockerSysncBuildContext</code> å°†  class ä»£ç ã€èµ„æºæ–‡ä»¶ã€ç¬¬ä¸‰æ–¹ä¾èµ–å¤åˆ¶åˆ° <code>build\docker</code>ç›®å½•å…ˆï¼Œdockerfileæ–‡ä»¶ä¹Ÿç”Ÿæˆåœ¨æ­¤ç›®å½•</li><li><code>dockerPushimage</code>Â· :  æ¨é€dockeré•œåƒï¼Œæš‚æ—¶æœªæ­£å¸¸ä½¿ç”¨è¿‡ã€‚</li><li>è‡ªå®šä¹‰task , ç”±äº <code>dockerPushimage </code> æœªæ‘¸æ¸…æ¥šæ€ä¹ˆä½¿ç”¨ï¼Œä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œç›´æ¥è‡ªå®šä¹‰ä¸¤ä¸ªtask<ul><li><code>pushDockerImage</code>  :  æ¨é€Imageåˆ°è¿œç¨‹ä»“åº“</li><li><code>saveDockerImagesBylocal</code> ï¼š å°†å®¿ä¸»æœºDockeré•œåƒä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ã€‚</li></ul></li></ul><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/java/spring/springboot-docker-gradle/image-20240114175002447.png" alt="Idea Gradle çª—å£"></p><h2 id="build-gradle-æ–‡ä»¶é…ç½®ï¼ŒåŸºäºkotlinè¯­æ³•"><a href="#build-gradle-æ–‡ä»¶é…ç½®ï¼ŒåŸºäºkotlinè¯­æ³•" class="headerlink" title="build.gradle æ–‡ä»¶é…ç½®ï¼ŒåŸºäºkotlinè¯­æ³•"></a>build.gradle æ–‡ä»¶é…ç½®ï¼ŒåŸºäºkotlinè¯­æ³•</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">import</span> com.bmuschko.gradle.docker.tasks.image.DockerBuildImage<br><span class="hljs-keyword">import</span> com.bmuschko.gradle.docker.tasks.image.DockerPushImage<br><span class="hljs-keyword">import</span> com.bmuschko.gradle.docker.tasks.image.Dockerfile<br><span class="hljs-keyword">import</span> groovy.xml.XmlSlurper<br><span class="hljs-keyword">import</span> groovy.xml.slurpersupport.GPathResult<br><span class="hljs-keyword">import</span> org.springframework.boot.gradle.tasks.bundling.BootBuildImage<br><span class="hljs-keyword">import</span> org.springframework.boot.gradle.tasks.bundling.BootJar<br><span class="hljs-keyword">import</span> java.util.*<br><span class="hljs-keyword">import</span> java.util.jar.JarFile<br><br>plugins &#123;<br>    java<br>    `maven-publish` <br>    id(<span class="hljs-string">&quot;org.springframework.boot&quot;</span>) version <span class="hljs-string">&quot;3.1.5&quot;</span><br>    id(<span class="hljs-string">&quot;io.spring.dependency-management&quot;</span>) version <span class="hljs-string">&quot;1.1.4&quot;</span><br>    id(<span class="hljs-string">&quot;com.bmuschko.docker-spring-boot-application&quot;</span>) version <span class="hljs-string">&quot;9.4.0&quot;</span><br>&#125;<br><br><span class="hljs-comment">// åŠ è½½é…ç½®æ–‡ä»¶</span><br><span class="hljs-keyword">val</span> properties = Properties().apply &#123;<br>    load(rootProject.file(<span class="hljs-string">&quot;gradle.properties&quot;</span>).inputStream())<br>    load(rootProject.file(<span class="hljs-string">&quot;my.properties&quot;</span>).inputStream())<br>    load(rootProject.file(<span class="hljs-string">&quot;docker.properties&quot;</span>).inputStream())<br>&#125;<br> <br><span class="hljs-comment">// å¤„ç†  annotationProcessor </span><br>configurations &#123;<br>    compileOnly &#123;<br>        extendsFrom(configurations.annotationProcessor.<span class="hljs-keyword">get</span>())<br>    &#125;<br>&#125;<br><span class="hljs-comment">// è®¾ç½®jarä»“åº“åœ°å€</span><br>repositories &#123;<br>    mavenLocal()<br>    mavenCentral()<br>  <span class="hljs-comment">// è‡ªå®šä¹‰äº†ç§åº“é…ç½®ä¿¡æ¯</span><br>    <span class="hljs-keyword">val</span> nexusUrlList = properties[<span class="hljs-string">&quot;nexus.url&quot;</span>] <span class="hljs-keyword">as</span>? List&lt;*&gt;<br>    nexusUrlList?.forEach &#123; i -&gt;<br>        maven &#123;<br>            url = uri(i.toString())<br>            logger.info(url.toString())<br>            <span class="hljs-keyword">val</span> isHttps = url.toString().startsWith(<span class="hljs-string">&quot;https://&quot;</span>)<br>            credentials &#123;<br>                username = properties[<span class="hljs-string">&quot;nexus.user&quot;</span>].toString()<br>                password = properties[<span class="hljs-string">&quot;nexus.pwd&quot;</span>].toString()<br>              <span class="hljs-comment">// http éœ€è¦æ­¤é…ç½®=false</span><br>                isAllowInsecureProtocol = !isHttps<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// é¡¹ç›®ä¾èµ–</span><br>dependencies &#123;<br><br>    compileOnly(<span class="hljs-string">&quot;org.springframework.boot:spring-boot-configuration-processor&quot;</span>)<br>    implementation(<span class="hljs-string">&quot;org.springframework.boot:spring-boot-starter-web&quot;</span>)<br><br>    compileOnly(<span class="hljs-string">&quot;org.projectlombok:lombok&quot;</span>)<br>    annotationProcessor(<span class="hljs-string">&quot;org.projectlombok:lombok&quot;</span>)<br><br>    testImplementation(<span class="hljs-string">&quot;org.springframework.boot:spring-boot-starter-test&quot;</span>)<br><br>&#125;<br><br>group = properties.getProperty(<span class="hljs-string">&quot;group&quot;</span>)<br>version = properties.getProperty(<span class="hljs-string">&quot;version&quot;</span>)<br>description = properties.getProperty(<span class="hljs-string">&quot;description&quot;</span>)<br><br>java &#123;<br>    sourceCompatibility = JavaVersion.VERSION_17<br>    targetCompatibility = JavaVersion.VERSION_17<br>&#125;<br><span class="hljs-comment">// kotlin è¯­æ³•å®šä¹‰çš„æ–¹æ³•</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addRepository</span><span class="hljs-params">(repositories: <span class="hljs-type">RepositoryHandler</span>, url: <span class="hljs-type">String</span>, username: <span class="hljs-type">String</span>, password: <span class="hljs-type">String</span>, isAllowInsecure: <span class="hljs-type">Boolean</span>)</span></span> &#123;<br>    repositories.maven &#123;<br>        <span class="hljs-keyword">this</span>.url = uri(url)<br>        credentials &#123;<br>            <span class="hljs-keyword">this</span>.username = username<br>            <span class="hljs-keyword">this</span>.password = password<br>            isAllowInsecureProtocol = isAllowInsecure<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æ¨é€jarçš„å®šä¹‰ï¼Œè¿™é‡Œä½¿ç”¨çš„ç§æœ‰ä»“åº“ï¼Œå¾ˆå…·Jarçš„åç¼€ï¼Œåˆ†ç±»æ¨é€åˆ°ä¸åŒçš„ä»“åº“åœ°å€</span><br>publishing &#123;<br>    publications.create&lt;MavenPublication&gt;(<span class="hljs-string">&quot;maven&quot;</span>) &#123;<br>        from(components[<span class="hljs-string">&quot;java&quot;</span>])<br>    &#125;<br>    <span class="hljs-keyword">val</span> nexusUrlList = properties[<span class="hljs-string">&quot;nexus.url&quot;</span>] <span class="hljs-keyword">as</span>? List&lt;*&gt;<br>    <span class="hljs-keyword">val</span> nexusUser = properties[<span class="hljs-string">&quot;nexus.user&quot;</span>].toString()<br>    <span class="hljs-keyword">val</span> nexusPwd = properties[<span class="hljs-string">&quot;nexus.pwd&quot;</span>].toString()<br>    repositories &#123;<br>        nexusUrlList?.forEach &#123; url -&gt;<br>            logger.info(url.toString())<br>            <span class="hljs-keyword">val</span> urlStr = url.toString()<br>            <span class="hljs-keyword">when</span> &#123;<br>                version.toString().endsWith(<span class="hljs-string">&quot;SNAPSHOT&quot;</span>) &amp;&amp; urlStr.contains(<span class="hljs-string">&quot;SNAPSHOT&quot;</span>.lowercase()) -&gt;<br>                    addRepository(<span class="hljs-keyword">this</span>, urlStr, nexusUser, nexusPwd, !urlStr.startsWith(<span class="hljs-string">&quot;https://&quot;</span>))<br><br>                !version.toString().endsWith(<span class="hljs-string">&quot;SNAPSHOT&quot;</span>) &amp;&amp; !urlStr.contains(<span class="hljs-string">&quot;SNAPSHOT&quot;</span>.lowercase()) -&gt;<br>                    addRepository(<span class="hljs-keyword">this</span>, urlStr, nexusUser, nexusPwd, !urlStr.startsWith(<span class="hljs-string">&quot;https://&quot;</span>))<br><br>                <span class="hljs-keyword">else</span> -&gt; &#123;<br>                    logger.error(<span class="hljs-string">&quot;æ— åˆé€‚çš„ä»“åº“æ¨é€&quot;</span>)<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// tasks ç›¸å…³é…ç½®</span><br>tasks &#123;<br>  <span class="hljs-comment">// é‡å†™springboot çš„æ‰“åŒ…æ–¹å¼ã€‚èµ„æºæ–‡ä»¶å’Œç¬¬ä¸‰æ–¹jarå¤–ç½®ã€‚ä¿è¯å¯ä»¥ä½¿ç”¨ Java -jar å¯åŠ¨ï¼Œä¿ç•™äº†ç›¸å¯¹ä½ç½®</span><br>    named&lt;BootJar&gt;(<span class="hljs-string">&quot;bootJar&quot;</span>) &#123;<br>        copy &#123;<br>            from(<span class="hljs-string">&quot;src/main/resources&quot;</span>)<br>            into(<span class="hljs-string">&quot;build/libs/resources&quot;</span>)<br>        &#125;<br>      <span class="hljs-comment">// ç¬¬ä¸‰æ–¹jarçš„ç›®å½•æ•´ç†</span><br>        <span class="hljs-keyword">val</span> classpathFilesByIot = configurations.runtimeClasspath.<span class="hljs-keyword">get</span>().files<br>        <span class="hljs-keyword">val</span> classpathIot = StringBuilder()<br>        classpathIot.append(<span class="hljs-string">&quot;./resources/&quot;</span>)<br>        classpathFilesByIot.forEach &#123; file -&gt;<br>            copy &#123;<br>                <span class="hljs-keyword">val</span> mainAttributes = JarFile(file).manifest?.mainAttributes<br>                <span class="hljs-keyword">if</span> (project.group.toString().equals(mainAttributes?.getValue(<span class="hljs-string">&quot;Group&quot;</span>))) &#123;<br>                    from(file)<br>                    into(<span class="hljs-string">&quot;build/libs/lib&quot;</span>)<br>                    classpathIot.append(<span class="hljs-string">&quot;  ./lib/<span class="hljs-subst">$&#123;file.name&#125;</span>&quot;</span>)<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    from(file)<br>                    into(<span class="hljs-string">&quot;build/libs/lib/third-party&quot;</span>)<br>                    classpathIot.append(<span class="hljs-string">&quot;  ./lib/third-party/<span class="hljs-subst">$&#123;file.name&#125;</span>&quot;</span>)<br>                &#125;<br>            &#125;<br>            exclude(file.name)<br>        &#125;<br>        exclude(<span class="hljs-string">&quot;*xml*&quot;</span>)<br>        exclude(<span class="hljs-string">&quot;*.properties&quot;</span>)<br>        manifest &#123;<br>            attributes(<br>                <span class="hljs-string">&quot;Class-Path&quot;</span> to classpathIot,<br>                <span class="hljs-string">&quot;Group&quot;</span> to project.group.toString(),<br>            )<br>        &#125;<br>    &#125;<br>    withType&lt;Test&gt; &#123;<br>        useJUnitPlatform()<br>    &#125;<br>    withType&lt;JavaCompile&gt;() &#123;<br>        options.encoding = <span class="hljs-string">&quot;UTF-8&quot;</span><br>    &#125;<br>    withType&lt;Javadoc&gt;() &#123;<br>        options.encoding = <span class="hljs-string">&quot;UTF-8&quot;</span><br>    &#125;<br><span class="hljs-comment">// è·³è¿‡test task</span><br>    named(<span class="hljs-string">&quot;test&quot;</span>) &#123;<br>        onlyIf &#123; <span class="hljs-literal">false</span> &#125;<br>    &#125;<br>  <span class="hljs-comment">// è‡ªå®šä¹‰dockerfile</span><br>    <span class="hljs-string">&quot;dockerCreateDockerfile&quot;</span>(Dockerfile::<span class="hljs-keyword">class</span>) &#123;<br>        dependsOn(<span class="hljs-string">&quot;bootJar&quot;</span>)<br>      <span class="hljs-comment">// è·å–dockerfile é»˜è®¤é…ç½®ä¿¡æ¯</span><br>        <span class="hljs-keyword">val</span> originalInstructions = instructions.<span class="hljs-keyword">get</span>().toMutableList()<br>      <span class="hljs-comment">// æ¸…ç©ºé»˜è®¤ä¿¡æ¯</span><br>        originalInstructions.clear();<br>      <span class="hljs-comment">// è‡ªå®šä¹‰dockerfile</span><br>      <span class="hljs-comment">// å®‰è£…curl å‘½ä»¤  </span><br>        <span class="hljs-keyword">val</span> run = <span class="hljs-string">&quot;apt-get update&quot;</span> +<br>                <span class="hljs-string">&quot; &amp;&amp; apt-get install -y --no-install-recommends curl&quot;</span> +<br>                <span class="hljs-string">&quot; &amp;&amp; rm -rf /var/lib/apt/lists/* &quot;</span> +<br>                <span class="hljs-string">&quot; &amp;&amp; ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp;  echo &#x27;Asia/Shanghai&#x27; &gt;/etc/timezone&quot;</span>;<br>        <span class="hljs-keyword">val</span> baseImage = Dockerfile.FromInstruction(Dockerfile.From(<span class="hljs-string">&quot;eclipse-temurin:17.0.9_9-jre&quot;</span>))<br>        <span class="hljs-keyword">val</span> workDir = <span class="hljs-string">&quot;/app&quot;</span><br>        originalInstructions.add(baseImage)<br>        originalInstructions.add(Dockerfile.WorkDirInstruction(workDir))<br>        originalInstructions.add(Dockerfile.RunCommandInstruction(run))<br>        <span class="hljs-keyword">val</span> jarFileName = project.name + <span class="hljs-string">&quot;-&quot;</span> + project.version + <span class="hljs-string">&quot;.jar&quot;</span><br>        originalInstructions.add(Dockerfile.EnvironmentVariableInstruction(<span class="hljs-string">&quot;IOT_PLUGIN_DOCKER_CONTAINER&quot;</span>, jarFileName))<br>        originalInstructions.add(Dockerfile.EnvironmentVariableInstruction(<span class="hljs-string">&quot;LANG&quot;</span>, <span class="hljs-string">&quot;C.UTF-8&quot;</span>))<br>        originalInstructions.add(Dockerfile.EnvironmentVariableInstruction(<span class="hljs-string">&quot;LOG_LEVEL&quot;</span>, <span class="hljs-string">&quot;debug&quot;</span>))<br>        originalInstructions.add(Dockerfile.CopyFileInstruction(Dockerfile.CopyFile(<span class="hljs-string">&quot;libs<span class="hljs-subst">$&#123;File.separator&#125;</span><span class="hljs-variable">$jarFileName</span>&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$workDir</span>/<span class="hljs-variable">$jarFileName</span>&quot;</span>)))<br>        originalInstructions.add(Dockerfile.CopyFileInstruction(Dockerfile.CopyFile(<span class="hljs-string">&quot;libs<span class="hljs-subst">$&#123;File.separator&#125;</span>lib&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$workDir</span>/lib&quot;</span>)))<br>        originalInstructions.add(Dockerfile.CopyFileInstruction(Dockerfile.CopyFile(<span class="hljs-string">&quot;libs<span class="hljs-subst">$&#123;File.separator&#125;</span>resources&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$workDir</span>/resources&quot;</span>)))<br>        originalInstructions.add(Dockerfile.VolumeInstruction(<span class="hljs-string">&quot;/var/run/docker.sock&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$workDir</span>/logs&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$workDir</span>/resources&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$workDir</span>/data&quot;</span>))<br>        originalInstructions.add(Dockerfile.ExposePortInstruction(<span class="hljs-number">8080</span>))<br>        originalInstructions.add((Dockerfile.EntryPointInstruction(<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;-jar&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$workDir</span>/<span class="hljs-variable">$jarFileName</span>&quot;</span>)))<br>        instructions.<span class="hljs-keyword">set</span>(originalInstructions)<br>    &#125;<br>  <span class="hljs-comment">// è®¾ç½®docker build dockerfileçš„è·¯å¾„</span><br>    <span class="hljs-string">&quot;dockerBuildImage&quot;</span>(DockerBuildImage::<span class="hljs-keyword">class</span>) &#123;<br>        inputDir.<span class="hljs-keyword">set</span>(project.layout.buildDirectory.asFile.<span class="hljs-keyword">get</span>())<br>        dockerFile.<span class="hljs-keyword">set</span>(project.layout.buildDirectory.asFile.<span class="hljs-keyword">get</span>().resolve(<span class="hljs-string">&quot;docker<span class="hljs-subst">$&#123;File.separator&#125;</span>Dockerfile&quot;</span>))<br>    &#125;<br>  <span class="hljs-comment">// ç®¡ç†æ–‡ä»¶å¤åˆ¶åˆ° build/dockerç›®å½•å…ˆï¼Œç”±äºè‡ªå®šä¹‰äº†dockerfileçš„jarä¿¡æ¯ï¼Œæ‰€æœ‰å…¨éƒ¨æ’é™¤</span><br>    <span class="hljs-string">&quot;dockerSyncBuildContext&quot;</span>(Sync::<span class="hljs-keyword">class</span>) &#123;<br>        exclude(<span class="hljs-string">&quot;**&quot;</span>)<br>    &#125;<br>  <span class="hljs-comment">// æ¨é€ dockeré•œåƒåˆ°è¿œç¨‹ä»“åº“</span><br>  <span class="hljs-comment">// ä¸»è¦å‘½ä»¤  docker login /  docker tag  / docker push</span><br>    create(<span class="hljs-string">&quot;pushDokcerImage&quot;</span>) &#123;<br>        group = <span class="hljs-string">&quot;docker&quot;</span><br>      <span class="hljs-comment">// å®šä¹‰äº†æ­¤taskä¾èµ– task ï¼šdockerBuildImage </span><br>        dependsOn(<span class="hljs-string">&quot;dockerBuildImage&quot;</span>)<br>        doLast &#123;<br>            <span class="hljs-keyword">val</span> commandLogin = listOf(<span class="hljs-string">&quot;bash&quot;</span>, <span class="hljs-string">&quot;-c&quot;</span>, <span class="hljs-string">&quot;docker login -u admin -p admin http://localhost:8082&quot;</span>)<br>            <span class="hljs-keyword">val</span> process = ProcessBuilder(commandLogin)<br>                .directory(project.layout.buildDirectory.asFile.<span class="hljs-keyword">get</span>().resolve(<span class="hljs-string">&quot;docker&quot;</span>))<br>                .redirectOutput(ProcessBuilder.Redirect.INHERIT).redirectError(ProcessBuilder.Redirect.INHERIT).start()<br>            <span class="hljs-keyword">val</span> exitCode = process.waitFor()<br>            <span class="hljs-keyword">if</span> (exitCode == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">val</span> commandTag = listOf(<span class="hljs-string">&quot;bash&quot;</span>, <span class="hljs-string">&quot;-c&quot;</span>, <span class="hljs-string">&quot;docker tag  <span class="hljs-variable">$imageName</span>  localhost:8082/<span class="hljs-variable">$imageName</span>&quot;</span>)<br>                ProcessBuilder(commandTag)<br>                    .directory(project.layout.buildDirectory.asFile.<span class="hljs-keyword">get</span>().resolve(<span class="hljs-string">&quot;docker&quot;</span>))<br>                    .redirectOutput(ProcessBuilder.Redirect.INHERIT).redirectError(ProcessBuilder.Redirect.INHERIT).start()<br>                <span class="hljs-keyword">val</span> commandPush = listOf(<span class="hljs-string">&quot;bash&quot;</span>, <span class="hljs-string">&quot;-c&quot;</span>, <span class="hljs-string">&quot;docker push localhost:8082/<span class="hljs-variable">$imageName</span>&quot;</span>)<br>                <span class="hljs-keyword">val</span> processPush = ProcessBuilder(commandPush)<br>                    .directory(project.layout.buildDirectory.asFile.<span class="hljs-keyword">get</span>().resolve(<span class="hljs-string">&quot;docker&quot;</span>))<br>                    .redirectOutput(ProcessBuilder.Redirect.INHERIT).redirectError(ProcessBuilder.Redirect.INHERIT).start()<br>                processPush.inputStream.bufferedReader().useLines &#123; lines -&gt;<br>                    lines.forEach &#123; println(it) &#125;<br>                &#125;<br>                <span class="hljs-keyword">val</span> exitCodePush = processPush.waitFor()<br>                <span class="hljs-keyword">if</span> (exitCodePush == <span class="hljs-number">0</span>) &#123;<br>                    println(<span class="hljs-string">&quot;Command executed successfully.&quot;</span>)<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-keyword">throw</span> GradleException(<span class="hljs-string">&quot;Command failed with exit code2 <span class="hljs-variable">$exitCodePush</span>.&quot;</span>)<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">throw</span> GradleException(<span class="hljs-string">&quot;Command failed with exit code1 <span class="hljs-variable">$exitCode</span>.&quot;</span>)<br>            &#125;<br>        &#125;<br>    &#125;<br>  <span class="hljs-comment">// è‡ªå®šä¹‰taskï¼Œä¿å­˜dockeré•œåƒåˆ°æ–‡ä»¶ï¼Œä½¿ç”¨çš„æ˜¯  docker save å‘½ä»¤ï¼Œä½¿ç”¨äº†gzipå‹ç¼©</span><br>    create(<span class="hljs-string">&quot;saveDockerImageByLocal&quot;</span>) &#123;<br>        group = <span class="hljs-string">&quot;docker&quot;</span><br>      <span class="hljs-comment">// ä¾èµ–çš„task</span><br>        dependsOn(<span class="hljs-string">&quot;dockerBuildImage&quot;</span>)<br>        doLast &#123;<br>            <span class="hljs-keyword">val</span> command = listOf(<span class="hljs-string">&quot;bash&quot;</span>, <span class="hljs-string">&quot;-c&quot;</span>, <span class="hljs-string">&quot;docker save <span class="hljs-variable">$imageName</span> | gzip &gt; <span class="hljs-subst">$&#123;imageName.replace(<span class="hljs-string">&#x27;:&#x27;</span>, <span class="hljs-string">&#x27;-&#x27;</span>)&#125;</span>.tar.gz&quot;</span>)<br>            <span class="hljs-keyword">val</span> process = ProcessBuilder(command)<br>                .directory(project.layout.buildDirectory.asFile.<span class="hljs-keyword">get</span>().resolve(<span class="hljs-string">&quot;docker&quot;</span>))<br>                .redirectOutput(ProcessBuilder.Redirect.INHERIT).redirectError(ProcessBuilder.Redirect.INHERIT).start()<br>            process.inputStream.bufferedReader().useLines &#123; lines -&gt;<br>                lines.forEach &#123; println(it) &#125;<br>            &#125;<br>            <span class="hljs-keyword">val</span> exitCode = process.waitFor()<br>            <span class="hljs-keyword">if</span> (exitCode == <span class="hljs-number">0</span>) &#123;<br>                println(<span class="hljs-string">&quot;Command executed successfully.&quot;</span>)<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">throw</span> GradleException(<span class="hljs-string">&quot;Command failed with exit code <span class="hljs-variable">$exitCode</span>.&quot;</span>)<br>            &#125;<br>        &#125;<br>    &#125;<br>  <span class="hljs-comment">// ç”±äº æ€»æ˜¯æŠ¥é”™ï¼Œæ›´æ”¹äº†åˆ†ç»„ï¼Œæ ‡è®°ä¸ºå¯ç”¨</span><br>    <span class="hljs-string">&quot;dockerPushImage&quot;</span>(DockerPushImage::<span class="hljs-keyword">class</span>) &#123;<br>        group = <span class="hljs-string">&quot;å¼ƒç”¨&quot;</span><br>    &#125;<br>   <span class="hljs-comment">// ç”±äº æ€»æ˜¯æŠ¥é”™ï¼Œæ›´æ”¹äº†åˆ†ç»„ï¼Œæ ‡è®°ä¸ºå¯ç”¨ ï¼Œæ­¤taskï¼Œä¸ºSpringbootæ’ä»¶çš„taskï¼Œè‡ªå®šä¹‰åŠŸèƒ½ä¸å¤ªç†æƒ³</span><br>    named&lt;BootBuildImage&gt;(<span class="hljs-string">&quot;bootBuildImage&quot;</span>) &#123;<br>        group = <span class="hljs-string">&quot;å¼ƒç”¨&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å®šä¹‰äº†ä»XMLæ–‡ä»¶ä¸­ï¼Œè·å–é•œåƒåå­—çš„ä¿¡æ¯</span><br><span class="hljs-keyword">val</span> xmlFile = file(project.layout.buildDirectory.asFile.<span class="hljs-keyword">get</span>().resolve(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;sourceSets.main.get().resources.srcDirs.first()&#125;</span><span class="hljs-subst">$&#123;File.separator&#125;</span>xml<span class="hljs-subst">$&#123;File.separator&#125;</span>doccker.xml&quot;</span>))<br><span class="hljs-keyword">if</span> (!xmlFile.exists()) &#123;<br>    logger.error(<span class="hljs-string">&quot;æ‰¾ä¸åˆ°<span class="hljs-subst">$&#123;xmlFile&#125;</span>æ–‡ä»¶&quot;</span>)<br>&#125;<br><span class="hljs-keyword">val</span> xml: GPathResult? = XmlSlurper().parseText(xmlFile.readText())<br><span class="hljs-keyword">val</span> idMy = xml?.getProperty(<span class="hljs-string">&quot;id&quot;</span>).toString().replace(<span class="hljs-string">&quot;_&quot;</span>, <span class="hljs-string">&quot;-&quot;</span>)<br><span class="hljs-keyword">val</span> versionMy = xml?.getProperty(<span class="hljs-string">&quot;version&quot;</span>).toString().replace(<span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;-&quot;</span>)<br><span class="hljs-keyword">val</span> imageName = <span class="hljs-string">&quot;<span class="hljs-variable">$idMy</span>:<span class="hljs-variable">$versionMy</span>&quot;</span><br><br><span class="hljs-comment">// å‚è€ƒ com.bmuschko.docker-spring-boot-application æ’ä»¶æ–‡æ¡£</span><br>docker &#123;<br>    springBootApplication &#123;<br>      <span class="hljs-comment">// å®šä¹‰ docker é•œåƒçš„åå­—</span><br>        images.add(imageName)<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h2 id="å¼‚å¸¸ä¿¡æ¯"><a href="#å¼‚å¸¸ä¿¡æ¯" class="headerlink" title="å¼‚å¸¸ä¿¡æ¯"></a>å¼‚å¸¸ä¿¡æ¯</h2><blockquote><p>æ‰§è¡Œ<code>&gt; Task :dockerBuildImage</code> æŠ¥é”™ <code>Failure running command ([docker-credential-gcloud, get])</code></p><p>æ£€æŸ¥ <code>~/.docker/config.json</code> æ–‡ä»¶,   <a href="https://docs.docker.com/engine/reference/commandline/cli/#docker-cli-configuration-file-configjson-properties">æ–‡æ¡£https://docs.docker.com/engine/reference/commandline/cli/#docker-cli-configuration-file-configjson-properties</a></p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;auths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;127.0.0.1:8082&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;credsStore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;osxkeychain&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;credHelpers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>   <span class="hljs-comment">// åˆ é™¤ credHelpers é…ç½®é¡¹å³å¯ï¼Œæˆ–å®‰è£… gcloud </span><br><span class="hljs-attr">&quot;asia.gcr.io&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gcloud&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;eu.gcr.io&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gcloud&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;gcr.io&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gcloud&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;marketplace.gcr.io&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gcloud&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;staging-k8s.gcr.io&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gcloud&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;us.gcr.io&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;gcloud&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;experimental&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;enabled&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;currentContext&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;orbstack&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/java/spring/springboot-docker-gradle/image-20240114181938055.png" alt="Task :dockerBuildImage"></p>]]></content>
    
    
    <categories>
      
      <category>Docker</category>
      
      <category>DockerFile</category>
      
      <category>Springboot</category>
      
      <category>Gradle</category>
      
      <category>bmuschko.docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DockerFile</tag>
      
      <tag>org.springframework.boot</tag>
      
      <tag>gradle</tag>
      
      <tag>Springboot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux é…ç½® daemon.json hostså‚æ•°å¯¼è‡´DockeræœåŠ¡å¯åŠ¨å¤±è´¥</title>
    <link href="/blog/87ee8686.html"/>
    <url>/blog/87ee8686.html</url>
    
    <content type="html"><![CDATA[<h2 id="Linux-é…ç½®-daemon-json-hostså‚æ•°å¯¼è‡´DockeræœåŠ¡å¯åŠ¨å¤±è´¥"><a href="#Linux-é…ç½®-daemon-json-hostså‚æ•°å¯¼è‡´DockeræœåŠ¡å¯åŠ¨å¤±è´¥" class="headerlink" title="Linux é…ç½® daemon.json hostså‚æ•°å¯¼è‡´DockeræœåŠ¡å¯åŠ¨å¤±è´¥"></a>Linux é…ç½® daemon.json hostså‚æ•°å¯¼è‡´DockeræœåŠ¡å¯åŠ¨å¤±è´¥</h2><h3 id="TCPè®¿é—®ï¼Œç¬¬ä¸€ç§é…ç½®æ–¹å¼"><a href="#TCPè®¿é—®ï¼Œç¬¬ä¸€ç§é…ç½®æ–¹å¼" class="headerlink" title="TCPè®¿é—®ï¼Œç¬¬ä¸€ç§é…ç½®æ–¹å¼"></a>TCPè®¿é—®ï¼Œç¬¬ä¸€ç§é…ç½®æ–¹å¼</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@bogon docker]# tree <span class="hljs-regexp">/etc/</span>docker/<br><span class="hljs-regexp">/etc/</span>docker/<br>â””â”€â”€ daemon.json<br><br># é…ç½®  daemon.json <br><br>[root@bogon docker]# cat daemon.json<br>&#123;<br>  <span class="hljs-string">&quot;insecure-registries&quot;</span> : [<br>    <span class="hljs-string">&quot;192.168.10.25:8082&quot;</span> # ç§æœ‰docker hubï¼Œhttpæ–¹å¼è®¿é—®<br>  ],<br>  <span class="hljs-string">&quot;hosts&quot;</span> : [<br>    <span class="hljs-string">&quot;unix:\/\/\/var\/run\/docker.sock&quot;</span>,<br>    <span class="hljs-string">&quot;tcp:\/\/0.0.0.0:2375&quot;</span><br>  ],<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span> : [<br>    <span class="hljs-string">&quot;https:\/\/docker.mirrors.ustc.edu.cn&quot;</span>,<br>    <span class="hljs-string">&quot;https:\/\/hub-mirror.c.163.com&quot;</span><br>  ]<br>&#125;<br><br># å¦‚æœ  systemctl start docker æ— æ³•å¯åŠ¨ <br>- é¦–å…ˆæ£€æŸ¥ daemon.json  é…ç½®æ˜¯å¦æ­£ç¡®<br>- æ£€æŸ¥ <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/docker.service æ–‡ä»¶ æ˜¯å¦å«æœ‰å¦‚ä¸‹é…ç½®<br>  <br><br>#ExecStart=<span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/dockerd -H fd:/</span><span class="hljs-regexp">/ --containerd=/</span>run<span class="hljs-regexp">/containerd/</span>containerd.sock #æ³¨é‡Šæ­¤è¡Œ<br>ExecStart=<span class="hljs-regexp">/usr/</span>bin/dockerd       # ä½¿ç”¨æ­¤é…ç½®ï¼Œå†æ¬¡å¯åŠ¨dockeræœåŠ¡<br><br>   <br></code></pre></td></tr></table></figure><blockquote><p>Docker æœåŠ¡é…ç½®ä¿¡æ¯ <code>/usr/lib/systemd/system/docker.service</code></p></blockquote><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/docker/daemon-hosts/image-20231225135053800.png" alt="docker.service"></p><h3 id="TCPè®¿é—®ï¼Œ-ç¬¬äºŒç§-é…ç½®TCPè®¿é—®-ï¼ˆä¸æ¨èï¼Œå®¹æ˜“å‘äººï¼‰"><a href="#TCPè®¿é—®ï¼Œ-ç¬¬äºŒç§-é…ç½®TCPè®¿é—®-ï¼ˆä¸æ¨èï¼Œå®¹æ˜“å‘äººï¼‰" class="headerlink" title="TCPè®¿é—®ï¼Œ ç¬¬äºŒç§ é…ç½®TCPè®¿é—® ï¼ˆä¸æ¨èï¼Œå®¹æ˜“å‘äººï¼‰"></a>TCPè®¿é—®ï¼Œ ç¬¬äºŒç§ é…ç½®TCPè®¿é—® ï¼ˆä¸æ¨èï¼Œå®¹æ˜“å‘äººï¼‰</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gradle"> # è·å–åˆ é™¤ daemon.json ä¸­çš„hostsé…ç½®<br> # <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/docker.service ä½¿ç”¨  -H <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">2375</span>   é…ç½®TCPè®¿é—®<br>    <br>ExecStart=<span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/dockerd -H fd:/</span><span class="hljs-regexp">/ --containerd=/</span>run<span class="hljs-regexp">/containerd/</span>containerd.sock -H <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">2375</span>  <br>    <br></code></pre></td></tr></table></figure><h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><blockquote><p>å¦‚æœè¿˜ä¸èƒ½è®¿é—®ï¼Œæ£€æŸ¥é˜²ç«å¢™çŠ¶æ€ã€‚</p></blockquote><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/docker/daemon-hosts/image-20231225140708315.png" alt="Docker versionä¿¡æ¯"></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
      <tag>Linux</tag>
      
      <tag>Daemon.json</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux xfsæ ¼å¼çš„ /home ç£ç›˜å‹ç¼©åˆ†é…ç»™ /</title>
    <link href="/blog/7afb52be.html"/>
    <url>/blog/7afb52be.html</url>
    
    <content type="html"><![CDATA[<h1 id="Linux-xfsæ ¼å¼çš„-home-ç£ç›˜å‹ç¼©åˆ†é…ç»™"><a href="#Linux-xfsæ ¼å¼çš„-home-ç£ç›˜å‹ç¼©åˆ†é…ç»™" class="headerlink" title="Linux xfsæ ¼å¼çš„ /home ç£ç›˜å‹ç¼©åˆ†é…ç»™ /"></a>Linux xfsæ ¼å¼çš„ <code>/home </code>ç£ç›˜å‹ç¼©åˆ†é…ç»™ <code>/</code></h1><ul><li><p>æŸ¥çœ‹ç£ç›˜æƒ…å†µ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@bogon ~]<span class="hljs-comment"># df -h</span><br>æ–‡ä»¶ç³»ç»Ÿ                          å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹<br>devtmpfs                          <span class="hljs-number">4.0</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">4.0</span>M    <span class="hljs-number">0</span>% /dev<br>tmpfs                             <span class="hljs-number">3.7</span>G     <span class="hljs-number">0</span>  <span class="hljs-number">3.7</span>G    <span class="hljs-number">0</span>% <span class="hljs-regexp">/dev/</span>shm<br>tmpfs                             <span class="hljs-number">1.5</span>G  <span class="hljs-number">9.8</span>M  <span class="hljs-number">1.5</span>G    <span class="hljs-number">1</span>% /run<br><span class="hljs-regexp">/dev/m</span>apper<span class="hljs-regexp">/almalinux_bogon-root   70G  6.6G   64G   10% /</span><br><span class="hljs-regexp">/dev/</span>sda1                        <span class="hljs-number">1014</span>M  <span class="hljs-number">418</span>M  <span class="hljs-number">597</span>M   <span class="hljs-number">42</span>% /boot<br>tmpfs                             <span class="hljs-number">756</span>M   <span class="hljs-number">92</span>K  <span class="hljs-number">756</span>M    <span class="hljs-number">1</span>% <span class="hljs-regexp">/run/u</span>ser/<span class="hljs-number">0</span><br>overlay                            <span class="hljs-number">70</span>G  <span class="hljs-number">6.6</span>G   <span class="hljs-number">64</span>G   <span class="hljs-number">10</span>% <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/docker/</span>overlay2<span class="hljs-regexp">/5350a4d719574d0eb7a5fb79e75aa930b34314feb2e119380e72cc8d2fbbf315/m</span>erged<br><span class="hljs-regexp">/dev/m</span>apper<span class="hljs-regexp">/almalinux_bogon-home  853G  6.0G  847G    1% /</span>home<br></code></pre></td></tr></table></figure></li><li><p>å¤‡ä»½ <code>/home</code></p><blockquote><p>è‡ªè¡Œå¤‡ä»½ç›®å½•ä¸‹æ–‡ä»¶</p></blockquote></li><li><p>å¸è½½ <code>/home</code>æŒ‚è½½ç‚¹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@bogon ~]<span class="hljs-comment"># umount -v /home</span><br>umount: /home æœªæŒ‚è½½<br>[root@bogon ~]<span class="hljs-comment"># df -h</span><br>æ–‡ä»¶ç³»ç»Ÿ                          å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹<br>devtmpfs                          <span class="hljs-number">4.0</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">4.0</span>M    <span class="hljs-number">0</span>% /dev<br>tmpfs                             <span class="hljs-number">3.7</span>G     <span class="hljs-number">0</span>  <span class="hljs-number">3.7</span>G    <span class="hljs-number">0</span>% <span class="hljs-regexp">/dev/</span>shm<br>tmpfs                             <span class="hljs-number">1.5</span>G  <span class="hljs-number">9.8</span>M  <span class="hljs-number">1.5</span>G    <span class="hljs-number">1</span>% /run<br><span class="hljs-regexp">/dev/m</span>apper<span class="hljs-regexp">/almalinux_bogon-root   70G  6.6G   64G   10% /</span><br><span class="hljs-regexp">/dev/</span>sda1                        <span class="hljs-number">1014</span>M  <span class="hljs-number">418</span>M  <span class="hljs-number">597</span>M   <span class="hljs-number">42</span>% /boot<br>tmpfs                             <span class="hljs-number">756</span>M   <span class="hljs-number">92</span>K  <span class="hljs-number">756</span>M    <span class="hljs-number">1</span>% <span class="hljs-regexp">/run/u</span>ser/<span class="hljs-number">0</span><br>overlay                            <span class="hljs-number">70</span>G  <span class="hljs-number">6.6</span>G   <span class="hljs-number">64</span>G   <span class="hljs-number">10</span>% <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/docker/</span>overlay2<span class="hljs-regexp">/5350a4d719574d0eb7a5fb79e75aa930b34314feb2e119380e72cc8d2fbbf315/m</span>erged<br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤ æŒ‚è½½ <code>\home</code> çš„ <code>/dev/mapper/almalinux_bogon-home</code> </p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">[root@bogon ~]<span class="hljs-comment"># lvremove /dev/mapper/almalinux_bogon-home</span><br>Do you really want to remove active logical <span class="hljs-keyword">volume</span><span class="language-bash"> almalinux_bogon/home? [y/n]: y</span><br>  Logical <span class="hljs-keyword">volume</span><span class="language-bash"> <span class="hljs-string">&quot;home&quot;</span> successfully removed.</span><br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@bogon ~]# lvdisplay<br>  <span class="hljs-comment">--- Logical volume ---</span><br>  LV <span class="hljs-type">Path</span>                /dev/almalinux_bogon/swap<br>  LV <span class="hljs-type">Name</span>                swap<br>  VG <span class="hljs-type">Name</span>                almalinux_bogon<br>  LV <span class="hljs-type">UUID</span>                k3WZ81-oxNS-KJ9J-UVLx-sUX8-bqDd<span class="hljs-number">-0</span>iPinl<br>  LV <span class="hljs-keyword">Write</span> <span class="hljs-keyword">Access</span>        <span class="hljs-keyword">read</span>/<span class="hljs-keyword">write</span><br>  LV Creation host, <span class="hljs-type">time</span> bogon, <span class="hljs-number">2023</span><span class="hljs-number">-12</span><span class="hljs-number">-22</span> <span class="hljs-number">14</span>:<span class="hljs-number">20</span>:<span class="hljs-number">48</span> +<span class="hljs-number">0800</span><br>  LV Status              available<br>  # <span class="hljs-keyword">open</span>                 <span class="hljs-number">2</span><br>  LV Size                &lt;<span class="hljs-number">7.77</span> GiB<br>  <span class="hljs-keyword">Current</span> LE             <span class="hljs-number">1989</span><br>  Segments               <span class="hljs-number">1</span><br>  Allocation             <span class="hljs-keyword">inherit</span><br>  <span class="hljs-keyword">Read</span> ahead sectors     auto<br>  - currently <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span>     <span class="hljs-number">256</span><br>  Block device           <span class="hljs-number">253</span>:<span class="hljs-number">1</span><br><br>  <span class="hljs-comment">--- Logical volume ---</span><br>  LV <span class="hljs-type">Path</span>                /dev/almalinux_bogon/root<br>  LV <span class="hljs-type">Name</span>                root<br>  VG <span class="hljs-type">Name</span>                almalinux_bogon<br>  LV <span class="hljs-type">UUID</span>                nKyL47-CJnM-Pu2Z-WQqH-ylve-QZuc-FiJnUz<br>  LV <span class="hljs-keyword">Write</span> <span class="hljs-keyword">Access</span>        <span class="hljs-keyword">read</span>/<span class="hljs-keyword">write</span><br>  LV Creation host, <span class="hljs-type">time</span> bogon, <span class="hljs-number">2023</span><span class="hljs-number">-12</span><span class="hljs-number">-22</span> <span class="hljs-number">14</span>:<span class="hljs-number">20</span>:<span class="hljs-number">52</span> +<span class="hljs-number">0800</span><br>  LV Status              available<br>  # <span class="hljs-keyword">open</span>                 <span class="hljs-number">1</span><br>  LV Size                <span class="hljs-number">70.00</span> GiB<br>  <span class="hljs-keyword">Current</span> LE             <span class="hljs-number">17920</span><br>  Segments               <span class="hljs-number">1</span><br>  Allocation             <span class="hljs-keyword">inherit</span><br>  <span class="hljs-keyword">Read</span> ahead sectors     auto<br>  - currently <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span>     <span class="hljs-number">256</span><br>  Block device           <span class="hljs-number">253</span>:<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure></li><li><p>æ‰©å±• <code>/</code></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@bogon ~]# lvextend -L +700G /dev/mapper/almalinux_bogon-root<br>  Size of logical volume almalinux_bogon/root changed <span class="hljs-keyword">from</span> 70.00 GiB (17920 extents) <span class="hljs-keyword">to</span> 770.00 GiB (197120 extents).<br>  Logical volume almalinux_bogon/root successfully resized.<br> <br>[root@bogon ~]# xfs_growfs /dev/mapper/almalinux_bogon-root<br><span class="hljs-attribute">meta-data</span>=/dev/mapper/almalinux_bogon-root <span class="hljs-attribute">isize</span>=512    <span class="hljs-attribute">agcount</span>=4, <span class="hljs-attribute">agsize</span>=4587520 blks<br>         =                       <span class="hljs-attribute">sectsz</span>=4096  <span class="hljs-attribute">attr</span>=2, <span class="hljs-attribute">projid32bit</span>=1<br>         =                       <span class="hljs-attribute">crc</span>=1        <span class="hljs-attribute">finobt</span>=1, <span class="hljs-attribute">sparse</span>=1, <span class="hljs-attribute">rmapbt</span>=0<br>         =                       <span class="hljs-attribute">reflink</span>=1    <span class="hljs-attribute">bigtime</span>=1 <span class="hljs-attribute">inobtcount</span>=1 <span class="hljs-attribute">nrext64</span>=0<br>data     =                       <span class="hljs-attribute">bsize</span>=4096   <span class="hljs-attribute">blocks</span>=18350080, <span class="hljs-attribute">imaxpct</span>=25<br>         =                       <span class="hljs-attribute">sunit</span>=0      <span class="hljs-attribute">swidth</span>=0 blks<br>naming   =version 2              <span class="hljs-attribute">bsize</span>=4096   <span class="hljs-attribute">ascii-ci</span>=0, <span class="hljs-attribute">ftype</span>=1<br>log      =internal log           <span class="hljs-attribute">bsize</span>=4096   <span class="hljs-attribute">blocks</span>=8960, <span class="hljs-attribute">version</span>=2<br>         =                       <span class="hljs-attribute">sectsz</span>=4096  <span class="hljs-attribute">sunit</span>=1 blks, <span class="hljs-attribute">lazy-count</span>=1<br>realtime =none                   <span class="hljs-attribute">extsz</span>=4096   <span class="hljs-attribute">blocks</span>=0, <span class="hljs-attribute">rtextents</span>=0<br>data blocks changed <span class="hljs-keyword">from</span> 18350080 <span class="hljs-keyword">to</span> 201850880<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@bogon ~]<span class="hljs-comment"># df -h</span><br>æ–‡ä»¶ç³»ç»Ÿ                          å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹<br>devtmpfs                          <span class="hljs-number">4.0</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">4.0</span>M    <span class="hljs-number">0</span>% /dev<br>tmpfs                             <span class="hljs-number">3.7</span>G     <span class="hljs-number">0</span>  <span class="hljs-number">3.7</span>G    <span class="hljs-number">0</span>% <span class="hljs-regexp">/dev/</span>shm<br>tmpfs                             <span class="hljs-number">1.5</span>G  <span class="hljs-number">9.8</span>M  <span class="hljs-number">1.5</span>G    <span class="hljs-number">1</span>% /run<br><span class="hljs-regexp">/dev/m</span>apper<span class="hljs-regexp">/almalinux_bogon-root  770G   12G  759G    2% /</span><br><span class="hljs-regexp">/dev/</span>sda1                        <span class="hljs-number">1014</span>M  <span class="hljs-number">418</span>M  <span class="hljs-number">597</span>M   <span class="hljs-number">42</span>% /boot<br>tmpfs                             <span class="hljs-number">756</span>M   <span class="hljs-number">92</span>K  <span class="hljs-number">756</span>M    <span class="hljs-number">1</span>% <span class="hljs-regexp">/run/u</span>ser/<span class="hljs-number">0</span><br>overlay                           <span class="hljs-number">770</span>G   <span class="hljs-number">12</span>G  <span class="hljs-number">759</span>G    <span class="hljs-number">2</span>% <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/docker/</span>overlay2<span class="hljs-regexp">/5350a4d719574d0eb7a5fb79e75aa930b34314feb2e119380e72cc8d2fbbf315/m</span>erged<br><br></code></pre></td></tr></table></figure></li><li><p>å°†å‰©ä½™çš„ç©ºé—´é‡æ–°åˆ†é…ç»™ <code>/home</code></p></li><li><p>åˆ›å»ºæŒ‚è½½ç‚¹å’Œå·å®—</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@bogon</span> ~]<span class="hljs-meta"># lvcreate -l 100%FREE -n home almalinux_bogon</span><br>  Logical volume <span class="hljs-string">&quot;home&quot;</span> created.<br>[root<span class="hljs-symbol">@bogon</span> ~]<span class="hljs-meta"># mkfs.xfs /dev/mapper/almalinux_bogon-home</span><br></code></pre></td></tr></table></figure></li><li><p>æ ¡éªŒæŒ‚è½½ç‚¹ </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@bogon ~]# mkfs.xfs /dev/mapper/almalinux_bogon-home<br><span class="hljs-attribute">meta-data</span>=/dev/mapper/almalinux_bogon-home <span class="hljs-attribute">isize</span>=512    <span class="hljs-attribute">agcount</span>=4, <span class="hljs-attribute">agsize</span>=10009856 blks<br>         =                       <span class="hljs-attribute">sectsz</span>=4096  <span class="hljs-attribute">attr</span>=2, <span class="hljs-attribute">projid32bit</span>=1<br>         =                       <span class="hljs-attribute">crc</span>=1        <span class="hljs-attribute">finobt</span>=1, <span class="hljs-attribute">sparse</span>=1, <span class="hljs-attribute">rmapbt</span>=0<br>         =                       <span class="hljs-attribute">reflink</span>=1    <span class="hljs-attribute">bigtime</span>=1 <span class="hljs-attribute">inobtcount</span>=1 <span class="hljs-attribute">nrext64</span>=0<br>data     =                       <span class="hljs-attribute">bsize</span>=4096   <span class="hljs-attribute">blocks</span>=40039424, <span class="hljs-attribute">imaxpct</span>=25<br>         =                       <span class="hljs-attribute">sunit</span>=0      <span class="hljs-attribute">swidth</span>=0 blks<br>naming   =version 2              <span class="hljs-attribute">bsize</span>=4096   <span class="hljs-attribute">ascii-ci</span>=0, <span class="hljs-attribute">ftype</span>=1<br>log      =internal log           <span class="hljs-attribute">bsize</span>=4096   <span class="hljs-attribute">blocks</span>=19550, <span class="hljs-attribute">version</span>=2<br>         =                       <span class="hljs-attribute">sectsz</span>=4096  <span class="hljs-attribute">sunit</span>=1 blks, <span class="hljs-attribute">lazy-count</span>=1<br>realtime =none                   <span class="hljs-attribute">extsz</span>=4096   <span class="hljs-attribute">blocks</span>=0, <span class="hljs-attribute">rtextents</span>=0<br></code></pre></td></tr></table></figure></li><li><p>æŒ‚è½½ <code>/home</code></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@bogon ~]# mount <span class="hljs-regexp">/dev/m</span>apper<span class="hljs-regexp">/almalinux_bogon-home /</span>home<br></code></pre></td></tr></table></figure></li><li><p>ç»“æœ</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@bogon ~]# df -h<br>æ–‡ä»¶ç³»ç»Ÿ                          å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹<br>devtmpfs                          <span class="hljs-number">4.0</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">4.0</span>M    <span class="hljs-number">0</span>% /dev<br>tmpfs                             <span class="hljs-number">3.7</span>G     <span class="hljs-number">0</span>  <span class="hljs-number">3.7</span>G    <span class="hljs-number">0</span>% /dev/shm<br>tmpfs                             <span class="hljs-number">1.5</span>G  <span class="hljs-number">9.8</span>M  <span class="hljs-number">1.5</span>G    <span class="hljs-number">1</span>% /run<br>/dev/mapper/almalinux_bogon-root  <span class="hljs-number">770</span>G   <span class="hljs-number">12</span>G  <span class="hljs-number">759</span>G    <span class="hljs-number">2</span>% /<br>/dev/sda1                        <span class="hljs-number">1014</span>M  <span class="hljs-number">418</span>M  <span class="hljs-number">597</span>M   <span class="hljs-number">42</span>% /boot<br>tmpfs                             <span class="hljs-number">756</span>M   <span class="hljs-number">92</span>K  <span class="hljs-number">756</span>M    <span class="hljs-number">1</span>% /run/<span class="hljs-keyword">user</span>/<span class="hljs-number">0</span><br>overlay                           <span class="hljs-number">770</span>G   <span class="hljs-number">12</span>G  <span class="hljs-number">759</span>G    <span class="hljs-number">2</span>% /var/lib/docker/overlay2/<span class="hljs-number">5350</span>a4d719574d0eb7a5fb79e75aa930b34314feb2e119380e72cc8d2fbbf315/merged<br>/dev/mapper/almalinux_bogon-home  <span class="hljs-number">153</span>G  <span class="hljs-number">1.1</span>G  <span class="hljs-number">152</span>G    <span class="hljs-number">1</span>% /home<br><br>[root@bogon ~]# lvdisplay<br>  <span class="hljs-comment">--- Logical volume ---</span><br>  LV <span class="hljs-type">Path</span>                /dev/almalinux_bogon/swap<br>  LV <span class="hljs-type">Name</span>                swap<br>  VG <span class="hljs-type">Name</span>                almalinux_bogon<br>  LV <span class="hljs-type">UUID</span>                k3WZ81-oxNS-KJ9J-UVLx-sUX8-bqDd<span class="hljs-number">-0</span>iPinl<br>  LV <span class="hljs-keyword">Write</span> <span class="hljs-keyword">Access</span>        <span class="hljs-keyword">read</span>/<span class="hljs-keyword">write</span><br>  LV Creation host, <span class="hljs-type">time</span> bogon, <span class="hljs-number">2023</span><span class="hljs-number">-12</span><span class="hljs-number">-22</span> <span class="hljs-number">14</span>:<span class="hljs-number">20</span>:<span class="hljs-number">48</span> +<span class="hljs-number">0800</span><br>  LV Status              available<br>  # <span class="hljs-keyword">open</span>                 <span class="hljs-number">2</span><br>  LV Size                &lt;<span class="hljs-number">7.77</span> GiB<br>  <span class="hljs-keyword">Current</span> LE             <span class="hljs-number">1989</span><br>  Segments               <span class="hljs-number">1</span><br>  Allocation             <span class="hljs-keyword">inherit</span><br>  <span class="hljs-keyword">Read</span> ahead sectors     auto<br>  - currently <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span>     <span class="hljs-number">256</span><br>  Block device           <span class="hljs-number">253</span>:<span class="hljs-number">1</span><br><br>  <span class="hljs-comment">--- Logical volume ---</span><br>  LV <span class="hljs-type">Path</span>                /dev/almalinux_bogon/root<br>  LV <span class="hljs-type">Name</span>                root<br>  VG <span class="hljs-type">Name</span>                almalinux_bogon<br>  LV <span class="hljs-type">UUID</span>                nKyL47-CJnM-Pu2Z-WQqH-ylve-QZuc-FiJnUz<br>  LV <span class="hljs-keyword">Write</span> <span class="hljs-keyword">Access</span>        <span class="hljs-keyword">read</span>/<span class="hljs-keyword">write</span><br>  LV Creation host, <span class="hljs-type">time</span> bogon, <span class="hljs-number">2023</span><span class="hljs-number">-12</span><span class="hljs-number">-22</span> <span class="hljs-number">14</span>:<span class="hljs-number">20</span>:<span class="hljs-number">52</span> +<span class="hljs-number">0800</span><br>  LV Status              available<br>  # <span class="hljs-keyword">open</span>                 <span class="hljs-number">1</span><br>  LV Size                <span class="hljs-number">770.00</span> GiB<br>  <span class="hljs-keyword">Current</span> LE             <span class="hljs-number">197120</span><br>  Segments               <span class="hljs-number">2</span><br>  Allocation             <span class="hljs-keyword">inherit</span><br>  <span class="hljs-keyword">Read</span> ahead sectors     auto<br>  - currently <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span>     <span class="hljs-number">256</span><br>  Block device           <span class="hljs-number">253</span>:<span class="hljs-number">0</span><br><br>  <span class="hljs-comment">--- Logical volume ---</span><br>  LV <span class="hljs-type">Path</span>                /dev/almalinux_bogon/home<br>  LV <span class="hljs-type">Name</span>                home<br>  VG <span class="hljs-type">Name</span>                almalinux_bogon<br>  LV <span class="hljs-type">UUID</span>                UkzIC6<span class="hljs-number">-6</span>Qkc<span class="hljs-number">-0</span>cr0-ULDk-swJI-AlhI-Nt0sVj<br>  LV <span class="hljs-keyword">Write</span> <span class="hljs-keyword">Access</span>        <span class="hljs-keyword">read</span>/<span class="hljs-keyword">write</span><br>  LV Creation host, <span class="hljs-type">time</span> bogon, <span class="hljs-number">2023</span><span class="hljs-number">-12</span><span class="hljs-number">-22</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>:<span class="hljs-number">01</span> +<span class="hljs-number">0800</span><br>  LV Status              available<br>  # <span class="hljs-keyword">open</span>                 <span class="hljs-number">1</span><br>  LV Size                &lt;<span class="hljs-number">152.74</span> GiB<br>  <span class="hljs-keyword">Current</span> LE             <span class="hljs-number">39101</span><br>  Segments               <span class="hljs-number">1</span><br>  Allocation             <span class="hljs-keyword">inherit</span><br>  <span class="hljs-keyword">Read</span> ahead sectors     auto<br>  - currently <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span>     <span class="hljs-number">256</span><br>  Block device           <span class="hljs-number">253</span>:<span class="hljs-number">2</span><br><br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>XFSæ ¼å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Dockerfile å‘½ä»¤</title>
    <link href="/blog/5ee55859.html"/>
    <url>/blog/5ee55859.html</url>
    
    <content type="html"><![CDATA[<h2 id="Dockerfile-å‘½ä»¤"><a href="#Dockerfile-å‘½ä»¤" class="headerlink" title="Dockerfile å‘½ä»¤"></a>Dockerfile å‘½ä»¤</h2><h3 id="1-FROM-å‘½ä»¤"><a href="#1-FROM-å‘½ä»¤" class="headerlink" title="1. FROM å‘½ä»¤"></a>1. FROM å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šæŒ‡å®šåŸºç¡€é•œåƒã€‚</li><li>ç¤ºä¾‹ï¼š<code>FROM ubuntu:20.04</code></li></ul><h3 id="2-MAINTAINER-å‘½ä»¤"><a href="#2-MAINTAINER-å‘½ä»¤" class="headerlink" title="2. MAINTAINER å‘½ä»¤"></a>2. MAINTAINER å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šæŒ‡å®šé•œåƒä½œè€…çš„ä¿¡æ¯ï¼ˆå·²è¿‡æ—¶ï¼Œå»ºè®®ä½¿ç”¨ LABELï¼‰ã€‚</li><li>ç¤ºä¾‹ï¼š<code>MAINTAINER yourname@example.com</code></li></ul><h3 id="3-LABEL-å‘½ä»¤"><a href="#3-LABEL-å‘½ä»¤" class="headerlink" title="3. LABEL å‘½ä»¤"></a>3. LABEL å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šä¸ºé•œåƒæ·»åŠ å…ƒæ•°æ®ã€‚</li><li>ç¤ºä¾‹ï¼š<code>LABEL maintainer=&quot;yourname@example.com&quot;</code></li></ul><h3 id="4-RUN-å‘½ä»¤"><a href="#4-RUN-å‘½ä»¤" class="headerlink" title="4. RUN å‘½ä»¤"></a>4. RUN å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šåœ¨é•œåƒå†…éƒ¨æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶ç”Ÿæˆæ–°çš„é•œåƒå±‚ã€‚</li><li>ç¤ºä¾‹ï¼š<code>RUN apt-get update &amp;&amp; apt-get install -y nginx</code></li></ul><h3 id="5-CMD-å‘½ä»¤"><a href="#5-CMD-å‘½ä»¤" class="headerlink" title="5. CMD å‘½ä»¤"></a>5. CMD å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šæŒ‡å®šå®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚</li><li>ç¤ºä¾‹ï¼š<code>CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</code></li></ul><p>  <strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li><code>CMD</code> å‘½ä»¤å®šä¹‰çš„å‘½ä»¤åœ¨å®¹å™¨å¯åŠ¨æ—¶ä¼šè¢«æ‰§è¡Œï¼Œä½†å¯ä»¥è¢«ä¼ é€’ç»™ <code>docker run</code> å‘½ä»¤çš„å‚æ•°è¦†ç›–ã€‚</li><li>Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ª <code>CMD</code> å‘½ä»¤ï¼Œå¤šä¸ªå‘½ä»¤åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆã€‚</li></ul><h3 id="6-ENTRYPOINT-å‘½ä»¤"><a href="#6-ENTRYPOINT-å‘½ä»¤" class="headerlink" title="6. ENTRYPOINT å‘½ä»¤"></a>6. ENTRYPOINT å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šè®¾ç½®å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œä¸ä¼šè¢«å®¹å™¨å¯åŠ¨å‘½ä»¤è¦†ç›–ã€‚</li><li>ç¤ºä¾‹ï¼š<code>ENTRYPOINT [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</code></li></ul><p>  <strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li><code>ENTRYPOINT</code> å‘½ä»¤å®šä¹‰çš„å‘½ä»¤åœ¨å®¹å™¨å¯åŠ¨æ—¶å§‹ç»ˆä¼šè¢«æ‰§è¡Œï¼Œä¸ä¼šè¢« <code>docker run</code> å‘½ä»¤çš„å‚æ•°è¦†ç›–ã€‚</li><li>å¦‚æœéœ€è¦è¦†ç›– <code>ENTRYPOINT</code> å®šä¹‰çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker run</code> å‘½ä»¤çš„ <code>--entrypoint</code> å‚æ•°ã€‚</li></ul><p>  <strong>ä¸åŒä¹‹å¤„ï¼š</strong></p><ul><li><code>CMD</code> å‘½ä»¤çš„å‚æ•°ä¼šè¢«ä¼ é€’ç»™ <code>ENTRYPOINT</code> å®šä¹‰çš„å‘½ä»¤ï¼Œå³ <code>CMD</code> ä¸­çš„å†…å®¹å¯ä»¥çœ‹ä½œæ˜¯é»˜è®¤çš„å‚æ•°ã€‚</li></ul><h3 id="7-ADD-å‘½ä»¤"><a href="#7-ADD-å‘½ä»¤" class="headerlink" title="7. ADD å‘½ä»¤"></a>7. ADD å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šå°†æ–‡ä»¶ã€ç›®å½•æˆ–è¿œç¨‹æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¸­ã€‚</li><li>ç¤ºä¾‹ï¼š<code>ADD app.tar.gz /myapp/</code></li></ul><h3 id="8-COPY-å‘½ä»¤"><a href="#8-COPY-å‘½ä»¤" class="headerlink" title="8. COPY å‘½ä»¤"></a>8. COPY å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šå°†æ–‡ä»¶æˆ–ç›®å½•å¤åˆ¶åˆ°é•œåƒä¸­ã€‚</li><li>ç¤ºä¾‹ï¼š<code>COPY app-files /myapp/</code></li></ul><p>  <strong>åŒºåˆ«ï¼š</strong> </p><ul><li><code>ADD</code> å‘½ä»¤æ”¯æŒè‡ªåŠ¨è§£å‹ç¼©å’Œ URL ä¸‹è½½ï¼Œ<code>COPY</code> å‘½ä»¤ä¸æ”¯æŒã€‚</li></ul><h3 id="9-ENV-å‘½ä»¤"><a href="#9-ENV-å‘½ä»¤" class="headerlink" title="9. ENV å‘½ä»¤"></a>9. ENV å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ã€‚</li><li>ç¤ºä¾‹ï¼š<code>ENV MY_VAR=myvalue</code></li></ul><h3 id="10-ARG-å‘½ä»¤"><a href="#10-ARG-å‘½ä»¤" class="headerlink" title="10. ARG å‘½ä»¤"></a>10. ARG å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šå®šä¹‰æ„å»ºæ—¶çš„å˜é‡ã€‚</li><li>ç¤ºä¾‹ï¼š<code>ARG build_version=1.0</code></li></ul><p>  <strong>åŒºåˆ«ï¼š</strong></p><ul><li><code>ENV</code> å‘½ä»¤ç”¨äºè®¾ç½®å®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒå˜é‡ï¼Œ<code>ARG</code> å‘½ä»¤ç”¨äºæ„å»ºè¿‡ç¨‹ä¸­ä¼ é€’å‚æ•°ã€‚</li></ul><h3 id="11-EXPOSE-å‘½ä»¤"><a href="#11-EXPOSE-å‘½ä»¤" class="headerlink" title="11. EXPOSE å‘½ä»¤"></a>11. EXPOSE å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šå£°æ˜å®¹å™¨å°†ç›‘å¬çš„ç«¯å£ã€‚</li><li>ç¤ºä¾‹ï¼š<code>EXPOSE 80 443</code></li></ul><h3 id="12-VOLUME-å‘½ä»¤"><a href="#12-VOLUME-å‘½ä»¤" class="headerlink" title="12. VOLUME å‘½ä»¤"></a>12. VOLUME å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šå£°æ˜å®¹å™¨æŒ‚è½½ç‚¹ã€‚</li><li>ç¤ºä¾‹ï¼š<code>VOLUME /data</code></li></ul><h3 id="13-USER-å‘½ä»¤"><a href="#13-USER-å‘½ä»¤" class="headerlink" title="13. USER å‘½ä»¤"></a>13. USER å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šæŒ‡å®šå®¹å™¨ä¸­è¿›ç¨‹çš„ç”¨æˆ·ã€‚</li><li>ç¤ºä¾‹ï¼š<code>USER appuser</code></li></ul><h3 id="14-WORKDIR-å‘½ä»¤"><a href="#14-WORKDIR-å‘½ä»¤" class="headerlink" title="14. WORKDIR å‘½ä»¤"></a>14. WORKDIR å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šè®¾ç½®å®¹å™¨ä¸­çš„å·¥ä½œç›®å½•ã€‚</li><li>ç¤ºä¾‹ï¼š<code>WORKDIR /app</code></li></ul><h3 id="15-ONBUILD-å‘½ä»¤"><a href="#15-ONBUILD-å‘½ä»¤" class="headerlink" title="15. ONBUILD å‘½ä»¤"></a>15. ONBUILD å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šå®šä¹‰è§¦å‘å™¨æŒ‡ä»¤ï¼Œä¼šåœ¨å­é•œåƒæ„å»ºæ—¶æ‰§è¡Œã€‚</li><li>ç¤ºä¾‹ï¼š<code>ONBUILD ADD . /app/src</code></li></ul><h3 id="16-STOPSIGNAL-å‘½ä»¤"><a href="#16-STOPSIGNAL-å‘½ä»¤" class="headerlink" title="16. STOPSIGNAL å‘½ä»¤"></a>16. STOPSIGNAL å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šè®¾ç½®å®¹å™¨åœæ­¢æ—¶å‘é€çš„ä¿¡å·ã€‚</li><li>ç¤ºä¾‹ï¼š<code>STOPSIGNAL SIGQUIT</code></li></ul><h3 id="17-HEALTHCHECK-å‘½ä»¤"><a href="#17-HEALTHCHECK-å‘½ä»¤" class="headerlink" title="17. HEALTHCHECK å‘½ä»¤"></a>17. HEALTHCHECK å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šå®šä¹‰å®¹å™¨çš„å¥åº·æ£€æŸ¥å‘½ä»¤ã€‚</li><li>ç¤ºä¾‹ï¼š<code>HEALTHCHECK --interval=30s --timeout=3s CMD curl -f http://localhost/ || exit 1</code></li></ul><h3 id="18-SHELL-å‘½ä»¤"><a href="#18-SHELL-å‘½ä»¤" class="headerlink" title="18. SHELL å‘½ä»¤"></a>18. SHELL å‘½ä»¤</h3><ul><li>ä½œç”¨ï¼šè®¾ç½®é»˜è®¤çš„ shellã€‚</li><li>ç¤ºä¾‹ï¼š<code>SHELL [&quot;/bin/bash&quot;, &quot;-c&quot;]</code></li></ul><h2 id="Spring-Boot-æ•´åˆ-Docker-ç¤ºä¾‹"><a href="#Spring-Boot-æ•´åˆ-Docker-ç¤ºä¾‹" class="headerlink" title="Spring Boot æ•´åˆ Docker ç¤ºä¾‹"></a>Spring Boot æ•´åˆ Docker ç¤ºä¾‹</h2><h4 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h4><ol><li><p><strong>åˆ›å»º Spring Boot é¡¹ç›®ï¼š</strong><br>åˆ›å»ºä¸€ä¸ªç®€å•çš„ Spring Boot é¡¹ç›®ï¼Œä¾‹å¦‚ä¸€ä¸ªåŸºæœ¬çš„ REST API åº”ç”¨ã€‚</p></li><li><p><strong>ç¼–å†™ Dockerfileï¼š</strong><br>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>Dockerfile</code> çš„æ–‡ä»¶ï¼Œå¹¶æ ¹æ®ä½ çš„é¡¹ç›®é…ç½®ç¼–å†™ Dockerfileã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-comment"># ä½¿ç”¨ä¸€ä¸ªåŸºç¡€çš„ Java é•œåƒ</span><br><span class="hljs-keyword">FROM</span> adoptopenjdk/openjdk11:alpine-jre<br><br><span class="hljs-comment"># è®¾ç½®å·¥ä½œç›®å½•</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /app</span><br><br><span class="hljs-comment"># å¤åˆ¶ JAR æ–‡ä»¶åˆ°å®¹å™¨ä¸­</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> target/your-app.jar app.jar</span><br><br><span class="hljs-comment"># æš´éœ² Spring Boot åº”ç”¨ç›‘å¬çš„ç«¯å£</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">8080</span><br><br><span class="hljs-comment"># å¯åŠ¨ Spring Boot åº”ç”¨</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;-jar&quot;</span>, <span class="hljs-string">&quot;app.jar&quot;</span>]</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ„å»º Docker é•œåƒï¼š</strong><br>æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ„å»º Docker é•œåƒï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker build -t your-app-name .<br></code></pre></td></tr></table></figure></li><li><p><strong>è¿è¡Œ Docker å®¹å™¨ï¼š</strong><br>æ„å»ºæˆåŠŸåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œ Docker å®¹å™¨ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -p 8080:8080 your-app-name<br></code></pre></td></tr></table></figure></li><li><p><strong>è®¿é—®åº”ç”¨ï¼š</strong><br>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>http://localhost:8080</code>ï¼Œåº”è¯¥èƒ½å¤Ÿçœ‹åˆ° Spring Boot åº”ç”¨çš„å“åº”ã€‚</p></li></ol><p>è¯·æ ¹æ®ä½ çš„å®é™…é¡¹ç›®éœ€æ±‚è¿›è¡Œç›¸åº”çš„é…ç½®å’Œä¼˜åŒ–ã€‚</p><p>è®°å¾—æ›¿æ¢ä¸Šè¿°ç¤ºä¾‹ä¸­çš„ <code>your-app-name</code> å’Œ <code>your-app.jar</code> ä¸ºä½ çš„å®é™…åº”ç”¨åç§°å’Œ JAR æ–‡ä»¶åã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯èƒ½è¿˜éœ€è¦è€ƒè™‘æ•°æ®åº“ã€æ—¥å¿—ç­‰æ›´å¤æ‚çš„æƒ…å†µã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ChatGPT</category>
      
      <category>Docker</category>
      
      <category>DockerFile</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
      <tag>DockerFile</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Springæºç ï¼š StartupStepã€ApplicationStartup æ¥å£</title>
    <link href="/blog/2fd1f403.html"/>
    <url>/blog/2fd1f403.html</url>
    
    <content type="html"><![CDATA[<h1 id="Springæºç ï¼š-StartupStepã€ApplicationStartup-æ¥å£è§£æ"><a href="#Springæºç ï¼š-StartupStepã€ApplicationStartup-æ¥å£è§£æ" class="headerlink" title="Springæºç ï¼š StartupStepã€ApplicationStartup æ¥å£è§£æ"></a>Springæºç ï¼š StartupStepã€ApplicationStartup æ¥å£è§£æ</h1><h2 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h2><blockquote><p>çº¢è‰²çº¿ä¸ºå†…éƒ¨ç±»å…³ç³»ï¼Œå¸¦æœ‰<code>ãŠ‰</code>ä¸€æ–¹ï¼Œæ˜¯å¦ä¸€æ–¹çš„å†…éƒ¨ç±»ã€‚</p></blockquote><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/java/spring/startupStepApplicationStartup/StartupStep.png" alt="StartupStep-ApplicationStartup-Contain-InnerClass"></p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/java/spring/startupStepApplicationStartup/Event.png" alt="ä¾èµ–å…³ç³»"></p><ul><li><p>public interface <strong>StartupStep</strong></p><ul><li><p><em>default</em> interface <strong>Tags</strong> extends <strong>Iterable</strong><Tag></p></li><li><p><em>default</em> interface <strong>Tag</strong></p></li></ul></li><li><p><em>default</em> class <strong>FlightRecorderStartupStep</strong> implements <strong>StartupStep</strong>  </p></li><li><p>å†…å«æœ‰ï¼š<strong>class FlightRecorderStartupEvent extends Event</strong> ç±»çš„å˜é‡ <code>event</code>ã€‚</p><ul><li><em>default</em> static class <strong>FlightRecorderTag</strong> implements <strong>Tag</strong> </li><li><em>default</em> static class <strong>FlightRecorderTags</strong> implements <strong>Tags</strong><ul><li>private class <strong>TagsIterator</strong> implements <strong>Iterator</strong><Tag></li></ul></li></ul></li><li><p>public interface <strong>ApplicationStartup</strong></p><ul><li>default class <strong>DefaultApplicationStartup</strong> implements <strong>ApplicationStartup</strong> <ul><li><em>default</em> static class <strong>DefaultStartupStep</strong> implements <em><strong>StartupStep</strong></em> <ul><li><em>default</em> static class <strong>DefaultTags</strong> implements <em><strong>StartupStep.Tags</strong></em></li></ul></li></ul></li><li>public class <strong>FlightRecorderApplicationStartup</strong> implements <strong>ApplicationStartup</strong></li></ul></li></ul><blockquote><p>ä¸¤æ¥å£ã€ä¸‰ä¸ªå®ç°ç±»ï¼Œ</p><p>StartupStep</p><p>â€‹FlightRecorderStartupStep </p><p>ApplicationStartup</p><p>â€‹<strong>DefaultApplicationStartup</strong> </p><p>â€‹FlightRecorderApplicationStartup </p></blockquote><h2 id="StartupStepæ¥å£"><a href="#StartupStepæ¥å£" class="headerlink" title="StartupStepæ¥å£"></a>StartupStepæ¥å£</h2><blockquote><p>æ­¥éª¤è®°å½•æœ‰å…³ApplicationStartupæœŸé—´å‘ç”Ÿçš„ç‰¹å®šé˜¶æ®µæˆ–æ“ä½œçš„æŒ‡æ ‡ã€‚</p><p>StartupStep çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š</p><ol><li><p>è¯¥æ­¥éª¤æ˜¯é€šè¿‡è°ƒç”¨<strong>the application startup</strong>å¯åŠ¨åˆ›å»ºå’Œå¯åŠ¨çš„ï¼Œå¹¶è¢«åˆ†é…äº†ä¸€ä¸ªå”¯ä¸€çš„id ã€‚</p></li><li><p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨å¤„ç†è¿‡ç¨‹ä¸­ä½¿ç”¨<strong>StartupStep.Tags</strong>é™„åŠ ä¿¡æ¯</p></li><li><p>ç„¶åæˆ‘ä»¬éœ€è¦æ ‡è®°æ­¥éª¤çš„**<code>end()</code>**</p></li></ol><p>å®ç°å¯ä»¥è·Ÿè¸ªâ€œæ‰§è¡Œæ—¶é—´â€æˆ–å…¶ä»–æ­¥éª¤æŒ‡æ ‡ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StartupStep</span> &#123;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Return the name of the startup step.</span><br><span class="hljs-comment"> * &lt;p&gt;A step name describes the current action or phase. This technical</span><br><span class="hljs-comment"> * name should be &quot;.&quot; namespaced and can be reused to describe other instances of</span><br><span class="hljs-comment"> * similar steps during application startup.</span><br><span class="hljs-comment"> */</span><br>String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Return the unique id for this step within the application startup.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-type">long</span> <span class="hljs-title function_">getId</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Return, if available, the id of the parent step.</span><br><span class="hljs-comment"> * &lt;p&gt;The parent step is the step that was started the most recently</span><br><span class="hljs-comment"> * when the current step was created.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Nullable</span><br>Long <span class="hljs-title function_">getParentId</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Add a &#123;<span class="hljs-doctag">@link</span> Tag&#125; to the step.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> key tag key</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> value tag value</span><br><span class="hljs-comment"> */</span><br>StartupStep <span class="hljs-title function_">tag</span><span class="hljs-params">(String key, String value)</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Add a &#123;<span class="hljs-doctag">@link</span> Tag&#125; to the step.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> key tag key</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> value &#123;<span class="hljs-doctag">@link</span> Supplier&#125; for the tag value</span><br><span class="hljs-comment"> */</span><br>StartupStep <span class="hljs-title function_">tag</span><span class="hljs-params">(String key, Supplier&lt;String&gt; value)</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Return the &#123;<span class="hljs-doctag">@link</span> Tag&#125; collection for this step.</span><br><span class="hljs-comment"> */</span><br>Tags <span class="hljs-title function_">getTags</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Record the state of the step and possibly other metrics like execution time.</span><br><span class="hljs-comment"> * &lt;p&gt;Once ended, changes on the step state are not allowed.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">end</span><span class="hljs-params">()</span>;<br><br><br>  #  å¯¹ Tag çš„è¿­ä»£ã€‚<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Immutable collection of &#123;<span class="hljs-doctag">@link</span> Tag&#125;.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Tags</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Iterable</span>&lt;Tag&gt; &#123;<br>&#125;<br><br><br>  # å°† FlightRecorderTag ç±»çš„getæ–¹æ³•ä½¿ç”¨æ¥å£æš´éœ²å‡ºæ¥ã€‚æ–¹ä¾¿é¢å‘æ¥å£è¿­ä»£ã€‚<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Simple key/value association for storing step metadata.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Tag</span> &#123;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Return the &#123;<span class="hljs-doctag">@code</span> Tag&#125; name.</span><br><span class="hljs-comment"> */</span><br>String <span class="hljs-title function_">getKey</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Return the &#123;<span class="hljs-doctag">@code</span> Tag&#125; value.</span><br><span class="hljs-comment"> */</span><br>String <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span>;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å°†è®°å½•é€šè¿‡ FlightRecorderStartupEvent  æ‰©å±•ä¸ºäº‹ä»¶ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Enabled(true)</span><br><span class="hljs-meta">@StackTrace(true)</span><br><span class="hljs-meta">@Registered(true)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Event</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">jdk</span>.internal.event.Event &#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-title function_">Event</span><span class="hljs-params">()</span> &#123;&#125;<br>  <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">begin</span><span class="hljs-params">()</span> &#123; &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">end</span><span class="hljs-params">()</span> &#123;&#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">commit</span><span class="hljs-params">()</span> &#123;&#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEnabled</span><span class="hljs-params">()</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">shouldCommit</span><span class="hljs-params">()</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; &#125;<br>  <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(<span class="hljs-type">int</span> index, Object value)</span> &#123; &#125;<br>&#125;<br><br><br><span class="hljs-meta">@Category(&quot;Spring Application&quot;)</span><br><span class="hljs-meta">@Label(&quot;Startup Step&quot;)</span><br><span class="hljs-meta">@Description(&quot;Spring Application Startup&quot;)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FlightRecorderStartupEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Event</span> &#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> eventId;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> parentId;<br><br><span class="hljs-meta">@Label(&quot;Name&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> String name;<br><br><span class="hljs-meta">@Label(&quot;Tags&quot;)</span><br><span class="hljs-type">String</span> <span class="hljs-variable">tags</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">FlightRecorderStartupEvent</span><span class="hljs-params">(<span class="hljs-type">long</span> eventId, String name, <span class="hljs-type">long</span> parentId)</span> &#123;<br><span class="hljs-built_in">this</span>.name = name;<br><span class="hljs-built_in">this</span>.eventId = eventId;<br><span class="hljs-built_in">this</span>.parentId = parentId;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTags</span><span class="hljs-params">(String tags)</span> &#123;<br><span class="hljs-built_in">this</span>.tags = tags;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FlightRecorderStartupStep</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">StartupStep</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> FlightRecorderStartupEvent event;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">FlightRecorderTags</span> <span class="hljs-variable">tags</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlightRecorderTags</span>();<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Consumer&lt;FlightRecorderStartupStep&gt; recordingCallback;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">FlightRecorderStartupStep</span><span class="hljs-params">(</span><br><span class="hljs-params">    <span class="hljs-type">long</span> id, String name, <span class="hljs-type">long</span> parentId,</span><br><span class="hljs-params">Consumer&lt;FlightRecorderStartupStep&gt; recordingCallback)</span> &#123;<br><br><span class="hljs-built_in">this</span>.event = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlightRecorderStartupEvent</span>(id, name, parentId);<br><span class="hljs-built_in">this</span>.event.begin();<br><span class="hljs-built_in">this</span>.recordingCallback = recordingCallback;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.event.name;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.event.eventId;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getParentId</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.event.parentId;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> StartupStep <span class="hljs-title function_">tag</span><span class="hljs-params">(String key, String value)</span> &#123;<br><span class="hljs-built_in">this</span>.tags.add(key, value);<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> StartupStep <span class="hljs-title function_">tag</span><span class="hljs-params">(String key, Supplier&lt;String&gt; value)</span> &#123;<br><span class="hljs-built_in">this</span>.tags.add(key, value.get());<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Tags <span class="hljs-title function_">getTags</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.tags;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">end</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-built_in">this</span>.event.end();<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.event.shouldCommit()) &#123;<br><span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br><span class="hljs-built_in">this</span>.tags.forEach(tag -&gt;<br>builder.append(tag.getKey()).append(<span class="hljs-string">&#x27;=&#x27;</span>).append(tag.getValue()).append(<span class="hljs-string">&#x27;,&#x27;</span>)<br>);<br><span class="hljs-built_in">this</span>.event.setTags(builder.toString());<br>&#125;<br><span class="hljs-built_in">this</span>.event.commit();<br><span class="hljs-built_in">this</span>.recordingCallback.accept(<span class="hljs-built_in">this</span>);<br>&#125;<br><br><span class="hljs-keyword">protected</span> FlightRecorderStartupEvent <span class="hljs-title function_">getEvent</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.event;<br>&#125;<br><br><br>  <span class="hljs-comment">// å°è£… Tag ä¿¡æ¯</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlightRecorderTags</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Tags</span> &#123;<br><br><span class="hljs-keyword">private</span> Tag[] tags = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tag</span>[<span class="hljs-number">0</span>];<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(String key, String value)</span> &#123;<br>Tag[] newTags = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tag</span>[<span class="hljs-built_in">this</span>.tags.length + <span class="hljs-number">1</span>];<br>      <span class="hljs-comment">//æ•°ç»„æ‰©å®¹ã€‚</span><br>System.arraycopy(<span class="hljs-built_in">this</span>.tags, <span class="hljs-number">0</span>, newTags, <span class="hljs-number">0</span>, <span class="hljs-built_in">this</span>.tags.length);<br>      <span class="hljs-comment">// æ¯ä¸ªæ•°ç»„å­˜æ”¾æ˜¯ FlightRecorderTag å¯¹è±¡ã€‚</span><br>newTags[newTags.length - <span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlightRecorderTag</span>(key, value);<br><span class="hljs-built_in">this</span>.tags = newTags;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(String key, Supplier&lt;String&gt; value)</span> &#123;<br>add(key, value.get());<br>&#125;<br><br><span class="hljs-meta">@NonNull</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Iterator&lt;Tag&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// è‡ªèº«å†…éƒ¨ç±»</span><br><span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TagsIterator</span>();<br>&#125;<br>    <br>    <span class="hljs-comment">// è¿­ä»£åŠŸèƒ½</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TagsIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span>&lt;Tag&gt; &#123;<br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">idx</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.idx &lt; tags.length;<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Tag <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> tags[<span class="hljs-built_in">this</span>.idx++];<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>(<span class="hljs-string">&quot;tags are append only&quot;</span>);<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// å®ä½“ç±»ï¼Œkey-valueï¼Œæ•°æ®å­˜å‚¨ã€‚</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlightRecorderTag</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Tag</span> &#123;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String key;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String value;<br><span class="hljs-keyword">public</span> <span class="hljs-title function_">FlightRecorderTag</span><span class="hljs-params">(String key, String value)</span> &#123;<br><span class="hljs-built_in">this</span>.key = key;<br><span class="hljs-built_in">this</span>.value = value;<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getKey</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.key;<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.value;<br>&#125;<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="ApplicationStartup"><a href="#ApplicationStartup" class="headerlink" title="ApplicationStartup"></a>ApplicationStartup</h2><blockquote><p>ä½¿ç”¨stepsæ£€æµ‹åº”ç”¨ç¨‹åºå¯åŠ¨é˜¶æ®µã€‚<br>æ ¸å¿ƒå®¹å™¨åŠå…¶åŸºç¡€ç»“æ„ç»„ä»¶å¯ä»¥ä½¿ç”¨ApplicationStartupæ¥æ ‡è®°åº”ç”¨ç¨‹åºå¯åŠ¨æœŸé—´çš„æ­¥éª¤ï¼Œå¹¶æ”¶é›†æœ‰å…³æ‰§è¡Œä¸Šä¸‹æ–‡æˆ–å…¶å¤„ç†æ—¶é—´çš„æ•°æ®ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApplicationStartup</span> &#123;<br>  <br><span class="hljs-type">ApplicationStartup</span> <span class="hljs-variable">DEFAULT</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultApplicationStartup</span>();<br>  <br>StartupStep <span class="hljs-title function_">start</span><span class="hljs-params">(String name)</span>;<br>&#125;<br><br><br># å®ç°ç±»,<span class="hljs-keyword">default</span> ä½œç”¨åŸŸ ï¼Œä»…èƒ½é€šè¿‡ï¼ŒApplicationStartup.DEFAULT è·å–ã€‚<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultApplicationStartup</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationStartup</span> &#123;<br># DefaultStartupStep è‡ªèº«å†…éƒ¨ç±»<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">DefaultStartupStep</span> <span class="hljs-variable">DEFAULT_STARTUP_STEP</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultStartupStep</span>();<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> DefaultStartupStep <span class="hljs-title function_">start</span><span class="hljs-params">(String name)</span> &#123;<br><span class="hljs-keyword">return</span> DEFAULT_STARTUP_STEP;<br>&#125;<br><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultStartupStep</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">StartupStep</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">DefaultTags</span> <span class="hljs-variable">TAGS</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultTags</span>();<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;default&quot;</span>;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0L</span>;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getParentId</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Tags <span class="hljs-title function_">getTags</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.TAGS;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> StartupStep <span class="hljs-title function_">tag</span><span class="hljs-params">(String key, String value)</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> StartupStep <span class="hljs-title function_">tag</span><span class="hljs-params">(String key, Supplier&lt;String&gt; value)</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">end</span><span class="hljs-params">()</span> &#123;<br><br>&#125;<br>    <br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultTags</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">StartupStep</span>.Tags &#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Iterator&lt;StartupStep.Tag&gt; iterator() &#123;<br><span class="hljs-keyword">return</span> Collections.emptyIterator();<br>&#125;<br>&#125;<br>&#125;<br><br>&#125;<br><br><span class="hljs-comment">//  ----------------------------------------------------------------</span><br>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlightRecorderApplicationStartup</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationStartup</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">currentSequenceId</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>();<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Deque&lt;Long&gt; currentSteps;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">FlightRecorderApplicationStartup</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-built_in">this</span>.currentSteps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentLinkedDeque</span>&lt;&gt;();<br><span class="hljs-built_in">this</span>.currentSteps.offerFirst(<span class="hljs-built_in">this</span>.currentSequenceId.get());<br>&#125;<br><br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> StartupStep <span class="hljs-title function_">start</span><span class="hljs-params">(String name)</span> &#123;<br><span class="hljs-type">long</span> <span class="hljs-variable">sequenceId</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.currentSequenceId.incrementAndGet();<br><span class="hljs-built_in">this</span>.currentSteps.offerFirst(sequenceId);<br>    <span class="hljs-comment">// FlightRecorderStartupStep </span><br><span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlightRecorderStartupStep</span><br>      (sequenceId, name, <span class="hljs-built_in">this</span>.currentSteps.getFirst(), <br>committedStep -&gt; <span class="hljs-built_in">this</span>.currentSteps.removeFirstOccurrence(sequenceId));<br>&#125;<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><blockquote><p>ApplicationStartup å¯¹ StartupStep è¿›ä¸€æ­¥å°è£…ï¼Œä½¿ç”¨æ—¶é€šè¿‡ApplicationStartup è·å– StartupStep çš„å®ä¾‹ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-type">ApplicationStartup</span> <span class="hljs-variable">applicationStartup</span> <span class="hljs-operator">=</span> ApplicationStartup.DEFAULT;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">AnnotationConfigApplicationContext</span><span class="hljs-params">()</span> &#123;<br>   <span class="hljs-comment">//getApplicationStartup()è·å–çš„å€¼ï¼šApplicationStartup.DEFAULT </span><br><span class="hljs-type">StartupStep</span> <span class="hljs-variable">createAnnotatedBeanDefReader</span> <span class="hljs-operator">=</span>  <span class="hljs-built_in">this</span>.getApplicationStartup().start(<span class="hljs-string">&quot;spring.context.annotated-bean-reader.create&quot;</span>);<br><span class="hljs-built_in">this</span>.reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnnotatedBeanDefinitionReader</span>(<span class="hljs-built_in">this</span>);<br>createAnnotatedBeanDefReader.end();<br><span class="hljs-built_in">this</span>.scanner = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathBeanDefinitionScanner</span>(<span class="hljs-built_in">this</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Event-æœºåˆ¶"><a href="#Event-æœºåˆ¶" class="headerlink" title="Event æœºåˆ¶"></a>Event æœºåˆ¶</h3><blockquote><p>å¾…è¡¥å……ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>æºç </category>
      
      <category>Spring</category>
      
      <category>Spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>æºç </tag>
      
      <tag>StartupStep</tag>
      
      <tag>ApplicationStartup</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SPI ï¼ˆService Provider Interfaceï¼‰æœºåˆ¶</title>
    <link href="/blog/e2c17ed0.html"/>
    <url>/blog/e2c17ed0.html</url>
    
    <content type="html"><![CDATA[<h1 id="SPI-ï¼ˆService-Provider-Interfaceï¼‰æœºåˆ¶"><a href="#SPI-ï¼ˆService-Provider-Interfaceï¼‰æœºåˆ¶" class="headerlink" title="SPI ï¼ˆService Provider Interfaceï¼‰æœºåˆ¶"></a>SPI ï¼ˆService Provider Interfaceï¼‰æœºåˆ¶</h1><h2 id="ä»€ä¹ˆæ˜¯SPIæœºåˆ¶"><a href="#ä»€ä¹ˆæ˜¯SPIæœºåˆ¶" class="headerlink" title="ä»€ä¹ˆæ˜¯SPIæœºåˆ¶"></a>ä»€ä¹ˆæ˜¯SPIæœºåˆ¶</h2><blockquote><p>JDKå†…ç½®çš„ä¸€ç§ æœåŠ¡æä¾›å‘ç°æœºåˆ¶ï¼Œå¯ä»¥ç”¨æ¥å¯ç”¨æ¡†æ¶æ‰©å±•å’Œæ›¿æ¢ç»„ä»¶ã€‚</p><p>æš´éœ²ä¸€ä¸ªå…¬å…±æ¥å£ï¼Œå…±å¼€å‘äººå‘˜å®ç°ï¼ŒåŠ¨æ€åŠ è½½å®ç°ç±»ã€‚</p></blockquote><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs groovy"># dubbo spi ä¾èµ–åŒ… <br>implementation <span class="hljs-string">&#x27;org.apache.dubbo:dubbo-common:3.2.2&#x27;</span><br></code></pre></td></tr></table></figure><blockquote><p>æ¥å£</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> dekun.wang.spi.interfaces;<br><br><span class="hljs-keyword">import</span> org.apache.dubbo.common.extension.SPI;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> &lt;a href=&quot;mailto:wangdekunemail@gmail.com&quot;&gt;WangDeKun&lt;/a&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span></span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SPI</span> <span class="hljs-comment">//dubbo spi å¿…é¡»æ³¨è§£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Command</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> dekun.wang.spi.interfaces.dubbo;<br><br><span class="hljs-keyword">import</span> org.apache.dubbo.common.extension.SPI;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> &lt;a href=&quot;mailto:wangdekunemail@gmail.com&quot;&gt;WangDeKun&lt;/a&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span></span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SPI</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CommandDubbo</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>å®ç°ç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> dekun.wang.spi.interfaces.impl;<br><br><span class="hljs-keyword">import</span> dekun.wang.spi.interfaces.Command;<br><span class="hljs-keyword">import</span> org.apache.dubbo.common.extension.SPI;<br><br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> &lt;a href=&quot;mailto:wangdekunemail@gmail.com&quot;&gt;WangDeKun&lt;/a&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span></span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SPI(&quot;CommandEnv&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandEnv</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;==========================&quot;</span>);<br>        <span class="hljs-type">ProcessBuilder</span> <span class="hljs-variable">processBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProcessBuilder</span>();<br>        Map&lt;String, String&gt; environment = processBuilder.environment();<br>        System.out.println(<span class="hljs-string">&quot;Brew=&quot;</span> + environment.get(<span class="hljs-string">&quot;Brew&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;--------------------------&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> dekun.wang.spi.interfaces.impl;<br><br><span class="hljs-keyword">import</span> dekun.wang.spi.interfaces.Command;<br><span class="hljs-keyword">import</span> org.apache.dubbo.common.extension.SPI;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> &lt;a href=&quot;mailto:wangdekunemail@gmail.com&quot;&gt;WangDeKun&lt;/a&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span></span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SPI(&quot;CommandWhichGit&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandWhichGit</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;==========================&quot;</span>);<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Process</span> <span class="hljs-variable">pr</span> <span class="hljs-operator">=</span> Runtime.getRuntime().exec(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;/usr/bin/which&quot;</span>, <span class="hljs-string">&quot;git&quot;</span>&#125;);<br>            <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(pr.getInputStream()));<br>            String result;<br>            <span class="hljs-keyword">while</span> ((result = br.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>                System.out.println(result);<br>            &#125;<br>            br.close();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;--------------------------&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> dekun.wang.spi.interfaces.impl;<br><br><span class="hljs-keyword">import</span> dekun.wang.spi.interfaces.Command;<br><span class="hljs-keyword">import</span> org.apache.dubbo.common.extension.SPI;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> &lt;a href=&quot;mailto:wangdekunemail@gmail.com&quot;&gt;WangDeKun&lt;/a&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span></span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SPI(&quot;CommandWitchLs&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandWitchLs</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;==========================&quot;</span>);<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">ProcessBuilder</span> <span class="hljs-variable">processBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProcessBuilder</span>();<br>            processBuilder.command(<span class="hljs-string">&quot;which&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>);<br>            <span class="hljs-type">Process</span> <span class="hljs-variable">process</span> <span class="hljs-operator">=</span> processBuilder.start();<br>            <span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(process.getInputStream(), StandardCharsets.UTF_8));) &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>                <span class="hljs-keyword">while</span> ((line = bufferedReader.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>                    System.out.println(line);<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;--------------------------&quot;</span>);<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> dekun.wang.spi.interfaces.dubbo;<br><br><span class="hljs-keyword">import</span> org.apache.dubbo.common.extension.SPI;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> &lt;a href=&quot;mailto:wangdekunemail@gmail.com&quot;&gt;WangDeKun&lt;/a&gt;</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SPI(&quot;CommandDubboImpl&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandDubboImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandDubbo</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;============CommandDubboImpl================&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p> èµ„æºç›®å½•é…ç½®</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">tree -NL 4 resources</span><br>resources<br>â”œâ”€â”€ META-INF<br>â”‚Â Â  â”œâ”€â”€ dubbo<br>â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dekun.wang.spi.interfaces.Command # æ–‡ä»¶å<br>â”‚Â Â  â”‚Â Â  â””â”€â”€ internal<br>â”‚Â Â  â”‚Â Â      â””â”€â”€ dekun.wang.spi.interfaces.Command # æ–‡ä»¶å<br>â”‚Â Â  â”œâ”€â”€ services<br>â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dekun.wang.spi.interfaces.Command # æ–‡ä»¶å<br>â”‚Â Â  â”‚Â Â  â””â”€â”€ dekun.wang.spi.interfaces.dubbo.CommandDubbo # æ–‡ä»¶å<br>â”‚Â Â  â””â”€â”€ spring.factories<br>â””â”€â”€ application.properties<br></code></pre></td></tr></table></figure><h3 id="JDK-SPI"><a href="#JDK-SPI" class="headerlink" title="JDK SPI"></a>JDK SPI</h3><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><blockquote><p>resources é…ç½®</p><p>åˆ›å»º<code>META-INF/services</code> ç›®å½•ï¼Œæ–°å»ºä»¥æ¥å£å…¨è·¯å¾„å‘½åçš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…æ²¡è¡ŒåŠå®ç°ç±»å…¨è·¯å¾„ç±»ã€‚</p><p><code>META-INF/services/dekun.wang.spi.interfaces.Command</code></p></blockquote><blockquote><p>è¡Œæ’åºåŠè¿­ä»£é¡ºåº</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">dekun.wang.spi.interfaces.impl.CommandWhichGit</span><br><span class="hljs-attr">dekun.wang.spi.interfaces.impl.CommandEnv</span><br><span class="hljs-attr">dekun.wang.spi.interfaces.impl.CommandWitchLs</span><br></code></pre></td></tr></table></figure><h4 id="æµ‹è¯•ç±»"><a href="#æµ‹è¯•ç±»" class="headerlink" title="æµ‹è¯•ç±»"></a>æµ‹è¯•ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> dekun.wang.spi;<br><br><span class="hljs-keyword">import</span> dekun.wang.spi.interfaces.Command;<br><br><span class="hljs-keyword">import</span> java.util.ServiceLoader;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> &lt;a href=&quot;mailto:wangdekunemail@gmail.com&quot;&gt;WangDeKun&lt;/a&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span></span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestJdkSpi</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        ServiceLoader&lt;Command&gt; command = ServiceLoader.load(Command.class);<br>        <span class="hljs-keyword">for</span> (Command cmd : command) &#123;<br>            cmd.execute();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">==========================<br>/usr/local/bin/git<br>--------------------------<br>==========================<br>Brew=/usr/local/bin:/usr/local/sbin<br>--------------------------<br>==========================<br>/bin/ls<br>--------------------------<br></code></pre></td></tr></table></figure><h3 id="Spring-SPI"><a href="#Spring-SPI" class="headerlink" title="Spring SPI"></a>Spring SPI</h3><h4 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><blockquote><p>resources é…ç½®</p><p>ç›®å½•åˆ›å»º <code>META-INF</code>ç›®å½•ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶<code>spring.factories</code></p><p><code>META-INF/spring.factories</code></p></blockquote><blockquote><p><code>spring.factories</code>æ–‡ä»¶å†…å®¹æ ¼å¼ï¼ŒåŠ è½½é¡ºåºï¼ŒåŠè¿­ä»£é¡ºåºã€‚</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">dekun.wang.spi.interfaces.Command</span>=<span class="hljs-string">\</span><br><span class="hljs-string">dekun.wang.spi.interfaces.impl.CommandWhichGit,\</span><br><span class="hljs-string">dekun.wang.spi.interfaces.impl.CommandEnv,\</span><br><span class="hljs-string">dekun.wang.spi.interfaces.impl.CommandWitchLs</span><br></code></pre></td></tr></table></figure><h4 id="æµ‹è¯•ç±»-1"><a href="#æµ‹è¯•ç±»-1" class="headerlink" title="æµ‹è¯•ç±»"></a>æµ‹è¯•ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> dekun.wang.spi;<br><br><span class="hljs-keyword">import</span> dekun.wang.spi.interfaces.Command;<br><span class="hljs-keyword">import</span> org.springframework.core.io.support.SpringFactoriesLoader;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> &lt;a href=&quot;mailto:wangdekunemail@gmail.com&quot;&gt;WangDeKun&lt;/a&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span> &lt;p&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestSpringSpi</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">SpringFactoriesLoader</span> <span class="hljs-variable">springFactoriesLoader</span> <span class="hljs-operator">=</span> SpringFactoriesLoader.forDefaultResourceLocation(Command.class.getClassLoader());<br>        <span class="hljs-keyword">for</span> (Command command : springFactoriesLoader.load(Command.class)) &#123;<br>            command.execute();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">==========================<br>/usr/local/bin/git<br>--------------------------<br>==========================<br>Brew=/usr/local/bin:/usr/local/sbin<br>--------------------------<br>==========================<br>/bin/ls<br>--------------------------<br></code></pre></td></tr></table></figure><h3 id="Dubbo-SPI"><a href="#Dubbo-SPI" class="headerlink" title="Dubbo SPI"></a><a href="https://cn.dubbo.apache.org/zh-cn/docsv2.7/dev/source/dubbo-spi/">Dubbo SPI</a></h3><h4 id="é…ç½®-2"><a href="#é…ç½®-2" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><blockquote><p>æ–‡ä»¶åï¼šæ¥å£å…¨è·¯å¾„ï¼Œå†…å®¹ keyï¼ˆæ³¨è§£é…ç½®keyï¼‰&#x3D;å®ç°ç±»å…¨è·¯å¾„</p></blockquote><blockquote><p><code>META-INF/dubbo/internal/dekun.wang.spi.interfaces.Command</code></p><p>å†…å®¹ï¼š<code>CommandWhichGit=dekun.wang.spi.interfaces.impl.CommandWhichGit</code></p></blockquote><blockquote><p><code>META-INF/dubbo/dekun.wang.spi.interfaces.Command</code></p><p>å†…å®¹ï¼š</p><p> <code>CommandEnv=dekun.wang.spi.interfaces.impl.CommandEnv</code><br><code>CommandWitchLs=dekun.wang.spi.interfaces.impl.CommandWitchLs</code></p></blockquote><blockquote><p><code>META-INF/services/dekun.wang.spi.interfaces.dubbo.CommandDubbo</code></p><p>å†…å®¹ï¼š<code>CommandDubboImpl=dekun.wang.spi.interfaces.dubbo.CommandDubboImpl</code></p></blockquote><h4 id="æµ‹è¯•ç±»-2"><a href="#æµ‹è¯•ç±»-2" class="headerlink" title="æµ‹è¯•ç±»"></a>æµ‹è¯•ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> dekun.wang.spi;<br><br><span class="hljs-keyword">import</span> dekun.wang.spi.interfaces.Command;<br><span class="hljs-keyword">import</span> dekun.wang.spi.interfaces.dubbo.CommandDubbo;<br><span class="hljs-keyword">import</span> org.apache.dubbo.common.extension.ExtensionLoader;<br><span class="hljs-keyword">import</span> org.apache.dubbo.rpc.model.ApplicationModel;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> &lt;a href=&quot;mailto:wangdekunemail@gmail.com&quot;&gt;WangDeKun&lt;/a&gt;</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * æ‰«æä»¥ä¸‹è·¯å¾„</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * META-INF/dubbo/internal</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * META-INF/dubbo</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * META-INF/services</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span></span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDubboSpi</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        ExtensionLoader&lt;Command&gt; extensionLoader = ExtensionLoader.getExtensionLoader(Command.class);<br>        <span class="hljs-comment">//META-INF/dubbo/internal</span><br>        extensionLoader.getExtension(<span class="hljs-string">&quot;CommandWhichGit&quot;</span>).execute();<br>        <span class="hljs-comment">//META-INF/dubbo</span><br>        extensionLoader.getExtension(<span class="hljs-string">&quot;CommandEnv&quot;</span>).execute();<br>        <span class="hljs-comment">// META-INF/services</span><br>        ExtensionLoader.getExtensionLoader(CommandDubbo.class).getExtension(<span class="hljs-string">&quot;CommandDubboImpl&quot;</span>).execute();<br>        <span class="hljs-type">ApplicationModel</span> <span class="hljs-variable">applicationModel</span> <span class="hljs-operator">=</span> ApplicationModel.defaultModel();<br>        ExtensionLoader&lt;Command&gt; extensionLoader1 = applicationModel.getExtensionDirector().getExtensionLoader(Command.class);<br>        extensionLoader1.getExtension(<span class="hljs-string">&quot;CommandWitchLs&quot;</span>).execute();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">==========================<br>/usr/local/bin/git<br>--------------------------<br>==========================<br>Brew=/usr/local/bin:/usr/local/sbin<br>--------------------------<br>============CommandDubboImpl================<br>==========================<br>/bin/ls<br>--------------------------<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>JAVA</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SPI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OrbStack ä¸ Docker Desktop  é€ æˆ docker.sock å†²çªé—®é¢˜</title>
    <link href="/blog/a32b1858.html"/>
    <url>/blog/a32b1858.html</url>
    
    <content type="html"><![CDATA[<h1 id="OrbStack-ä¸-Docker-Desktop-é€ æˆ-docker-sock-å†²çªé—®é¢˜"><a href="#OrbStack-ä¸-Docker-Desktop-é€ æˆ-docker-sock-å†²çªé—®é¢˜" class="headerlink" title="OrbStack ä¸ Docker Desktop  é€ æˆ docker.sock å†²çªé—®é¢˜"></a><a href="https://orbstack.dev/">OrbStack</a> ä¸ Docker Desktop  é€ æˆ docker.sock å†²çªé—®é¢˜</h1><blockquote><p>OrbStack é›†æˆäº†dockerä¸Linuxï¼Œ ç±»ä¼¼äºè™šæ‹Ÿæœºçš„APP</p></blockquote><blockquote><p>åœ¨ç»ˆç«¯ä¼šå‡ºç°å¦‚ä¸‹é—®é¢˜ã€‚</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">docker ps</span><br>Cannot connect to the Docker daemon at unix:///Users/***/.docker/run/docker.sock. Is the docker daemon running?<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æˆ–</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">docker ps</span><br>Cannot connect to the Docker daemon at unix:///Users/***/.orbstack/run/docker.sock. Is the docker daemon running?<br></code></pre></td></tr></table></figure><blockquote><p>è§£å†³æ–¹å¼</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker context use desktop-linux<br>docker context use orbstack<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">docker context <span class="hljs-built_in">ls</span></span><br>NAME              DESCRIPTION                               DOCKER ENDPOINT                               ERROR<br>default           Current DOCKER_HOST based configuration   unix:///var/run/docker.sock<br>desktop-linux *                                             unix:///Users/**/.docker/run/docker.sock<br>orbstack          OrbStack                                  unix:///Users/**/.orbstack/run/docker.sock<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">OrbStack å°†é»˜è®¤docker.sock é“¾æ¥åˆ°OrbStack çš„docker.sock</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">sudo <span class="hljs-built_in">ln</span> -s ï½/.docker/run/docker.sock /var/run/docker.sock</span> <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">docker context</span><br><br>Usage:  docker context COMMAND<br><br>Manage contexts<br><br>Commands:<br>  create      Create a context<br>  export      Export a context to a tar archive FILE or a tar stream on STDOUT.<br>  import      Import a context from a tar or zip file<br>  inspect     Display detailed information on one or more contexts<br>  ls          List contexts<br>  rm          Remove one or more contexts<br>  show        Print the name of the current context<br>  update      Update a context<br>  use         Set the current docker context<br><br>Run &#x27;docker context COMMAND --help&#x27; for more information on a command.<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">------------------------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment"># éœ€è¦å®‰è£… jq å‘½ä»¤</span></span><br>alias dkd=&quot;jq &#x27;.currentContext=\&quot;desktop-linux\&quot;&#x27; ~/.docker/config.json &gt; ~/.docker/config.json_new &amp;&amp; rm ~/.docker/config.json &amp;&amp; mv ~/.docker/config.json_new ~/.docker/config.json&quot;<br>alias dko=&quot;jq &#x27;.currentContext=\&quot;orbstack\&quot;&#x27; ~/.docker/config.json &gt; ~/.docker/config.json_new &amp;&amp; rm ~/.docker/config.json &amp;&amp; mv ~/.docker/config.json_new ~/.docker/config.json&quot;<br></code></pre></td></tr></table></figure><blockquote><p>é€ æˆåŸå›  <code>~/.docker/config.json</code>æ–‡ä»¶ çš„currentContextå˜é‡å€¼</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">tree -NL 1  ~/.docker  ~/.docker/contexts/meta</span><br>/Users/***/.docker<br>â”œâ”€â”€ application-template<br>â”œâ”€â”€ bin<br>â”œâ”€â”€ buildx<br>â”œâ”€â”€ canary.json<br>â”œâ”€â”€ certs.d<br>â”œâ”€â”€ cli-plugins<br>â”œâ”€â”€ config.json #éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶<br>â”œâ”€â”€ contexts<br>â”œâ”€â”€ daemon.json<br>â”œâ”€â”€ devenvironments<br>â”œâ”€â”€ features.json<br>â”œâ”€â”€ run<br>â””â”€â”€ scan<br>/Users/***/.docker/contexts/meta<br>â”œâ”€â”€ 2d89b732b01a00a2d1675ed3cee9fd0f965daadf90603c989dd3afd4569c6896 #currentContext å˜é‡çš„å€¼<br>â””â”€â”€ fe9c6bd7a66301f49ca9b6a70b217107cd1284598bfc254700c989b916da791e #currentContext å˜é‡çš„å€¼<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cat</span> ~/.docker/config.json | jq</span><br>&#123;<br>  &quot;auths&quot;: &#123;&#125;,<br>  &quot;credsStore&quot;: &quot;desktop&quot;,<br>  &quot;credHelpers&quot;: &#123;<br>    &quot;asia.gcr.io&quot;: &quot;gcloud&quot;,<br>    &quot;eu.gcr.io&quot;: &quot;gcloud&quot;,<br>    &quot;gcr.io&quot;: &quot;gcloud&quot;,<br>    &quot;marketplace.gcr.io&quot;: &quot;gcloud&quot;,<br>    &quot;staging-k8s.gcr.io&quot;: &quot;gcloud&quot;,<br>    &quot;us.gcr.io&quot;: &quot;gcloud&quot;<br>  &#125;,<br>  &quot;experimental&quot;: &quot;enabled&quot;,<br>  &quot;stackOrchestrator&quot;: &quot;swarm&quot;,<br>  &quot;currentContext&quot;: &quot;orbstack&quot; ##currentContext å¯¼è‡´ æ‰¾ä¸åˆ° docker.sock<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å¤‡å¿˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OrbStack</tag>
      
      <tag>DockerDesktop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Markdownè¶…é“¾æ¥æ‰©å±•</title>
    <link href="/blog/893fdda9.html"/>
    <url>/blog/893fdda9.html</url>
    
    <content type="html"><![CDATA[<h2 id="Markdown-è¶…é“¾æ¥æ‰©å±•"><a href="#Markdown-è¶…é“¾æ¥æ‰©å±•" class="headerlink" title="Markdown è¶…é“¾æ¥æ‰©å±•"></a>Markdown è¶…é“¾æ¥æ‰©å±•</h2><blockquote><p> æ•ˆæœï¼š<a href="https://hexo.io/zh-cn/api/injector?_blank/" title="Iinjectoræ–‡æ¡£">Hexo Iinjectoræ–‡æ¡£</a></p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">//åŸå§‹è¯­æ³•ï¼š[<span class="hljs-string">è¶…é“¾æ¥çš„åå­—</span>](<span class="hljs-link">url/&quot;FloatTitle&quot;</span>)<br>//åœ¨æ–°çª—å£ä¸­æ‰“å¼€ï¼š[<span class="hljs-string">è¶…é“¾æ¥çš„åå­—</span>](<span class="hljs-link">url?_blank/&quot;FloatTitle&quot;</span>)<br>//åœ¨æœ¬çª—å£ä¸­æ‰“å¼€ï¼š[<span class="hljs-string">è¶…é“¾æ¥çš„åå­—</span>](<span class="hljs-link">url?_self/&quot;FloatTitle&quot;</span>)<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>æ‰©å±•æ–¹æ³•</p><p>åœ¨<code>scripts/injector.js</code>åˆ›å»ºè‡ªå®šä¹‰åå­—çš„jsæ–‡ä»¶ã€‚æ·»åŠ å¦‚ä¸‹å†…å®¹ã€‚</p>          </div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> scriptMarkdownA = <span class="hljs-string">&quot;&lt;script&gt;\n&quot;</span> +<br>    <span class="hljs-string">&quot;    var aTagArr = [].slice.apply(document.getElementsByTagName(\&quot;a\&quot;));\n&quot;</span> +<br>    <span class="hljs-string">&quot;    aTagArr.forEach(function (e, i) &#123;\n&quot;</span> +<br>    <span class="hljs-string">&quot;    e.href.indexOf(\&quot;_blank\&quot;) &gt; -1 ? e.target = \&quot;_blank\&quot; : null;\n&quot;</span> +<br>    <span class="hljs-string">&quot;&#125;);\n&quot;</span> +<br>    <span class="hljs-string">&quot;&lt;/script&gt;&quot;</span>;<br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">injector</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;body_end&#x27;</span>, scriptMarkdownA, <span class="hljs-string">&#x27;post&#x27;</span>);<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>ç›®å½•ç»“æ„</p>          </div><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">public<br>source<br><span class="hljs-keyword">scripts</span><br><span class="hljs-keyword"></span>â””â”€â”€ injector.<span class="hljs-keyword">js</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">scaffolds</span><br><span class="hljs-keyword"></span>package.<span class="hljs-keyword">json</span><br><span class="hljs-keyword"></span>themes<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Blog</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Markdown</tag>
      
      <tag>Blog</tag>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Macç¼–è¯‘OpenJdkæºç </title>
    <link href="/blog/19ecb602.html"/>
    <url>/blog/19ecb602.html</url>
    
    <content type="html"><![CDATA[<h1 id="MacOsç¼–è¯‘OpenJDK"><a href="#MacOsç¼–è¯‘OpenJDK" class="headerlink" title="MacOsç¼–è¯‘OpenJDK"></a>MacOsç¼–è¯‘OpenJDK</h1><div class="note note-warning">            <ul><li>æœªå¼ºè°ƒç›®å½•ï¼Œå³æœ¬åœ°ä»“åº“æ ¹ç›®å½•</li><li>ç¼–è¯‘Git Tagï¼šjdk-21+21   # æœ¬æƒ³ç¼–è¯‘jdk17ï¼Œå¥ˆä½•17ç‰ˆæœ¬æŠ¥é”™å¤ªå¤šï¼Œæ— æ³•è§£å†³ï¼Œæ€€ç–‘æ˜¯xcodeæˆ–ç³»ç»Ÿç‰ˆæœ¬é—®é¢˜ï¼Œç´¢æ€§ç›®å‰æœ€æ–°ã€‚</li></ul>          </div><div class="note note-primary">            <p>ç‚¹å‡»ä¸‹é¢æŒ‰é’®è·³è½¬ç›¸å…³æ–‡æ¡£</p>          </div><a class="btn" href="https://openjdk.org/"  title="OpenJDK" target="_blank">OpenJDKå®˜ç½‘åœ°å€</a> <a class="btn" href="https://openjdk.org/groups/build/doc/building.html"  title="Building the JDK" target="_blank">æ„å»ºJDKæ–‡æ¡£</a>    <a class="btn" href="https://htmlpreview.github.io/?https://raw.githubusercontent.com/openjdk/jdk/master/doc/building.html"  title="Building the JDK" target="_blank">æ„å»ºJDKæ–‡æ¡£</a> <a class="btn" href="https://blog.jetbrains.com/clion/2020/03/openjdk-with-clion/"  title="Develop OpenJDK in CLion with Pleasure" target="_blank">Clionåšå®¢å…³äºOpenJDKå¼€å‘çš„å†…å®¹</a><hr><h2 id="è·å–OpenJDK"><a href="#è·å–OpenJDK" class="headerlink" title="è·å–OpenJDK"></a>è·å–OpenJDK</h2> <a class="btn" href="https://github.com/openjdk/jdk/"  title="OpenJDK GitHub" target="_blank">æºç ä»“åº“åœ°å€</a> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/openjdk/jdk.git<br></code></pre></td></tr></table></figure><h2 id="ç¼–è¯‘ç¯å¢ƒ"><a href="#ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="ç¼–è¯‘ç¯å¢ƒ"></a>ç¼–è¯‘ç¯å¢ƒ</h2><ul><li><p>è½¯ä»¶ç¯å¢ƒ  ï¼ˆå‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼Œè‡ªè¡Œå®‰è£…ã€‚MacOs æ¨èä½¿ç”¨brewï¼‰</p><ul><li><p>macos  Ventura 13.3.1 (a)</p></li><li><p><code>xcodebuild -version </code>   : Xcode 14.3</p></li><li><p><code>xcode-select -v</code> :  xcode-select version 2397.</p></li><li><p><code>/Library/Java/JavaVirtualMachines/jdk-20.jdk/Contents/Home</code></p></li><li><p><code>clang --version</code></p><blockquote><p>Apple clang version 14.0.3 (clang-1403.0.22.14.1)<br>Target: x86_64-apple-darwin22.4.0<br>Thread model: posix<br>InstalledDir: &#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Toolchains&#x2F;XcodeDefault.xctoolchain&#x2F;usr&#x2F;bin</p></blockquote></li><li><p><code>  clang++ --version</code></p><blockquote><p>Apple clang version 14.0.3 (clang-1403.0.22.14.1)<br>Target: x86_64-apple-darwin22.4.0<br>Thread model: posix<br>InstalledDir: &#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Toolchains&#x2F;XcodeDefault.xctoolchain&#x2F;usr&#x2F;bin</p></blockquote></li><li><p><code> autoconf --version</code> : autoconf (GNU Autoconf) 2.71 <code># brew install autoconf</code></p></li><li><p><code>freetype-config --ftversion</code> : 2.13.0  <code># brew install freetype</code></p></li><li><p><code>make --version</code> : GNU Make 3.81   <code># brew install make</code></p></li><li><p><code>ccache -V</code> :    ccache version 4.8   <code># brew install ccache</code></p></li></ul></li><li><p>ç¡¬ä»¶ ï¼šMacBook Pro ;  2.6 GHz å…­æ ¸Intel Core i7 ï¼› å†…å­˜ 16 GB 2400 MHz DDR4</p></li></ul><hr><h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><h3 id="configure"><a href="#configure" class="headerlink" title="configure"></a><a href="8dd8a18f" target="_blank">configure</a></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># è·å–é…ç½®å‚æ•°å¸®åŠ©</span><br>$ bash configure --<span class="hljs-built_in">help</span><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">bash configure \<br>--with-debug-level=slowdebug  \<br>--with-jvm-variants=server  \<br>--with-target-bits=64 \<br>--with-boot-jdk=<span class="hljs-variable">$JAVA_20_HOME</span><br></code></pre></td></tr></table></figure><ul><li><p>â€“with-debug-level&#x3D;slowdebug #å¯é€‰ï¼šreleaseã€fastdebugã€slowdebugï¼Œè¶Šé ådebugä¿¡æ¯è¶Šå¤šï¼Œä¼˜åŒ–è¶Šå°‘ã€‚</p></li><li><p>â€“with-jvm-variants&#x3D;server  #jvmæ¨¡å¼ï¼šserverã€clientã€minimalã€coreã€zeroã€custom</p></li><li><p>â€“with-target-bits&#x3D;64   #æŒ‡å®šç¼–è¯‘32ä½è¿˜æ˜¯64ä½çš„JVM</p></li><li><p>â€“with-boot-jdk&#x3D;$JAVA_20_HOME  # ç³»ç»Ÿexport é…ç½®çš„ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯jdk20</p></li></ul><div class="note note-primary">            <p>è¡¥å……</p><ul><li>â€“with-conf-name&#x3D;jdk-21+22-slowdebug   è‡ªå®šä¹‰åå­—ï¼Œæ‰§è¡Œ<code>make</code>æŒ‡ä»¤ï¼Œå¢åŠ <code>CONF=jdk-21+22-slowdebug</code> å‚æ•°ã€‚ä¾‹å¦‚<code>make CONF=jdk-21+22-slowdebug images</code></li></ul>          </div>  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ java --version<br>java 20.0.1 2023-04-18<br>Java(TM) SE Runtime Environment (build 20.0.1+9-29)<br>Java HotSpot(TM) 64-Bit Server VM (build 20.0.1+9-29, mixed mode, sharing)<br></code></pre></td></tr></table></figure><div class="note note-success">            <p>configure ç»“æœ</p>          </div><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs gradle">====================================================<br>A <span class="hljs-keyword">new</span> configuration has been successfully created in<br><span class="hljs-regexp">/Users/</span>*<span class="hljs-regexp">/openjdk/</span>build/macosx-x86_64-server-slowdebug<br>using configure arguments <span class="hljs-string">&#x27;--with-debug-level=slowdebug --with-jvm-variants=server --with-target-bits=64 --with-boot-jdk=/Library/Java/JavaVirtualMachines/jdk-20.jdk/Contents/Home&#x27;</span>.<br><br>Configuration summary:<br>* Name:           macosx-x86_64-server-slowdebug<br>* Debug level:    slowdebug<br>* HS debug level: debug<br>* JVM variants:   server<br>* JVM features:   server: <span class="hljs-string">&#x27;cds compiler1 compiler2 dtrace epsilongc g1gc jfr jni-check jvmci jvmti management parallelgc serialgc services shenandoahgc vm-structs zgc&#x27;</span><br>* OpenJDK target: OS: macosx, CPU architecture: x86, address length: <span class="hljs-number">64</span><br>* Version string: <span class="hljs-number">21</span>-internal-adhoc.wdk.openjdk (<span class="hljs-number">21</span>-internal)<br>* <span class="hljs-keyword">Source</span> date:    <span class="hljs-number">1683614002</span> (<span class="hljs-number">2023</span>-<span class="hljs-number">05</span>-<span class="hljs-number">09</span>T06:<span class="hljs-number">33</span>:<span class="hljs-number">22</span>Z)<br><br>Tools summary:<br>* Boot JDK:       java version <span class="hljs-string">&quot;20.0.1&quot;</span> <span class="hljs-number">2023</span>-<span class="hljs-number">04</span>-<span class="hljs-number">18</span> Java(TM) SE <span class="hljs-keyword">Runtime</span> Environment (build <span class="hljs-number">20.0</span>.<span class="hljs-number">1</span>+<span class="hljs-number">9</span>-<span class="hljs-number">29</span>) Java HotSpot(TM) <span class="hljs-number">64</span>-Bit Server VM (build <span class="hljs-number">20.0</span>.<span class="hljs-number">1</span>+<span class="hljs-number">9</span>-<span class="hljs-number">29</span>, mixed mode, sharing) (at <span class="hljs-regexp">/Library/</span>Java<span class="hljs-regexp">/JavaVirtualMachines/</span>jdk-<span class="hljs-number">20</span>.jdk<span class="hljs-regexp">/Contents/</span>Home)<br>* Toolchain:      clang (clang/LLVM <span class="hljs-keyword">from</span> Xcode <span class="hljs-number">14.3</span>)<br>* Sysroot:        <span class="hljs-regexp">/Applications/</span>Xcode.app<span class="hljs-regexp">/Contents/</span>Developer<span class="hljs-regexp">/Platforms/M</span>acOSX.platform<span class="hljs-regexp">/Developer/</span>SDKs/MacOSX13.<span class="hljs-number">3</span>.sdk<br>* C Compiler:     Version <span class="hljs-number">14.0</span>.<span class="hljs-number">3</span> (at <span class="hljs-regexp">/usr/</span>bin/clang)<br>* C++ Compiler:   Version <span class="hljs-number">14.0</span>.<span class="hljs-number">3</span> (at <span class="hljs-regexp">/usr/</span>bin/clang++)<br><br>Build performance summary:<br>* Build jobs:     <span class="hljs-number">12</span><br>* Memory limit:   <span class="hljs-number">16384</span> MB<br><br>The following warnings were produced. Repeated here <span class="hljs-keyword">for</span> convenience:<br>WARNING: pandoc is version <span class="hljs-number">2.18</span>, not the recommended version <span class="hljs-number">2.19</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><blockquote><p><code>build</code>ç›®å½•ç”Ÿæˆå¦‚ä¸‹ç›®å½•ã€‚</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ tree -NL 1 build .<br>build<br>â””â”€â”€ macosx-x86_64-server-slowdebug  <span class="hljs-comment"># configure ä¹‹åç”Ÿæˆçš„ç›®å½•ï¼Œä¹‹åç¼–è¯‘ç»“æœå­˜æ”¾åœ¨æ­¤</span><br>.<br>â”œâ”€â”€ ADDITIONAL_LICENSE_INFO<br>â”œâ”€â”€ ASSEMBLY_EXCEPTION<br>â”œâ”€â”€ CONTRIBUTING.md<br>â”œâ”€â”€ LICENSE<br>â”œâ”€â”€ Makefile<br>â”œâ”€â”€ README.md<br>â”œâ”€â”€ bin<br>â”œâ”€â”€ build<br>â”œâ”€â”€ compile_commands.json<br>â”œâ”€â”€ configure<br>â”œâ”€â”€ doc<br>â”œâ”€â”€ make<br>â”œâ”€â”€ src<br>â””â”€â”€ <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><h3 id="make"><a href="#make" class="headerlink" title="make"></a>make</h3><p> <code>make  [Targets]</code><sup id="fnref:Targetsæ–‡æ¡£" class="footnote-ref"><a href="#fn:Targetsæ–‡æ¡£" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://hg.openjdk.org/jdk/jdk11/raw-file/tip/doc/building.html#common-make-targets">[Targetsæ–‡æ¡£]</span></a></sup>  </p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vim"># å…¨é‡ç¼–è¯‘<br>$ <span class="hljs-keyword">make</span> <span class="hljs-keyword">all</span><br>Building target <span class="hljs-string">&#x27;all&#x27;</span> in configuration <span class="hljs-string">&#x27;macosx-x86_64-server-slowdebug&#x27;</span><br>Compiling <span class="hljs-keyword">up</span> <span class="hljs-keyword">to</span> <span class="hljs-number">1</span> <span class="hljs-keyword">files</span> <span class="hljs-keyword">for</span> BUILD_TOOLS_HOTSPOT<br>..........<br># éœ€è¦ä¸€æ®µæ—¶é—´ ï¼Œè¿™é‡Œçœç•¥<span class="hljs-keyword">N</span>è¡Œä¿¡æ¯<br>..........<br>Compiling <span class="hljs-keyword">up</span> <span class="hljs-keyword">to</span> <span class="hljs-number">2</span> <span class="hljs-keyword">files</span> <span class="hljs-keyword">for</span> CLASSLIST_JAR<br>Creating support/classlist.jar<br>Creating jdk.jlink.jmod<br>Creating java.base.jmod<br>Creating jdk image<br>Creating CDS archive <span class="hljs-keyword">for</span> jdk image <span class="hljs-keyword">for</span> server<br>Creating CDS-NOCOOPS archive <span class="hljs-keyword">for</span> jdk image <span class="hljs-keyword">for</span> server<br>Stopping javac server<br>Finished building target <span class="hljs-string">&#x27;all&#x27;</span> in configuration <span class="hljs-string">&#x27;macosx-x86_64-server-slowdebug&#x27;</span><br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">$ ./build/macosx-x86_64-<span class="hljs-keyword">server</span>-slowdebug/jdk/bin/java  <span class="hljs-comment">--version</span><br>openjdk <span class="hljs-number">21</span>-<span class="hljs-type">internal</span> <span class="hljs-number">2023</span><span class="hljs-number">-09</span><span class="hljs-number">-19</span><br>OpenJDK Runtime Environment (slowdebug build <span class="hljs-number">21</span>-<span class="hljs-type">internal</span>-adhoc.wdk.openjdk)<br>OpenJDK <span class="hljs-number">64</span>-<span class="hljs-type">Bit</span> <span class="hljs-keyword">Server</span> VM (slowdebug build <span class="hljs-number">21</span>-<span class="hljs-type">internal</span>-adhoc.wdk.openjdk, mixed mode)<br></code></pre></td></tr></table></figure><h2 id="å¯¼å…¥Clion"><a href="#å¯¼å…¥Clion" class="headerlink" title="å¯¼å…¥Clion"></a>å¯¼å…¥Clion</h2><h3 id="compile-commands-json"><a href="#compile-commands-json" class="headerlink" title="compile-commands.json"></a>compile-commands.json</h3><blockquote><p> ç”Ÿæˆ compile-commands.json ï¼ŒCompile Commandså‚è€ƒClion<sup id="fnref:å½©è›‹" class="footnote-ref"><a href="#fn:å½©è›‹" rel="footnote"><span class="hint--top hint--rounded" aria-label="æ¥æºç½‘ç»œçš„æ¿€æ´»å·¥å…· https://ffff.ga/">[å½©è›‹]</span></a></sup>æ–‡æ¡£<sup id="fnref:jetbrains" class="footnote-ref"><a href="#fn:jetbrains" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://www.jetbrains.com/help/fleet/generating-a-json-compilation-database.html">[jetbrains]</span></a></sup></p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim">$ <span class="hljs-keyword">make</span> compile-commands<br>Building target <span class="hljs-string">&#x27;compile-commands&#x27;</span> in configuration <span class="hljs-string">&#x27;macosx-x86_64-server-slowdebug&#x27;</span><br>Cleaning compile-commands <span class="hljs-keyword">make</span> support artifacts ... done<br>Updating compile_commands.json<br>Finished building target <span class="hljs-string">&#x27;compile-commands&#x27;</span> in configuration <span class="hljs-string">&#x27;macosx-x86_64-server-slowdebug&#x27;</span><br><br>#  <span class="hljs-keyword">make</span> compile-commands å† <span class="hljs-keyword">make</span> <span class="hljs-keyword">all</span> ç”Ÿæˆçš„compile_commands.json  ä¹Ÿå¯ä»¥<br></code></pre></td></tr></table></figure><h3 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h3><ol><li><p>ä½¿ç”¨Clionæ‰“å¼€ç›®å½• <code>./build/macosx-x86_64-server-slowdebug/compile_commands.json</code> æ–‡ä»¶ã€‚</p></li><li><p>ä½¿ç”¨é¡¹ç›®æ‰“å¼€ï¼Œç­‰å¾…Clionå®Œæˆé¡¹ç›®ç´¢å¼•æ‰«æ</p></li><li><p>æ›´æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸ºOpenJDKæ ¹ç›®å½•ï¼Œç­‰å¾…é‡æ–°æ‰«æç´¢å¼•ã€‚å¦‚ä¸‹å›¾</p></li></ol><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/1.png" alt="æ ¹æ®compile_commands.jsonå¯¼å…¥é¡¹ç›®"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/2.png" alt="é¡¹ç›®æ‰“å¼€æ–¹å¼"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/3.png" alt="æ›´æ”¹æ ¹ç›®å½•"></div></div></div><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><h4 id="é…ç½®å¤–éƒ¨å·¥å…·"><a href="#é…ç½®å¤–éƒ¨å·¥å…·" class="headerlink" title="é…ç½®å¤–éƒ¨å·¥å…·"></a>é…ç½®å¤–éƒ¨å·¥å…·</h4><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/ExtendedTools.png" alt="ExtendedTools"></p><ul><li><p><code>make all</code></p><blockquote><p>#Program å’Œ Arguments å…±åŒæ„æˆäº†æ‰€è¦æ‰§è¡Œçš„å‘½ä»¤ â€œmake allâ€</p><p>Name: make<br>Program: make<br>Arguments: all<br>Working directory: {é¡¹ç›®çš„æ ¹ç›®å½•&#x2F;æœ¬åœ°openjdkä½ç½®}</p></blockquote></li><li><p><code>make clean</code> é…ç½®åŒ <code>make all</code></p></li><li><p><code>make images</code> é…ç½® åŒ <code>make all</code></p></li><li><p><code>make</code> é…ç½®åŒ <code>make all</code></p></li></ul><h4 id="è¿è¡Œ-x2F-è°ƒè¯•é…ç½®-ï¼ˆRun-x2F-Debug-configurationï¼‰"><a href="#è¿è¡Œ-x2F-è°ƒè¯•é…ç½®-ï¼ˆRun-x2F-Debug-configurationï¼‰" class="headerlink" title="è¿è¡Œ&#x2F;è°ƒè¯•é…ç½® ï¼ˆRun&#x2F;Debug configurationï¼‰"></a>è¿è¡Œ&#x2F;è°ƒè¯•é…ç½® ï¼ˆRun&#x2F;Debug configurationï¼‰</h4><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/RunDebugConfiguration.png" alt="RunDebugConfiguration"></p><ul><li><p>Run&#x2F;Debug configuration</p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/Configuration.png" alt="Configuration"></p></li><li><p>ç¼–è¯‘jdkï¼Œä¿®æ”¹jdkæºç åç¼–è¯‘æºç ä½¿ç”¨ã€‚</p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/make-images.png" alt="make-images"></p></li></ul><p>è¿è¡ŒDebug</p><ul><li><p>Debugå…¥å£ <code>src/java.base/share/native/libjli/java.c</code> ç¬¬391è¡Œ</p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/debug-openjdk.png" alt="debug-openjdk"></p></li><li><p>Debugå‡ºç°  <a href="#lldb%E6%8A%A5%E9%94%99%EF%BC%9ASIGSEGV-signal-SIGSEGV-%EF%BC%88%E6%B6%89%E5%8F%8A%E5%88%B0C-x2F-C-%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9%EF%BC%8C%E4%B8%8D%E6%98%8E%E6%89%80%E4%BB%A5%EF%BC%8C%E5%AE%8C%E5%85%A8%E6%98%AF%E7%85%A7%E7%8C%AB%E7%94%BB%E8%99%8E%EF%BC%89">SIGSEGV (signal SIGSEGV) </a></p></li></ul><h2 id="IDEA-å¼•ç”¨-Native-OpenJDK"><a href="#IDEA-å¼•ç”¨-Native-OpenJDK" class="headerlink" title="IDEA å¼•ç”¨ Native OpenJDK"></a>IDEA å¼•ç”¨ Native OpenJDK</h2><ol><li><h3 id="IDEA-æ–°å»ºå·¥ç¨‹ï¼Œå¹¶ä¿®æ”¹JDKä¸ºç¼–è¯‘å¥½çš„jdkï¼ˆ-build-macosx-x86-64-server-slowdebug-images-ï¼‰ï¼Œå°†æºç ä¿®æ”¹ä¸ºOpenJdkæ ¹ç›®å½•ä¸‹çš„srcç›®å½•ã€‚"><a href="#IDEA-æ–°å»ºå·¥ç¨‹ï¼Œå¹¶ä¿®æ”¹JDKä¸ºç¼–è¯‘å¥½çš„jdkï¼ˆ-build-macosx-x86-64-server-slowdebug-images-ï¼‰ï¼Œå°†æºç ä¿®æ”¹ä¸ºOpenJdkæ ¹ç›®å½•ä¸‹çš„srcç›®å½•ã€‚" class="headerlink" title="IDEA æ–°å»ºå·¥ç¨‹ï¼Œå¹¶ä¿®æ”¹JDKä¸ºç¼–è¯‘å¥½çš„jdkï¼ˆ build/macosx-x86_64-server-slowdebug/images/ï¼‰ï¼Œå°†æºç ä¿®æ”¹ä¸ºOpenJdkæ ¹ç›®å½•ä¸‹çš„srcç›®å½•ã€‚"></a>IDEA æ–°å»ºå·¥ç¨‹ï¼Œå¹¶ä¿®æ”¹JDKä¸ºç¼–è¯‘å¥½çš„jdkï¼ˆ<code> build/macosx-x86_64-server-slowdebug/images/</code>ï¼‰ï¼Œå°†æºç ä¿®æ”¹ä¸ºOpenJdkæ ¹ç›®å½•ä¸‹çš„srcç›®å½•ã€‚</h3><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/SDK1.png" alt="SDK1"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/SDK2.png" alt="SDK2"></div></div></div></li><li><h3 id="ä¿®æ”¹jdkä»£ç "><a href="#ä¿®æ”¹jdkä»£ç " class="headerlink" title="ä¿®æ”¹jdkä»£ç "></a>ä¿®æ”¹jdkä»£ç </h3><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/MAIN.png" alt="MAIN"></p></li><li><h3 id="æ‰§è¡Œ-make-images-ç¼–è¯‘jdk"><a href="#æ‰§è¡Œ-make-images-ç¼–è¯‘jdk" class="headerlink" title="æ‰§è¡Œ make images ç¼–è¯‘jdk"></a>æ‰§è¡Œ make images ç¼–è¯‘jdk</h3><blockquote><p>æºç æ›´ç›®å½•æ‰§è¡Œ<code>make images</code> æˆ–åœ¨CLionæ‰§è¡Œé¢„å…ˆé…ç½®å¥½çš„make imageså³å¯ã€‚</p></blockquote><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/run-make-images1.png" alt="run-make-images1"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/run-make-images2.png" alt="run-make-images1"></div></div></div></li><li><h3 id="è¿è¡Œæµ‹è¯•ä»£ç çœ‹ä¿®æ”¹æ•ˆæœ"><a href="#è¿è¡Œæµ‹è¯•ä»£ç çœ‹ä¿®æ”¹æ•ˆæœ" class="headerlink" title="è¿è¡Œæµ‹è¯•ä»£ç çœ‹ä¿®æ”¹æ•ˆæœ"></a>è¿è¡Œæµ‹è¯•ä»£ç çœ‹ä¿®æ”¹æ•ˆæœ</h3><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/result.png" alt="result"></p></li></ol><h2 id="å¼‚å¸¸é—®é¢˜"><a href="#å¼‚å¸¸é—®é¢˜" class="headerlink" title="å¼‚å¸¸é—®é¢˜"></a>å¼‚å¸¸é—®é¢˜</h2><h3 id="error-unmappable-character-0xE6-for-encoding-ascii"><a href="#error-unmappable-character-0xE6-for-encoding-ascii" class="headerlink" title="error: unmappable character (0xE6) for encoding ascii"></a>error: unmappable character (0xE6) for encoding ascii</h3><div class="note note-danger">            <p><code>make/common/JavaCompilation.gmk</code>æ–‡ä»¶ï¼Œ274è¡Œå°† <code>ascii</code> ä¿®æ”¹ä¸º<code>utf-8</code></p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/ascii_to_utf8.png" alt="ascii_to_utf8"></p>          </div><h3 id="Library-not-loaded-x2F-usr-x2F-local-x2F-lib-x2F-libgvc-6-dylib-é”™è¯¯ä¿¡æ¯"><a href="#Library-not-loaded-x2F-usr-x2F-local-x2F-lib-x2F-libgvc-6-dylib-é”™è¯¯ä¿¡æ¯" class="headerlink" title="Library not loaded: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvc.6.dylib é”™è¯¯ä¿¡æ¯"></a>Library not loaded: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvc.6.dylib é”™è¯¯ä¿¡æ¯</h3><div class="note note-danger">            <p>Library not loaded: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvc.6.dylib é”™è¯¯ä¿¡æ¯</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle">dyld[<span class="hljs-number">77415</span>]: Library not loaded: <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/lib/</span>libgvc.<span class="hljs-number">6</span>.dylib<br>  Referenced <span class="hljs-keyword">from</span>: &lt;<span class="hljs-number">1</span>F936113-F892-<span class="hljs-number">345</span>E-A9E8-<span class="hljs-number">0</span>F93B969392C&gt; <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>dot<br>  Reason: tried: <span class="hljs-string">&#x27;/usr/local/lib/libgvc.6.dylib&#x27;</span> (no such <span class="hljs-keyword">file</span>), <span class="hljs-string">&#x27;/System/Volumes/Preboot/Cryptexes/OS/usr/local/lib/libgvc.6.dylib&#x27;</span> (no such <span class="hljs-keyword">file</span>), <span class="hljs-string">&#x27;/usr/local/lib/libgvc.6.dylib&#x27;</span> (no such <span class="hljs-keyword">file</span>), <span class="hljs-string">&#x27;/usr/lib/libgvc.6.dylib&#x27;</span> (no such <span class="hljs-keyword">file</span>, not in dyld cache)<br><br></code></pre></td></tr></table></figure>          </div><div class="note note-success">            <p><del>è§£å†³æ–¹å¼   :  å°† <a href="https://graphviz.org/download/#mac">graphviz</a><sup id="fnref:graphvizå®˜ç½‘" class="footnote-ref"><a href="#fn:graphvizå®˜ç½‘" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://graphviz.org/download/#mac">[graphvizå®˜ç½‘]</span></a></sup>çš„ libç›®å½•ä¸‹ <code>.dylib</code>  æ–‡ä»¶æ˜ å°„åˆ°  <code>/usr/local/lib/</code> ç›®å½•ä¸‹</del></p><p> è§£å†³æ–¹å¼ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">brew install graphviz<br>brew link graphviz <br><span class="hljs-meta prompt_">#</span><span class="language-bash">æˆ–</span><br>brew link --overwrite graphviz<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">-------------------------------------------------------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">-------------------------------------------------------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">-------------------------------------------------------</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¦‚æœ‰ä»¥ä¸‹é”™è¯¯</span><br>brew link --overwrite graphviz<br>Linking /usr/local/Cellar/graphviz/8.0.5...<br>Error: Could not symlink lib/graphviz/config6<br>/usr/local/lib/graphviz is not writable.<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ‰§è¡Œ <span class="hljs-built_in">chown</span> æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹</span><br>sudo chown -R &#x27;ç”¨æˆ·å:admin&#x27; /usr/local/lib/graphviz<br></code></pre></td></tr></table></figure><div class="note note-danger">            <p><del>å¯»æ‰¾åˆ°çš„å˜ç›¸è§£å†³æ–¹å¼ï¼Œåæ­£æ˜¯æ„å¤–çš„è§£å†³äº†<code>make all</code> æŠ¥é”™çš„é—®é¢˜ã€‚</del></p><blockquote><p> <del>æ„Ÿè§‰ä¸æ˜¯æœ€ç»ˆè§£å†³æ–¹å¼ï¼Œä½†æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œå¦‚çœ‹åˆ°æ­¤è´´çš„äººçŸ¥é“ï¼Œéº»çƒ¦è¯·å‘ŠçŸ¥ä¸€ä¸‹æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</del></p><p>ğŸ“®é‚®ç®± :  <a href="mailto:&#119;&#97;&#x6e;&#103;&#x64;&#x65;&#107;&#117;&#x6e;&#x65;&#109;&#x61;&#105;&#108;&#64;&#103;&#x6d;&#97;&#105;&#x6c;&#46;&#x63;&#x6f;&#109;">&#119;&#97;&#x6e;&#103;&#x64;&#x65;&#107;&#117;&#x6e;&#x65;&#109;&#x61;&#105;&#108;&#64;&#103;&#x6d;&#97;&#105;&#x6c;&#46;&#x63;&#x6f;&#109;</a></p></blockquote>          </div><blockquote><p><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libcdt.5.dylib  &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libcdt.5.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libcgraph.6.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libcgraph.6.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libgvc.6.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvc.6.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libgvpr.2.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvpr.2.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;liblab_gamut.1.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;liblab_gamut.1.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;grahviz&#x2F;8.0.5&#x2F;lib&#x2F;libpathplan.4.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libpathplan.4.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libxdot.4.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libxdot.4.dylib</del></p></blockquote>          </div><h3 id="lldbæŠ¥é”™ï¼šSIGSEGV-signal-SIGSEGV-ï¼ˆæ¶‰åŠåˆ°C-x2F-C-ç›¸å…³å†…å®¹ï¼Œä¸æ˜æ‰€ä»¥ï¼Œå®Œå…¨æ˜¯ç…§çŒ«ç”»è™ï¼‰"><a href="#lldbæŠ¥é”™ï¼šSIGSEGV-signal-SIGSEGV-ï¼ˆæ¶‰åŠåˆ°C-x2F-C-ç›¸å…³å†…å®¹ï¼Œä¸æ˜æ‰€ä»¥ï¼Œå®Œå…¨æ˜¯ç…§çŒ«ç”»è™ï¼‰" class="headerlink" title="lldbæŠ¥é”™ï¼šSIGSEGV (signal SIGSEGV)  ï¼ˆæ¶‰åŠåˆ°C&#x2F;C++ç›¸å…³å†…å®¹ï¼Œä¸æ˜æ‰€ä»¥ï¼Œå®Œå…¨æ˜¯ç…§çŒ«ç”»è™ï¼‰"></a>lldb<code>æŠ¥é”™ï¼š</code>SIGSEGV (signal SIGSEGV)  ï¼ˆæ¶‰åŠåˆ°C&#x2F;C++ç›¸å…³å†…å®¹ï¼Œä¸æ˜æ‰€ä»¥ï¼Œå®Œå…¨æ˜¯ç…§çŒ«ç”»è™ï¼‰</h3><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/SIGSEGV.png" alt="iShot_2023-05-10_01.10.55"></p><blockquote><p>è§£å†³åŠæ³•æ˜¯ï¼Œåœ¨ç”¨æˆ·å®¶ç›®å½•åˆ›å»º<code>.lldbinit</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p></blockquote><ul><li><p>ç¬¬ä¸€ç§æ–¹æ³•<sup id="fnref:lldbinit1" class="footnote-ref"><a href="#fn:lldbinit1" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://blog.jetbrains.com/clion/2020/03/openjdk-with-clion/">[lldbinit1]</span></a></sup></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># åœ¨compile_commands.json åŒçº§ç›®å½•æ·»åŠ ç»è¿‡æµ‹è¯•æ— æ•ˆï¼Œéœ€è¦åœ¨ç³»ç»Ÿ `~/.lldbinit`ç›®å½•ä¸‹æ–°å»ºï¼ŒåŸå› æœªçŸ¥ã€‚</span><br>br <span class="hljs-built_in">set</span> -n main -o <span class="hljs-literal">true</span> -G <span class="hljs-literal">true</span> -C <span class="hljs-string">&quot;pro hand -p true -s false SIGSEGV SIGBUS&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¬¬äºŒç§æ–¹æ³•<sup id="fnref:lldbinit2" class="footnote-ref"><a href="#fn:lldbinit2" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://www.jianshu.com/p/e7891d25ba6a">[lldbinit2]</span></a></sup></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">#main.cæ˜¯æœ¬åœ°ç»å¯¹è·¯å¾„<br>breakpoint set --<span class="hljs-keyword">file</span> <span class="hljs-regexp">/Users/</span>..<span class="hljs-regexp">/openjdk/</span>src<span class="hljs-regexp">/java.base/</span>share<span class="hljs-regexp">/native/</span>launcher/main.c --line <span class="hljs-number">98</span> -C <span class="hljs-string">&quot;pro hand -p true -s false SIGSEGV SIGBUS&quot;</span> --auto-<span class="hljs-keyword">continue</span> <span class="hljs-keyword">true</span><br></code></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰ç§æ–¹æ³•<sup id="fnref:lldbinit3" class="footnote-ref"><a href="#fn:lldbinit3" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://jiawanggjia.github.io/post/openjdk-bian-yi-zhi-nan/">[lldbinit3]</span></a></sup> </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">break set -n <span class="hljs-selector-tag">main</span> -C &quot;process handle <span class="hljs-attr">--pass</span> true <span class="hljs-attr">--stop</span> false SIGSEGV&quot; -C &quot;process handle <span class="hljs-attr">--pass</span> true <span class="hljs-attr">--stop</span> false SIGBUS&quot;<br></code></pre></td></tr></table></figure></li></ul><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><blockquote><p>å…³äºåœ¨ç½‘ä¸Šçœ‹åˆ°å¦‚ä¸‹å‘½ä»¤</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">bash configure <span class="hljs-attribute">--with-debug-level</span>=slowdebug <span class="hljs-attribute">--with-jvm-variants</span>=server<br>make <span class="hljs-attribute">CONF</span>=macosx-x86_64-server-slowdebug compile-commands<br>make <span class="hljs-attribute">CONF</span>=macosx-x86_64-server-slowdebug<br></code></pre></td></tr></table></figure><p>å…³äºCONFå‚æ•°çš„ä½œç”¨ï¼Œå¦‚æœbuildç›®å½•ä¸‹é¢åªæœ‰ä¸€ä¸ªé…ç½®ä¿¡æ¯ï¼Œåˆ™å¯ä»¥çœç•¥ã€‚</p></blockquote><div class="note note-primary">            <p>è¡¥å……è¯´æ˜ <code>CONF=&lt;config pattern&gt; </code> </p><p><a href="https://hg.openjdk.org/jdk/jdk11/raw-file/tip/doc/building.html#using-multiple-configurations">ç‚¹å‡»æŸ¥çœ‹CONFå®˜æ–¹æ–‡æ¡£</a></p><p>å‡ºè‡ªæ–‡ä»¶ï¼š<code>./make/InitSupport.gmk</code>  ç¬¬245è¡Œ</p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/CONF=.png" alt="CONF="></p>          </div><section class="footnotes"><h2 id="Reference"> <a class="anchorjs-link anchorjs-link-left" aria-label="Anchor" data-anchorjs-icon="â¡" href="#Reference"  style="position: absolute; margin-left: -1em; padding-right: 0.5em;"> </a><a href="#Reference" class="headerlink" title="Reference"> </a>å‚è€ƒ</h2><div class="footnote-list"><ol><li><span id="fn:Targetsæ–‡æ¡£" class="footnote-text"><span><span style="font-weight: bold;font-style:italic;">Targetsæ–‡æ¡£ï¼š</span><a href="https://hg.openjdk.org/jdk/jdk11/raw-file/tip/doc/building.html#common-make-targets">https://hg.openjdk.org/jdk/jdk11/raw-file/tip/doc/building.html#common-make-targets</a><a href="#fnref:Targetsæ–‡æ¡£" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:jetbrains" class="footnote-text"><span><span style="font-weight: bold;font-style:italic;">jetbrainsï¼š</span><a href="https://www.jetbrains.com/help/fleet/generating-a-json-compilation-database.html">https://www.jetbrains.com/help/fleet/generating-a-json-compilation-database.html</a><a href="#fnref:jetbrains" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:å½©è›‹" class="footnote-text"><span><span style="font-weight: bold;font-style:italic;">å½©è›‹ï¼š</span>æ¥æºç½‘ç»œçš„æ¿€æ´»å·¥å…· <a href="https://ffff.ga/">https://ffff.ga/</a><a href="#fnref:å½©è›‹" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:graphvizå®˜ç½‘" class="footnote-text"><span><span style="font-weight: bold;font-style:italic;">graphvizå®˜ç½‘ï¼š</span><a href="https://graphviz.org/download/#mac">https://graphviz.org/download/#mac</a><a href="#fnref:graphvizå®˜ç½‘" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:lldbinit1" class="footnote-text"><span><span style="font-weight: bold;font-style:italic;">lldbinit1ï¼š</span><a href="https://blog.jetbrains.com/clion/2020/03/openjdk-with-clion/">https://blog.jetbrains.com/clion/2020/03/openjdk-with-clion/</a><a href="#fnref:lldbinit1" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:lldbinit2" class="footnote-text"><span><span style="font-weight: bold;font-style:italic;">lldbinit2ï¼š</span><a href="https://www.jianshu.com/p/e7891d25ba6a">https://www.jianshu.com/p/e7891d25ba6a</a><a href="#fnref:lldbinit2" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:lldbinit3" class="footnote-text"><span><span style="font-weight: bold;font-style:italic;">lldbinit3ï¼š</span><a href="https://jiawanggjia.github.io/post/openjdk-bian-yi-zhi-nan/">https://jiawanggjia.github.io/post/openjdk-bian-yi-zhi-nan/</a><a href="#fnref:lldbinit3" rev="footnote" class="footnote-backref">â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æºç </category>
      
      <category>OpenJDK</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æºç </tag>
      
      <tag>OpenJDK</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>idea æ¬¢è¿å±å¹•æœ€è¿‘çš„é¡¹ç›®å¼€å§‹ç»„ æ‰©å±•</title>
    <link href="/blog/a428dd75.html"/>
    <url>/blog/a428dd75.html</url>
    
    <content type="html"><![CDATA[<h1 id="idea-æ¬¢è¿ç•Œé¢é¡¹ç›®åˆ—è¡¨å³é”®æ‰“å¼€ç»ˆç«¯"><a href="#idea-æ¬¢è¿ç•Œé¢é¡¹ç›®åˆ—è¡¨å³é”®æ‰“å¼€ç»ˆç«¯" class="headerlink" title="idea æ¬¢è¿ç•Œé¢é¡¹ç›®åˆ—è¡¨å³é”®æ‰“å¼€ç»ˆç«¯"></a>idea æ¬¢è¿ç•Œé¢é¡¹ç›®åˆ—è¡¨å³é”®æ‰“å¼€ç»ˆç«¯</h1><h2 id="æ•ˆæœã€ä»“åº“"><a href="#æ•ˆæœã€ä»“åº“" class="headerlink" title="æ•ˆæœã€ä»“åº“"></a>æ•ˆæœã€ä»“åº“</h2><div class="note note-success">            <p>æ•ˆæœå›¾å¦‚ä¸‹ï¼Œ<a href="https://github.com/wdkGitHub/WelcomeScreenRecentProjectActionGroupExt">ä»“åº“åœ°å€:https://github.com/wdkGitHub/WelcomeScreenRecentProjectActionGroupExt</a> </p>          </div><a class="btn" href="https://github.com/wdkGitHub/WelcomeScreenRecentProjectActionGroupExt/releases/download/v1.0.1/WelcomeScreenRecentProjectActionGroupExt-1.0.1.jar"  title="ä¸‹è½½" target="_blank">æ’ä»¶å®‰è£…åŒ…</a><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/jetbrains/openInTerminal/1.png" alt="æ•ˆæœ"></p><h2 id="æ’ä»¶è¯´æ˜"><a href="#æ’ä»¶è¯´æ˜" class="headerlink" title="æ’ä»¶è¯´æ˜"></a>æ’ä»¶è¯´æ˜</h2><div class="note note-info">            <p><span style="padding: 14px;"></span>å¾ˆç®€å•çš„ä¸€å°åŠŸèƒ½ï¼Œä»…ä»…æ˜¯å¢åŠ ä¸€ä¸ªæ‰“å¼€ç»ˆç«¯çš„åŠŸèƒ½è€Œå·²ï¼Œå¯åœ¨è·å–é¡¹ç›®è·¯å¾„ä¸Šèµ°äº†å¾ˆå¤šå‘ï¼ŒæŸ¥é˜…äº†å¾ˆå¤šèµ„æ–™ã€‚åœ¨idea2023.1ç‰ˆæœ¬ä¹‹å‰ï¼Œè‡³å°‘2022.4è·å–Projectå¯¹è±¡ä»…ä»…éœ€è¦<code>RecentProjectsWelcomeScreenActionBase</code>ç±»æˆ– <code>AnActionEvent</code>ç±»çš„<code>getData</code>æ–¹æ³•åŠ ä¸Šå‡ ä¸ªå­—æ®µï¼ˆ<code>CommonDataKeys, PlatformDataKeys, LangDataKeysç±»å¸¸é‡</code>ï¼‰å³å¯è·å–ã€‚åœ¨2023ç‰ˆæœ¬åªèƒ½è·å–åˆ°<code>null</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-keyword">public</span> <span class="hljs-meta">@Nullable</span> &lt;T&gt; T <span class="hljs-title function_">getData</span><span class="hljs-params">(<span class="hljs-meta">@NotNull</span> DataKey&lt;T&gt; key)</span> &#123;<br><span class="hljs-keyword">return</span> getDataContext().getData(key);<br> &#125;<br></code></pre></td></tr></table></figure><p><span style="padding: 14px;"></span>æŸ¥é˜…äº†å®˜æ–¹æ–‡æ¡£ã€Googleã€ç™¾åº¦ç­‰ä¿¡æ¯ï¼Œå‡æ— æ³•è§£å†³è·å–Projectå¯¹è±¡çš„å­˜å‚¨è·¯å¾„ä¿¡æ¯ã€‚åœ¨2023.1ç‰ˆæœ¬æ‰©å±•ç»„<code>WelcomeScreenRecentProjectActionGroupçš„RecentProjectsWelcomeScreenActionBaseç­‰</code>é¡¹ç›®çš„ä»£ç å‡ç”¨kotliné‡å†™ï¼Œä¹Ÿè¾¹å­¦è¾¹ç”¨kotlinè¿›è¡Œæ‰©å±•ï¼Œæœ€ç»ˆå› æŠ€æœ¯æœ‰é™ä¹Ÿæœªèƒ½æ‰¾åˆ°è·å–Projectç›¸å…³ä¿¡æ¯çš„æ–¹æ³•ã€‚</p><p><span style="padding: 14px;"></span>çªç„¶æƒ³åˆ°kotlinå’ŒJavaæ˜¯å¯ä»¥äº’ç›¸è°ƒç”¨çš„ï¼Œäºæ˜¯æœ‰äº†å¦‚ä¸‹çš„ä»£ç ã€‚ç›¸å½“çš„ç®€é™‹ï¼Œä»…ä»…æ»¡è¶³è‡ªå·±çš„éœ€æ±‚ã€‚ä»Šåä¼šä¸ä¼šå®Œå–„å¹¶å‘å¸ƒåˆ°æ’ä»¶å¹³å°å¾…å®šã€‚</p>          </div> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//            // å‚è€ƒï¼š å¤åˆ¶è·¯å¾„çš„Class</span><br><span class="hljs-comment">//            Class&lt;?&gt; copyProjectPath = Class.forName (&quot;com.intellij.openapi.wm.impl.welcomeScreen.projectActions.CopyProjectPathAction&quot;);</span><br><span class="hljs-comment">//            Object object = copyProjectPath.getDeclaredConstructor ().newInstance ();</span><br><span class="hljs-comment">//            System.out.println (object.getClass ().getName ());</span><br><span class="hljs-comment">//            //è·å– çˆ¶ç±»</span><br><span class="hljs-comment">//            Class&lt;?&gt; superclass = copyProjectPath.getSuperclass ();</span><br><span class="hljs-comment">//            //è·å– çˆ¶ç±»ï¼šå†…éƒ¨ç±»</span><br><span class="hljs-comment">//            Class&lt;?&gt;[] declaredClasses = superclass.getDeclaredClasses ();</span><br><span class="hljs-comment">//            for (Class&lt;?&gt; declaredClass : declaredClasses) &#123;</span><br><span class="hljs-comment">//                System.out.println (&quot;çˆ¶ç±»---å†…éƒ¨ç±»ï¼š&quot; + declaredClass.getName ());</span><br><span class="hljs-comment">//            &#125;</span><br><br>            <span class="hljs-comment">//è·å–å¯ä»¥è·å– project çš„å†…éƒ¨ç±»</span><br>            Class&lt;?&gt; RecentProjectsWelcomeScreenActionBase$Companion = Class.forName (<span class="hljs-string">&quot;com.intellij.openapi.wm.impl.welcomeScreen.projectActions.RecentProjectsWelcomeScreenActionBase$Companion&quot;</span>);<br>            <span class="hljs-comment">//æ„é€ å™¨</span><br>            Constructor&lt;?&gt; CompanionConstructor = RecentProjectsWelcomeScreenActionBase$Companion.getDeclaredConstructor ();<br>            <span class="hljs-comment">//ä¿®æ”¹è®¿é—®æƒé™ private==ã€‹public</span><br>            CompanionConstructor.setAccessible (<span class="hljs-literal">true</span>);<br>            <span class="hljs-comment">//new</span><br>            <span class="hljs-type">Object</span> <span class="hljs-variable">companion</span> <span class="hljs-operator">=</span> CompanionConstructor.newInstance ();<br><br><span class="hljs-comment">//            //éå†å†…éƒ¨ç±»æ–¹æ³•</span><br><span class="hljs-comment">//            Method[] companionMethods = RecentProjectsWelcomeScreenActionBase$Companion.getDeclaredMethods ();</span><br><span class="hljs-comment">//            // å†…éƒ¨ç±» æ–¹æ³•ï½œç±»å‹</span><br><span class="hljs-comment">//            for (Method method : companionMethods) &#123;</span><br><span class="hljs-comment">//                String typeClassName = &quot;&quot;;</span><br><span class="hljs-comment">//                Class&lt;?&gt;[] parameterTypes = method.getParameterTypes ();</span><br><span class="hljs-comment">//                for (Class&lt;?&gt; parameterType : parameterTypes) &#123;</span><br><span class="hljs-comment">//                    typeClassName += parameterType.getName ();</span><br><span class="hljs-comment">//                &#125;</span><br><span class="hljs-comment">//                System.out.println (&quot;è·å–å†…éƒ¨ç±»--- æ–¹æ³•åï½œç±»å‹ï¼š&quot; + method.getName () + &quot;  |  &quot; + (&quot;&quot;.equals (typeClassName) ? &quot;æ— å‚&quot; : typeClassName));</span><br><span class="hljs-comment">//            &#125;</span><br><br>            <span class="hljs-comment">//è·å–å¯ä»¥è·å– project çš„å†…éƒ¨ç±»---  å…·ä½“æ–¹æ³•</span><br>            <span class="hljs-type">Method</span> <span class="hljs-variable">getSelectedItem$intellijPlatformIdeImpl</span> <span class="hljs-operator">=</span> RecentProjectsWelcomeScreenActionBase$Companion.getMethod (<span class="hljs-string">&quot;getSelectedItem$intellij_platform_ide_impl&quot;</span>, AnActionEvent.class);<br><br>            <span class="hljs-comment">// è·å– RecentProjectItem ï¼ˆkoltin å¯¹è±¡ï¼‰ï¼Œç»§ç»­ç”¨åå°„è·å–æƒ³ç”¨çš„å‚æ•°</span><br>            <span class="hljs-type">Object</span> <span class="hljs-variable">invoke</span> <span class="hljs-operator">=</span> getSelectedItem$intellijPlatformIdeImpl.invoke (companion, e);<br>            <span class="hljs-comment">// è·å–é¡¹ç›®æœ¬åœ°è·¯å¾„æ–¹æ³•</span><br>            <span class="hljs-type">Method</span> <span class="hljs-variable">getProjectPath</span> <span class="hljs-operator">=</span> invoke.getClass ().getMethod (<span class="hljs-string">&quot;getProjectPath&quot;</span>);<br>            <span class="hljs-comment">// è·å–è·¯å¾„</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">projectPath</span> <span class="hljs-operator">=</span> String.valueOf (getProjectPath.invoke (invoke));<br><span class="hljs-comment">//            System.out.println (&quot;è·¯å¾„ï¼š&quot; + projectPath);</span><br><br>            <span class="hljs-comment">//&lt;editor-fold desc=&quot;æ‰§è¡ŒMacå‘½ä»¤&quot;&gt;</span><br>            <span class="hljs-type">ProcessBuilder</span> <span class="hljs-variable">executeCommand</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProcessBuilder</span> (<span class="hljs-string">&quot;open&quot;</span>, <span class="hljs-string">&quot;-a&quot;</span>, <span class="hljs-string">&quot;/Applications/iTerm.app&quot;</span>, projectPath);<br>            executeCommand.start ();<br>            <span class="hljs-comment">//&lt;/editor-fold&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-keyword">com</span>.intellij.openapi.wm.impl.welcomeScreen.projectActions.CopyProjectPathAction<br>çˆ¶ç±»---å†…éƒ¨ç±»ï¼š<span class="hljs-keyword">com</span>.intellij.openapi.wm.impl.welcomeScreen.projectActions.RecentProjectsWelcomeScreenActionBase<span class="hljs-number">$Companion</span><br>è·å–å†…éƒ¨ç±»--- æ–¹æ³•åï½œç±»å‹ï¼šgetRECENT_PROJECT_TREE_KEY<span class="hljs-number">$intellij</span>_platform_ide_impl  |  æ— å‚<br>è·å–å†…éƒ¨ç±»--- æ–¹æ³•åï½œç±»å‹ï¼šgetTree  |  <span class="hljs-keyword">com</span>.intellij.openapi.actionSystem.AnActionEvent<br>è·å–å†…éƒ¨ç±»--- æ–¹æ³•åï½œç±»å‹ï¼šgetSelectedItem<span class="hljs-number">$intellij</span>_platform_ide_impl  |  <span class="hljs-keyword">com</span>.intellij.openapi.actionSystem.AnActionEvent<br>è·å–å†…éƒ¨ç±»--- æ–¹æ³•åï½œç±»å‹ï¼šgetRECENT_PROJECT_SELECTED_ITEM_KEY<span class="hljs-number">$intellij</span>_platform_ide_impl  |  æ— å‚<br>è·¯å¾„ï¼š/Users<span class="hljs-comment">/******/</span>Desktop/Temp/æœªå‘½åæ–‡ä»¶å¤¹<br></code></pre></td></tr></table></figure><h2 id="æ’ä»¶é¡¹ç›®ç»“æ„"><a href="#æ’ä»¶é¡¹ç›®ç»“æ„" class="headerlink" title="æ’ä»¶é¡¹ç›®ç»“æ„"></a>æ’ä»¶é¡¹ç›®ç»“æ„</h2><blockquote><p>ä½¿ç”¨ideaè‡ªå¸¦Plugin DevKit åˆ›å»ºé¡¹ç›®ï¼Œé»˜è®¤Gradle ä¸æ˜¯Groovyæœ‰äº›å¯æƒœã€‚</p><blockquote><p>plugin.xml ã€build.gradle æ–‡ä»¶æ¯”è¾ƒé‡è¦ã€‚</p></blockquote></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs .">â”œâ”€â”€ README.md<br>â”œâ”€â”€ build.gradle.kts<br>â”œâ”€â”€ gradle<br>â”‚Â Â  â””â”€â”€ wrapper<br>â”‚Â Â      â”œâ”€â”€ gradle-wrapper.jar<br>â”‚Â Â      â””â”€â”€ gradle-wrapper.properties<br>â”œâ”€â”€ gradle.properties<br>â”œâ”€â”€ gradlew<br>â”œâ”€â”€ gradlew.bat<br>â”œâ”€â”€ settings.gradle.kts<br>â””â”€â”€ src<br>    â””â”€â”€ main<br>        â”œâ”€â”€ java<br>        â”œâ”€â”€ kotlin<br>        â””â”€â”€ resources<br>            â””â”€â”€ META-INF<br>                â”œâ”€â”€ plugin.xml     #æ’ä»¶é…ç½®æ–‡ä»¶<br>                â””â”€â”€ pluginIcon.svg #æ’ä»¶å›¾æ ‡<br></code></pre></td></tr></table></figure><blockquote><p>å¢åŠ æ‰©å±•ç‚¹</p></blockquote><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/jetbrains/openInTerminal/2.png" alt="æ–°å¢æ‰©å±•ç‚¹"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/jetbrains/openInTerminal/3.png" alt="æ·»åŠ é”šç‚¹"></div></div></div>]]></content>
    
    
    <categories>
      
      <category>Jetbrains</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Jetbrains</tag>
      
      <tag>Plugins</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>IntelliJ IDEA æ’ä»¶---æ‰“å¼€æœ¬æœºTypora</title>
    <link href="/blog/78bb0db.html"/>
    <url>/blog/78bb0db.html</url>
    
    <content type="html"><![CDATA[<h1 id="idea-native-markdown-plugin"><a href="#idea-native-markdown-plugin" class="headerlink" title="idea-native-markdown-plugin"></a>idea-native-markdown-plugin</h1><p><a href="https://plugins.jetbrains.com/docs/intellij/extension-point-list.html"> Extension Points æ–‡æ¡£</a></p><div class="note note-primary">            <p>éœ€æ±‚ï¼šéœ€è¦åœ¨é¡¹ç›®çª—å£ä¸­å¿«æ·ä½¿ç”¨å¤–éƒ¨ Markdown è½¯ä»¶æ‰“å¼€æ–‡ä»¶ã€‚</p><p>æ•ˆæœå›¾å¦‚ä¸‹ï¼š</p>          </div><blockquote><p><a href="https://github.com/wdkGitHub/idea-native-markdown-plugin">GitHubåœ°å€</a></p><blockquote><p><a href="https://github.com/wdkGitHub/idea-native-markdown-plugin/releases/download/v0.0.1-Alpha/idea-open-typora-plugin-0.0.1-Alpha.jar">v0.0.1-Alpha</a><br>  é€‚é… 2022.4 ï½ 2023.*  ç›®å‰ä»…æ”¯æŒMacç³»ç»Ÿã€‚  </p></blockquote></blockquote><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/jetbrains/idea-native-markdown-plugin/1.png" alt="1" style="zoom: 50%;" />]]></content>
    
    
    <categories>
      
      <category>Jetbrains</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Jetbrains</tag>
      
      <tag>Plugins</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo+Typora+PicGo+äº‘å­˜å‚¨å†™ä½œç¯å¢ƒæ­å»º</title>
    <link href="/blog/c34ef771.html"/>
    <url>/blog/c34ef771.html</url>
    
    <content type="html"><![CDATA[<h1 id="å†™ä½œç¯å¢ƒé…ç½®"><a href="#å†™ä½œç¯å¢ƒé…ç½®" class="headerlink" title="å†™ä½œç¯å¢ƒé…ç½®"></a>å†™ä½œç¯å¢ƒé…ç½®</h1><h2 id="å¿…é¡»è½¯ä»¶"><a href="#å¿…é¡»è½¯ä»¶" class="headerlink" title="å¿…é¡»è½¯ä»¶"></a>å¿…é¡»è½¯ä»¶</h2><blockquote><ul><li>Typora</li><li>PicGo</li></ul></blockquote><h2 id="Typora-é…ç½®"><a href="#Typora-é…ç½®" class="headerlink" title="Typora é…ç½®"></a>Typora é…ç½®</h2><h3 id="markdown-Front-matter-é…ç½®"><a href="#markdown-Front-matter-é…ç½®" class="headerlink" title="markdown Front-matter é…ç½®"></a>markdown Front-matter é…ç½®</h3><div class="note note-warning">            <blockquote><p>å¢åŠ å¦‚ä¸‹é…ç½®</p></blockquote><p>â€‹æ³¨æ„ç›¸å¯¹è·¯å¾„é…ç½®ï¼Œ <code>.</code>ä»£è¡¨æ­¤æ—¶æ˜¯åœ¨ <code>_post</code>æ–‡ä»¶å¤¹ä¸‹ã€‚ </p>          </div><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># é…ç½®å½“å‰markdownæ–‡ä»¶ Typoraæ­¤æ—¶çš„æ ¹ç›®å½•ï¼ˆç²˜è´´å›¾ç‰‡ï¼‰</span><br><span class="hljs-attr">typora-root-url:</span> <span class="hljs-string">../</span><br><span class="hljs-comment"># å›¾ç‰‡æ–‡ä»¶å­˜æ”¾ä½ç½®</span><br><span class="hljs-attr">typora-copy-images-to:</span> <span class="hljs-string">../mk-images/post</span><br></code></pre></td></tr></table></figure><h3 id="Typoraä¸Šä¼ é…ç½®"><a href="#Typoraä¸Šä¼ é…ç½®" class="headerlink" title="Typoraä¸Šä¼ é…ç½®"></a>Typoraä¸Šä¼ é…ç½®</h3><blockquote><p><a href="https://support.typora.io/Images/#preferred-image-syntax">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/blog/write_env/1.png" alt="Typoraé…ç½®" style="zoom: 33%;" /><h2 id="PicGo-é…ç½®"><a href="#PicGo-é…ç½®" class="headerlink" title="PicGo é…ç½®"></a>PicGo é…ç½®</h2><h3 id="å­˜å‚¨äº‘è®¾ç½®"><a href="#å­˜å‚¨äº‘è®¾ç½®" class="headerlink" title="å­˜å‚¨äº‘è®¾ç½®"></a>å­˜å‚¨äº‘è®¾ç½®</h3><blockquote><ul><li>é“¾æ¥æ ¼å¼é€‰æ‹©URL</li><li>å¡«å†™ è…¾è®¯COSé…ç½®ä¿¡æ¯</li></ul></blockquote><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/blog/write_env/2.png" alt="è…¾è®¯äº‘COS" style="zoom:50%;" /><h3 id="dir-prefix-æ’ä»¶é…ç½®"><a href="#dir-prefix-æ’ä»¶é…ç½®" class="headerlink" title="dir-prefix æ’ä»¶é…ç½®"></a>dir-prefix æ’ä»¶é…ç½®</h3><blockquote><p>å®‰è£…æ’ä»¶PicGoçš„æ’ä»¶ ï¼šdir-prefix</p><p>é…ç½®æ’ä»¶å‚æ•°ï¼Œç»†èŠ‚æŸ¥çœ‹<a href="https://github.com/karboom/picgo-plugin-dir-prefix">æ’ä»¶æ–‡æ¡£</a></p><blockquote><p>ä¾‹å¦‚ï¼š </p><ul><li>æœ¬åœ°è·¯å¾„  ï¼š<code>/a/b/c/d/e.md</code></li><li>COS ä¸Šä¼ è·¯å¾„é…ç½®ä¸ºï¼š  blog&#x2F;</li><li>dir-prefixæ’ä»¶é…ç½®ï¼š<code>/a/b/c/</code></li><li>æœ€ç»ˆä¸Šä¼ åˆ°COSï¼š <ul><li>å­˜å‚¨è·¯å¾„ï¼šblog&#x2F;d&#x2F;image.png</li><li>URL :   åˆ†é…çš„åŸŸå&#x2F;blog&#x2F;d&#x2F;image.png</li></ul></li></ul></blockquote></blockquote><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/blog/write_env/3.png" alt="PicGoæœç´¢æ’ä»¶dir-prefix"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/blog/write_env/4.png" alt="dir-prefix-pluginé…ç½®"></div></div></div>]]></content>
    
    
    <categories>
      
      <category>Blog</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Typora</tag>
      
      <tag>PicGo</tag>
      
      <tag>è…¾è®¯COS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è«æ„åƒé‡Œè·¯    è‡ªæœ‰ä¸œé£æ¥</title>
    <link href="/blog/e010241.html"/>
    <url>/blog/e010241.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="c524eea2e513f6fc8912ee9bab0b070429ca419cea75338b33201abcec9bf714">7e44ee3df96620f4b1f66a5329203c24331765dde4ffea944d5a6299f61ac0e16a89648368b07e86177c7a47e6f1b9825899bceeff5e119288829c2a311c086cc5b0d77fe66e9cbb58c38fd0d53e76d78abcd517917350dbad708e1430f291796ea6f1ef76d42b7c65a1c8b561b4ca181ebcdc882e40cfa6338f8fd37220bc0947975845417a29a0e46930ebe4f15343b2a6ea3614a479a5da68ec3095815f94e57b724988a5d0affd33b3f6bdbe8e2098708055555d3cbfeae0c6fb9de757c10df96a6ecf37e455b26c3b493977e0c218de41682504f653722220b87248941bfbdd91ea04daead802b6fadd14d46292c61f474e1911f63d0cee5ee1f5752031982a2263e7396c454d1d1fb3122526f879e1d702891b0572c388a8875b592ab8</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">ä½ æ˜¯è°ï¼Ÿæˆ‘åˆæ˜¯è°ï¼Ÿ.......</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>Cipher</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cipher</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginx configure Commond</title>
    <link href="/blog/a321d8ce.html"/>
    <url>/blog/a321d8ce.html</url>
    
    <content type="html"><![CDATA[<h1 id="Nginx-configure"><a href="#Nginx-configure" class="headerlink" title="Nginx configure"></a>Nginx configure</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><br>--help                             <span class="hljs-built_in">print</span> this message<br><br><span class="hljs-attribute">--prefix</span>=PATH                      <span class="hljs-built_in">set</span> installation<span class="hljs-built_in"> prefix</span><br><span class="hljs-built_in"></span><span class="hljs-attribute">--sbin-path</span>=PATH                   <span class="hljs-built_in">set</span> nginx binary pathname<br><span class="hljs-attribute">--modules-path</span>=PATH                <span class="hljs-built_in">set</span> modules path<br><span class="hljs-attribute">--conf-path</span>=PATH                   <span class="hljs-built_in">set</span> nginx.conf pathname<br><span class="hljs-attribute">--error-log-path</span>=PATH              <span class="hljs-built_in">set</span> <span class="hljs-built_in">error</span> log pathname<br><span class="hljs-attribute">--pid-path</span>=PATH                    <span class="hljs-built_in">set</span> nginx.pid pathname<br><span class="hljs-attribute">--lock-path</span>=PATH                   <span class="hljs-built_in">set</span> nginx.lock pathname<br><br><span class="hljs-attribute">--user</span>=USER                        <span class="hljs-built_in">set</span> non-privileged<span class="hljs-built_in"> user </span><span class="hljs-keyword">for</span><br>                                   worker processes<br><span class="hljs-attribute">--group</span>=GROUP                      <span class="hljs-built_in">set</span> non-privileged<span class="hljs-built_in"> group </span><span class="hljs-keyword">for</span><br>                                   worker processes<br><br><span class="hljs-attribute">--build</span>=NAME                       <span class="hljs-built_in">set</span> build name<br><span class="hljs-attribute">--builddir</span>=DIR                     <span class="hljs-built_in">set</span> build directory<br><br>--with-select_module               <span class="hljs-built_in">enable</span> select module<br>--without-select_module            <span class="hljs-built_in">disable</span> select module<br>--with-poll_module                 <span class="hljs-built_in">enable</span> poll module<br>--without-poll_module              <span class="hljs-built_in">disable</span> poll module<br><br>--with-threads                     <span class="hljs-built_in">enable</span> thread<span class="hljs-built_in"> pool </span>support<br><br>--with-file-aio                    <span class="hljs-built_in">enable</span> file AIO support<br><br>--with-http_ssl_module             <span class="hljs-built_in">enable</span> ngx_http_ssl_module<br>--with-http_v2_module              <span class="hljs-built_in">enable</span> ngx_http_v2_module<br>--with-http_realip_module          <span class="hljs-built_in">enable</span> ngx_http_realip_module<br>--with-http_addition_module        <span class="hljs-built_in">enable</span> ngx_http_addition_module<br>--with-http_xslt_module            <span class="hljs-built_in">enable</span> ngx_http_xslt_module<br><span class="hljs-attribute">--with-http_xslt_module</span>=dynamic    <span class="hljs-built_in">enable</span> dynamic ngx_http_xslt_module<br>--with-http_image_filter_module    <span class="hljs-built_in">enable</span> ngx_http_image_filter_module<br><span class="hljs-attribute">--with-http_image_filter_module</span>=dynamic<br>                                   <span class="hljs-built_in">enable</span> dynamic ngx_http_image_filter_module<br>--with-http_geoip_module           <span class="hljs-built_in">enable</span> ngx_http_geoip_module<br><span class="hljs-attribute">--with-http_geoip_module</span>=dynamic   <span class="hljs-built_in">enable</span> dynamic ngx_http_geoip_module<br>--with-http_sub_module             <span class="hljs-built_in">enable</span> ngx_http_sub_module<br>--with-http_dav_module             <span class="hljs-built_in">enable</span> ngx_http_dav_module<br>--with-http_flv_module             <span class="hljs-built_in">enable</span> ngx_http_flv_module<br>--with-http_mp4_module             <span class="hljs-built_in">enable</span> ngx_http_mp4_module<br>--with-http_gunzip_module          <span class="hljs-built_in">enable</span> ngx_http_gunzip_module<br>--with-http_gzip_static_module     <span class="hljs-built_in">enable</span> ngx_http_gzip_static_module<br>--with-http_auth_request_module    <span class="hljs-built_in">enable</span> ngx_http_auth_request_module<br>--with-http_random_index_module    <span class="hljs-built_in">enable</span> ngx_http_random_index_module<br>--with-http_secure_link_module     <span class="hljs-built_in">enable</span> ngx_http_secure_link_module<br>--with-http_degradation_module     <span class="hljs-built_in">enable</span> ngx_http_degradation_module<br>--with-http_slice_module           <span class="hljs-built_in">enable</span> ngx_http_slice_module<br>--with-http_stub_status_module     <span class="hljs-built_in">enable</span> ngx_http_stub_status_module<br><br>--without-http_charset_module      <span class="hljs-built_in">disable</span> ngx_http_charset_module<br>--without-http_gzip_module         <span class="hljs-built_in">disable</span> ngx_http_gzip_module<br>--without-http_ssi_module          <span class="hljs-built_in">disable</span> ngx_http_ssi_module<br>--without-http_userid_module       <span class="hljs-built_in">disable</span> ngx_http_userid_module<br>--without-http_access_module       <span class="hljs-built_in">disable</span> ngx_http_access_module<br>--without-http_auth_basic_module   <span class="hljs-built_in">disable</span> ngx_http_auth_basic_module<br>--without-http_mirror_module       <span class="hljs-built_in">disable</span> ngx_http_mirror_module<br>--without-http_autoindex_module    <span class="hljs-built_in">disable</span> ngx_http_autoindex_module<br>--without-http_geo_module          <span class="hljs-built_in">disable</span> ngx_http_geo_module<br>--without-http_map_module          <span class="hljs-built_in">disable</span> ngx_http_map_module<br>--without-http_split_clients_module <span class="hljs-built_in">disable</span> ngx_http_split_clients_module<br>--without-http_referer_module      <span class="hljs-built_in">disable</span> ngx_http_referer_module<br>--without-http_rewrite_module      <span class="hljs-built_in">disable</span> ngx_http_rewrite_module<br>--without-http_proxy_module        <span class="hljs-built_in">disable</span> ngx_http_proxy_module<br>--without-http_fastcgi_module      <span class="hljs-built_in">disable</span> ngx_http_fastcgi_module<br>--without-http_uwsgi_module        <span class="hljs-built_in">disable</span> ngx_http_uwsgi_module<br>--without-http_scgi_module         <span class="hljs-built_in">disable</span> ngx_http_scgi_module<br>--without-http_grpc_module         <span class="hljs-built_in">disable</span> ngx_http_grpc_module<br>--without-http_memcached_module    <span class="hljs-built_in">disable</span> ngx_http_memcached_module<br>--without-http_limit_conn_module   <span class="hljs-built_in">disable</span> ngx_http_limit_conn_module<br>--without-http_limit_req_module    <span class="hljs-built_in">disable</span> ngx_http_limit_req_module<br>--without-http_empty_gif_module    <span class="hljs-built_in">disable</span> ngx_http_empty_gif_module<br>--without-http_browser_module      <span class="hljs-built_in">disable</span> ngx_http_browser_module<br>--without-http_upstream_hash_module<br>                                   <span class="hljs-built_in">disable</span> ngx_http_upstream_hash_module<br>--without-http_upstream_ip_hash_module<br>                                   <span class="hljs-built_in">disable</span> ngx_http_upstream_ip_hash_module<br>--without-http_upstream_least_conn_module<br>                                   <span class="hljs-built_in">disable</span> ngx_http_upstream_least_conn_module<br>--without-http_upstream_random_module<br>                                   <span class="hljs-built_in">disable</span> ngx_http_upstream_random_module<br>--without-http_upstream_keepalive_module<br>                                   <span class="hljs-built_in">disable</span> ngx_http_upstream_keepalive_module<br>--without-http_upstream_zone_module<br>                                   <span class="hljs-built_in">disable</span> ngx_http_upstream_zone_module<br><br>--with-http_perl_module            <span class="hljs-built_in">enable</span> ngx_http_perl_module<br><span class="hljs-attribute">--with-http_perl_module</span>=dynamic    <span class="hljs-built_in">enable</span> dynamic ngx_http_perl_module<br><span class="hljs-attribute">--with-perl_modules_path</span>=PATH      <span class="hljs-built_in">set</span> Perl modules path<br><span class="hljs-attribute">--with-perl</span>=PATH                   <span class="hljs-built_in">set</span> perl binary pathname<br><br><span class="hljs-attribute">--http-log-path</span>=PATH               <span class="hljs-built_in">set</span> http access log pathname<br><span class="hljs-attribute">--http-client-body-temp-path</span>=PATH  <span class="hljs-built_in">set</span> path <span class="hljs-keyword">to</span> store<br>                                   http<span class="hljs-built_in"> client </span>request body temporary files<br><span class="hljs-attribute">--http-proxy-temp-path</span>=PATH        <span class="hljs-built_in">set</span> path <span class="hljs-keyword">to</span> store<br>                                   http<span class="hljs-built_in"> proxy </span>temporary files<br><span class="hljs-attribute">--http-fastcgi-temp-path</span>=PATH      <span class="hljs-built_in">set</span> path <span class="hljs-keyword">to</span> store<br>                                   http fastcgi temporary files<br><span class="hljs-attribute">--http-uwsgi-temp-path</span>=PATH        <span class="hljs-built_in">set</span> path <span class="hljs-keyword">to</span> store<br>                                   http uwsgi temporary files<br><span class="hljs-attribute">--http-scgi-temp-path</span>=PATH         <span class="hljs-built_in">set</span> path <span class="hljs-keyword">to</span> store<br>                                   http scgi temporary files<br><br>--without-http                     <span class="hljs-built_in">disable</span> HTTP<span class="hljs-built_in"> server</span><br><span class="hljs-built_in"></span>--without-http-cache               <span class="hljs-built_in">disable</span> HTTP cache<br><br>--with-mail                        <span class="hljs-built_in">enable</span> POP3/IMAP4/SMTP<span class="hljs-built_in"> proxy </span>module<br><span class="hljs-attribute">--with-mail</span>=dynamic                <span class="hljs-built_in">enable</span> dynamic POP3/IMAP4/SMTP<span class="hljs-built_in"> proxy </span>module<br>--with-mail_ssl_module             <span class="hljs-built_in">enable</span> ngx_mail_ssl_module<br>--without-mail_pop3_module         <span class="hljs-built_in">disable</span> ngx_mail_pop3_module<br>--without-mail_imap_module         <span class="hljs-built_in">disable</span> ngx_mail_imap_module<br>--without-mail_smtp_module         <span class="hljs-built_in">disable</span> ngx_mail_smtp_module<br><br>--with-stream                      <span class="hljs-built_in">enable</span> TCP/UDP<span class="hljs-built_in"> proxy </span>module<br><span class="hljs-attribute">--with-stream</span>=dynamic              <span class="hljs-built_in">enable</span> dynamic TCP/UDP<span class="hljs-built_in"> proxy </span>module<br>--with-stream_ssl_module           <span class="hljs-built_in">enable</span> ngx_stream_ssl_module<br>--with-stream_realip_module        <span class="hljs-built_in">enable</span> ngx_stream_realip_module<br>--with-stream_geoip_module         <span class="hljs-built_in">enable</span> ngx_stream_geoip_module<br><span class="hljs-attribute">--with-stream_geoip_module</span>=dynamic <span class="hljs-built_in">enable</span> dynamic ngx_stream_geoip_module<br>--with-stream_ssl_preread_module   <span class="hljs-built_in">enable</span> ngx_stream_ssl_preread_module<br>--without-stream_limit_conn_module <span class="hljs-built_in">disable</span> ngx_stream_limit_conn_module<br>--without-stream_access_module     <span class="hljs-built_in">disable</span> ngx_stream_access_module<br>--without-stream_geo_module        <span class="hljs-built_in">disable</span> ngx_stream_geo_module<br>--without-stream_map_module        <span class="hljs-built_in">disable</span> ngx_stream_map_module<br>--without-stream_split_clients_module<br>                                   <span class="hljs-built_in">disable</span> ngx_stream_split_clients_module<br>--without-stream_return_module     <span class="hljs-built_in">disable</span> ngx_stream_return_module<br>--without-stream_set_module        <span class="hljs-built_in">disable</span> ngx_stream_set_module<br>--without-stream_upstream_hash_module<br>                                   <span class="hljs-built_in">disable</span> ngx_stream_upstream_hash_module<br>--without-stream_upstream_least_conn_module<br>                                   <span class="hljs-built_in">disable</span> ngx_stream_upstream_least_conn_module<br>--without-stream_upstream_random_module<br>                                   <span class="hljs-built_in">disable</span> ngx_stream_upstream_random_module<br>--without-stream_upstream_zone_module<br>                                   <span class="hljs-built_in">disable</span> ngx_stream_upstream_zone_module<br><br>--with-google_perftools_module     <span class="hljs-built_in">enable</span> ngx_google_perftools_module<br>--with-cpp_test_module             <span class="hljs-built_in">enable</span> ngx_cpp_test_module<br><br><span class="hljs-attribute">--add-module</span>=PATH                  <span class="hljs-built_in">enable</span> external module<br><span class="hljs-attribute">--add-dynamic-module</span>=PATH          <span class="hljs-built_in">enable</span> dynamic external module<br><br>--with-compat                      dynamic modules compatibility<br><br><span class="hljs-attribute">--with-cc</span>=PATH                     <span class="hljs-built_in">set</span> C compiler pathname<br><span class="hljs-attribute">--with-cpp</span>=PATH                    <span class="hljs-built_in">set</span> C preprocessor pathname<br><span class="hljs-attribute">--with-cc-opt</span>=OPTIONS              <span class="hljs-built_in">set</span> additional C compiler options<br><span class="hljs-attribute">--with-ld-opt</span>=OPTIONS              <span class="hljs-built_in">set</span> additional linker options<br><span class="hljs-attribute">--with-cpu-opt</span>=CPU                 build <span class="hljs-keyword">for</span> the specified CPU, valid values:<br>                                   pentium, pentiumpro, pentium3, pentium4,<br>                                   athlon, opteron, sparc32, sparc64, ppc64<br><br>--without-pcre                     <span class="hljs-built_in">disable</span> PCRE library usage<br>--with-pcre                        force PCRE library usage<br><span class="hljs-attribute">--with-pcre</span>=DIR                    <span class="hljs-built_in">set</span> path <span class="hljs-keyword">to</span> PCRE library sources<br><span class="hljs-attribute">--with-pcre-opt</span>=OPTIONS            <span class="hljs-built_in">set</span> additional build options <span class="hljs-keyword">for</span> PCRE<br>--with-pcre-jit                    build PCRE with JIT compilation support<br>--without-pcre2                    <span class="hljs-keyword">do</span> <span class="hljs-keyword">not</span> use PCRE2 library<br><br><span class="hljs-attribute">--with-zlib</span>=DIR                    <span class="hljs-built_in">set</span> path <span class="hljs-keyword">to</span> zlib library sources<br><span class="hljs-attribute">--with-zlib-opt</span>=OPTIONS            <span class="hljs-built_in">set</span> additional build options <span class="hljs-keyword">for</span> zlib<br><span class="hljs-attribute">--with-zlib-asm</span>=CPU                use zlib assembler sources optimized<br>                                   <span class="hljs-keyword">for</span> the specified CPU, valid values:<br>                                   pentium, pentiumpro<br><br>--with-libatomic                   force libatomic_ops library usage<br><span class="hljs-attribute">--with-libatomic</span>=DIR               <span class="hljs-built_in">set</span> path <span class="hljs-keyword">to</span> libatomic_ops library sources<br><br><span class="hljs-attribute">--with-openssl</span>=DIR                 <span class="hljs-built_in">set</span> path <span class="hljs-keyword">to</span> OpenSSL library sources<br><span class="hljs-attribute">--with-openssl-opt</span>=OPTIONS         <span class="hljs-built_in">set</span> additional build options <span class="hljs-keyword">for</span> OpenSSL<br><br>--with-<span class="hljs-built_in">debug</span>                       <span class="hljs-built_in">enable</span> <span class="hljs-built_in">debug</span><span class="hljs-built_in"> logging</span><br><span class="hljs-built_in"></span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Doc</category>
      
      <category>Nginx</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Failure to find net.sf.json-lib:json-lib:jar:JDK15:</title>
    <link href="/blog/624fa423.html"/>
    <url>/blog/624fa423.html</url>
    
    <content type="html"><![CDATA[<h1 id="Failure-to-find-net-sf-json-lib-json-lib-jar-JDK15"><a href="#Failure-to-find-net-sf-json-lib-json-lib-jar-JDK15" class="headerlink" title="Failure to find net.sf.json-lib:json-lib:jar:JDK15"></a>Failure to find net.sf.json-lib:json-lib:jar:JDK15</h1><h2 id="Mac-ç³»ç»ŸæŠ¥é”™ï¼š"><a href="#Mac-ç³»ç»ŸæŠ¥é”™ï¼š" class="headerlink" title="Mac ç³»ç»ŸæŠ¥é”™ï¼š"></a>Mac ç³»ç»ŸæŠ¥é”™ï¼š</h2><div class="note note-danger">            <p>Failure to find net.sf.json-lib:json-lib:jar:JDK15:</p>          </div><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stata">[<span class="hljs-keyword">ERROR</span>] Failed to execute goal <span class="hljs-keyword">on</span> project BI: Could not resolve dependencies <span class="hljs-keyword">for</span> project ******* : Failure to find <span class="hljs-keyword">net</span>.sf.json-lib:json-lib:jar:JDK15:2.4 <span class="hljs-keyword">in</span> https:<span class="hljs-comment">//repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -&gt; [Help 1]</span><br>[<span class="hljs-keyword">ERROR</span>] <br>[<span class="hljs-keyword">ERROR</span>] To see the full <span class="hljs-keyword">stack</span> trace of the errors, re-<span class="hljs-keyword">run</span> Maven with the -<span class="hljs-keyword">e</span> switch.<br>[<span class="hljs-keyword">ERROR</span>] Re-<span class="hljs-keyword">run</span> Maven using the -X switch to enable full debug logging.<br>[<span class="hljs-keyword">ERROR</span>] <br>[<span class="hljs-keyword">ERROR</span>] <span class="hljs-keyword">For</span> <span class="hljs-keyword">more</span> information <span class="hljs-keyword">about</span> the errors and possible solutions, please <span class="hljs-keyword">read</span> the following articles:<br>[<span class="hljs-keyword">ERROR</span>] [<span class="hljs-keyword">Help</span> 1] http:<span class="hljs-comment">//cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException</span><br></code></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹å¼"><a href="#è§£å†³æ–¹å¼" class="headerlink" title="è§£å†³æ–¹å¼"></a>è§£å†³æ–¹å¼</h2><div class="note note-success">            <p>ä¿®æ”¹Pomæ–‡ä»¶ï¼Œ<code> &lt;classifier&gt;JDK15&lt;/classifier&gt;</code> ä¸ºå€¼ä¿®æ”¹ä¸ºå°å†™<code> &lt;classifier&gt;jdk15&lt;/classifier&gt;</code><br>åˆ™å¯ä»¥æ­£å¸¸ä¸‹è½½jaråŒ…ï¼Œå¤§å°å†™è‡ªæµ‹åªå½±å“ç¬¬ä¸€æ¬¡ä¸‹è½½ï¼Œè‡ªè¡Œå†³å®šæ˜¯å¦ä¿ç•™ä¿®æ”¹ã€‚</p>          </div><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>net.sf.json-lib<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>json-lib<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>JDK15<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Maven</category>
      
      <category>Bug</category>
      
      <category>Maven</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Maven</tag>
      
      <tag>net.sf.json-lib</tag>
      
      <tag>Bug</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>svnè¿ç§»git</title>
    <link href="/blog/fc1b26ef.html"/>
    <url>/blog/fc1b26ef.html</url>
    
    <content type="html"><![CDATA[<h1 id="gitä»“åº“è¿ç§»"><a href="#gitä»“åº“è¿ç§»" class="headerlink" title="gitä»“åº“è¿ç§»"></a>gitä»“åº“è¿ç§»</h1><blockquote><p>å°†svnè½¬ç§»åˆ°gitå¹¶ä¿ç•™æäº¤è®°å½•</p></blockquote><ol><li>ç¡®å®šsvnæ‰€æœ‰ç”¨æˆ·</li></ol> <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">svn <span class="hljs-built_in">log</span> --xml | <span class="hljs-keyword">grep</span> author | <span class="hljs-keyword">sort</span> -<span class="hljs-keyword">u</span> | <span class="hljs-keyword">perl</span> -<span class="hljs-keyword">pe</span> <span class="hljs-string">&#x27;s/.*&gt;(.*?)&lt;.*/$1 = /&#x27;</span> &gt;user.txt<br></code></pre></td></tr></table></figure><blockquote><p>ç¤ºä¾‹ï¼šsvn&#x3D;git&lt;email&gt;<br>name &#x3D; name&lt;<a href="mailto:&#49;&#50;&#51;&#x34;&#53;&#54;&#64;&#49;&#54;&#51;&#x2e;&#99;&#x6f;&#109;">&#49;&#50;&#51;&#x34;&#53;&#54;&#64;&#49;&#54;&#51;&#x2e;&#99;&#x6f;&#109;</a>&gt;</p></blockquote><ol start="2"><li>æ‹‰å–svnä»£ç ï¼Œå¹¶è½¬æ¢æˆgitç‰ˆæœ¬æ§åˆ¶</li></ol> <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">git svn clone  <span class="hljs-attr">--no-metadata</span> <span class="hljs-attr">--no-minimize-url</span> <span class="hljs-attr">--authors-file</span>=users<span class="hljs-selector-class">.txt</span>  <span class="hljs-selector-attr">[svn url]</span>  <span class="hljs-selector-attr">[local file name]</span><br>#ç¤ºä¾‹:<br>git svn clone  <span class="hljs-attr">--no-metadata</span> <span class="hljs-attr">--no-minimize-url</span> <span class="hljs-attr">--authors-file</span>=users<span class="hljs-selector-class">.txt</span>  https:<span class="hljs-comment">//127.0.0.01/svn/repo/code  iotcode</span><br></code></pre></td></tr></table></figure><ol start="3"><li><p>æ¸…ç†svnä¿¡æ¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ <a href="https://git-scm.com/book/zh/v2/Git-%E4%B8%8E%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F-%E8%BF%81%E7%A7%BB%E5%88%B0-Git">gitæ•™ç¨‹</a> ã€‚<em>æ³¨ï¼šä¹Ÿè®¸ä¸éœ€è¦æ¸…ç†</em></p></li><li><p>æœ¬åœ°ä»“åº“æ·»åŠ æ·»åŠ è¿œç¨‹ä»“åº“</p></li></ol><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment"># æ·»åŠ </span><br>git remote <span class="hljs-keyword">add </span>[<span class="hljs-keyword">origin </span>name] [url]<br><span class="hljs-comment"># æŸ¥çœ‹</span><br>git remote -v<br></code></pre></td></tr></table></figure><ol start="5"><li><p>æ‹‰å–è¿œç¨‹ä»“åº“ï¼Œå› ä¸ºæœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“æ— äº¤é›†ï¼Œéœ€è¦ä½¿ç”¨<code>git pull origin master --allow-unrelated-histories</code> æ‹‰å–ä»£ç ã€‚<a href="https://blog.csdn.net/lindexi_gd/article/details/52554159">å‚è€ƒ</a></p></li><li><p>æ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨<code>git push origin --all</code></p></li></ol><blockquote><p><a href="https://github.wangkaimin.com/2018/09/05/git-svn-mac-error.html">Macç³»ç»Ÿï¼Œç¬¬äºŒæ­¥å¼‚å¸¸å‚è€ƒ</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Oracleä¸å¯è§å­—ç¬¦</title>
    <link href="/blog/8e3d9981.html"/>
    <url>/blog/8e3d9981.html</url>
    
    <content type="html"><![CDATA[<h1 id="Oracle-ä¸å¯è§å­—ç¬¦å¤„ç†"><a href="#Oracle-ä¸å¯è§å­—ç¬¦å¤„ç†" class="headerlink" title="Oracle ä¸å¯è§å­—ç¬¦å¤„ç†"></a>Oracle ä¸å¯è§å­—ç¬¦å¤„ç†</h1><h2 id="1-å¤„ç†è¿‡ç¨‹"><a href="#1-å¤„ç†è¿‡ç¨‹" class="headerlink" title="1. å¤„ç†è¿‡ç¨‹"></a>1. å¤„ç†è¿‡ç¨‹</h2><ol><li>è¡¨ç»“æ„</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> telphone_temp_20190821(<br>    telnum varchar2(<span class="hljs-number">32</span>)<br>);<br></code></pre></td></tr></table></figure><ol start="2"><li>æŸ¥è¯¢æ•°æ®ï¼Œç¡®å®šASCIIå€¼</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> ROWNUM<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span><span class="hljs-built_in">trim</span>(telnum)<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span>lengthb(telnum)<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span> dump(telnum) <span class="hljs-keyword">from</span> telphone_temp_20190821 <span class="hljs-keyword">where</span>  ROWNUM <span class="hljs-operator">&lt;</span><span class="hljs-number">3</span>;<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SQL">ROWNUM<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span><span class="hljs-built_in">TRIM</span>(TELNUM)<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span>LENGTHB(TELNUM)<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span>DUMP(TELNUM)<br><span class="hljs-comment">-----------------------------------------------------------------</span><br><span class="hljs-number">1</span>#              <span class="hljs-number">146</span>           #<span class="hljs-number">17</span>#Typ<span class="hljs-operator">=</span><span class="hljs-number">1</span> Len<span class="hljs-operator">=</span><span class="hljs-number">17</span>: <span class="hljs-number">9</span>,<span class="hljs-number">9</span>,<span class="hljs-number">49</span>,<span class="hljs-number">52</span>,<span class="hljs-number">54</span>,<span class="hljs-number">9</span>,<span class="hljs-number">9</span><br><span class="hljs-number">2</span>#              <span class="hljs-number">144</span>           #<span class="hljs-number">15</span>#Typ<span class="hljs-operator">=</span><span class="hljs-number">1</span> Len<span class="hljs-operator">=</span><span class="hljs-number">15</span>: <span class="hljs-number">9</span>,<span class="hljs-number">9</span>,<span class="hljs-number">49</span>,<span class="hljs-number">52</span>,<span class="hljs-number">52</span>,<span class="hljs-number">9</span>,<span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><blockquote><p>ä¸å¯è§å­—ç¬¦ ASCII å€¼ç­‰äº9</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> chr(<span class="hljs-number">9</span>) <span class="hljs-keyword">from</span> dual;<br></code></pre></td></tr></table></figure><ol start="3"><li>replaceå‰”é™¤ä¸å¯è§å­—ç¬¦ï¼Œåˆ©ç”¨<code>chr()</code>å‡½æ•°å°†æ•°å€¼è½¬æ¢æˆ<em><strong>ä¸å¯è§</strong></em>å­—ç¬¦</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">select</span> replace(telnum, chr(<span class="hljs-number">9</span>), <span class="hljs-string">&#x27;&#x27;</span>) <span class="hljs-keyword">from</span> telphone_temp_20190821 <span class="hljs-keyword">where</span> ROWNUM <span class="hljs-operator">&lt;</span><span class="hljs-number">3</span>;<br></code></pre></td></tr></table></figure><h2 id="2-Oracle-å‡½æ•°"><a href="#2-Oracle-å‡½æ•°" class="headerlink" title="2.Oracle å‡½æ•°"></a>2.Oracle å‡½æ•°</h2><ol><li><code>dump(expression [, return_format] [, start_position] [, length] )</code></li></ol><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tap">expressionï¼šè¦åˆ†æçš„è¡¨è¾¾å¼ã€‚<br>return_formatï¼šå†³å®šäº†è¿”å›å€¼çš„æ ¼å¼ï¼Œè¯¥å‚æ•°å¯ä»¥æ˜¯ä»¥ä¸‹ä»»ä½•å€¼ï¼š<br>     â—<span class="hljs-number"> 8 </span>ï¼šå…«è¿›åˆ¶ç¬¦å·<br>     â—<span class="hljs-number"> 10 </span>ï¼šåè¿›åˆ¶ç¬¦å·<br>     â—<span class="hljs-number"> 16 </span>ï¼šåå…­è¿›åˆ¶ç¬¦å·<br>     â—<span class="hljs-number"> 17 </span>ï¼šå•ä¸ªå­—ç¬¦<br>     â—<span class="hljs-number"> 1008 </span>ï¼šå¸¦å­—ç¬¦é›†åç§°çš„å…«è¿›åˆ¶ç¬¦å·<br>     â—<span class="hljs-number"> 1010 </span>ï¼šå¸¦å­—ç¬¦é›†åç§°çš„åè¿›åˆ¶ç¬¦å·<br>     â—<span class="hljs-number"> 1016 </span>ï¼šå¸¦å­—ç¬¦é›†åç§°çš„åå…­è¿›åˆ¶ç¬¦å·<br>     â—<span class="hljs-number"> 1017 </span>ï¼šå¸¦å­—ç¬¦é›†åç§°çš„å•ä¸ªå­—ç¬¦<br>start_position ï¼šå¯é€‰çš„ï¼Œè¦è¿”å›çš„å†…éƒ¨è¡¨ç¤ºçš„èµ·å§‹ä½ç½®ã€‚<br>length ï¼šå¯é€‰çš„ï¼Œè¦è¿”å›çš„å†…éƒ¨è¡¨ç¤ºçš„é•¿åº¦ã€‚        <br> è¿”å›å€¼: Typ=1 Len=17: [CharacterSet=ZHS16GBK] 9,9,49,52,54,9,9<br>           â— Type : å­—æ®µç±»å‹ï¼ˆè§è¡¨æ ¼ï¼‰<br>           â— Len ï¼šé•¿åº¦<br>           â— æ¯ä¸ªå­—ç¬¦çš„ Asciiå€¼<br></code></pre></td></tr></table></figure><ol start="2"><li><code>lengthb()</code>ï¼šè¿”å›çš„æ˜¯ å­—èŠ‚æ•°</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">select</span> length(<span class="hljs-string">&#x27;Oracle&#x27;</span>) <span class="hljs-keyword">from</span> dual<br>ç»“æœï¼š<span class="hljs-number">6</span><br><span class="hljs-keyword">select</span> lengthb(<span class="hljs-string">&#x27;Oracle&#x27;</span>) <span class="hljs-keyword">from</span> dual<br>ç»“æœï¼š<span class="hljs-number">6</span><br><span class="hljs-keyword">select</span> length(<span class="hljs-string">&#x27;ç”²éª¨æ–‡&#x27;</span>) <span class="hljs-keyword">from</span> dual<br>ç»“æœï¼š<span class="hljs-number">3</span><br><span class="hljs-keyword">select</span> lengthb(<span class="hljs-string">&#x27;ç”²éª¨æ–‡&#x27;</span>) <span class="hljs-keyword">from</span> dual<br>ç»“æœï¼š<span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><ul><li><code>length()</code> ï¼šè¿”å›çš„æ˜¯ å­—ç¬¦æ•°</li><li><code>trim()</code> ï¼šå‡½æ•°ä»å­—ç¬¦ä¸²çš„å¼€å¤´ï¼Œç»“å°¾æˆ–ä¸¤ç«¯åˆ é™¤ç©ºæ ¼æˆ–æŒ‡å®šçš„å­—ç¬¦ã€‚</li><li><code>replace(char, search_string [, replace_string])</code>ï¼š) å¦‚æœæ²¡æœ‰æŒ‡å®šreplace_string å˜é‡çš„å€¼ï¼Œé‚£ä¹ˆå½“å‘ç°search_string å˜é‡çš„å€¼æ—¶ï¼Œå°±å°†å…¶åˆ é™¤</li><li><code>ascii(single_character)</code> ï¼šè¿”å›ä»£è¡¨æŒ‡å®šå­—ç¬¦çš„æ•°å­—å€¼ä»£ç </li><li><code>chr(number_code)</code> ï¼šå‡½æ•°å¯ä»¥æ ¹æ®æ•°å­—ä»£ç è¿”å›å­—ç¬¦</li></ul><h2 id="3-å¯¹ç…§è¡¨"><a href="#3-å¯¹ç…§è¡¨" class="headerlink" title="3. å¯¹ç…§è¡¨"></a>3. å¯¹ç…§è¡¨</h2><p><strong>ASCIIå¯¹ç…§è¡¨</strong></p><table><thead><tr><th>ASCIIå€¼</th><th>æ§åˆ¶å­—ç¬¦</th><th>ASCIIå€¼</th><th>æ§åˆ¶å­—ç¬¦</th><th>ASCIIå€¼</th><th>æ§åˆ¶å­—ç¬¦</th><th>ASCIIå€¼</th><th>æ§åˆ¶å­—ç¬¦</th></tr></thead><tbody><tr><td>0</td><td>NUT</td><td>32</td><td>(space)</td><td>64</td><td>@</td><td>96</td><td>ã€</td></tr><tr><td>1</td><td>SOH</td><td>33</td><td>!</td><td>65</td><td>A</td><td>97</td><td>a</td></tr><tr><td>2</td><td>STX</td><td>34</td><td>â€œ</td><td>66</td><td>B</td><td>98</td><td>b</td></tr><tr><td>3</td><td>ETX</td><td>35</td><td>#</td><td>67</td><td>C</td><td>99</td><td>c</td></tr><tr><td>4</td><td>EOT</td><td>36</td><td>$</td><td>68</td><td>D</td><td>100</td><td>d</td></tr><tr><td>5</td><td>ENQ</td><td>37</td><td>%</td><td>69</td><td>E</td><td>101</td><td>e</td></tr><tr><td>6</td><td>ACK</td><td>38</td><td>&amp;</td><td>70</td><td>F</td><td>102</td><td>f</td></tr><tr><td>7</td><td>BEL</td><td>39</td><td>,</td><td>71</td><td>G</td><td>103</td><td>g</td></tr><tr><td>8</td><td>BS</td><td>40</td><td>(</td><td>72</td><td>H</td><td>104</td><td>h</td></tr><tr><td>9</td><td>HT</td><td>41</td><td>)</td><td>73</td><td>I</td><td>105</td><td>i</td></tr><tr><td>10</td><td>LF</td><td>42</td><td>*</td><td>74</td><td>J</td><td>106</td><td>j</td></tr><tr><td>11</td><td>VT</td><td>43</td><td>+</td><td>75</td><td>K</td><td>107</td><td>k</td></tr><tr><td>12</td><td>FF</td><td>44</td><td>,</td><td>76</td><td>L</td><td>108</td><td>l</td></tr><tr><td>13</td><td>CR</td><td>45</td><td>-</td><td>77</td><td>M</td><td>109</td><td>m</td></tr><tr><td>14</td><td>SO</td><td>46</td><td>.</td><td>78</td><td>N</td><td>110</td><td>n</td></tr><tr><td>15</td><td>SI</td><td>47</td><td>&#x2F;</td><td>79</td><td>O</td><td>111</td><td>o</td></tr><tr><td>16</td><td>DLE</td><td>48</td><td>0</td><td>80</td><td>P</td><td>112</td><td>p</td></tr><tr><td>17</td><td>DCI</td><td>49</td><td>1</td><td>81</td><td>Q</td><td>113</td><td>q</td></tr><tr><td>18</td><td>DC2</td><td>50</td><td>2</td><td>82</td><td>R</td><td>114</td><td>r</td></tr><tr><td>19</td><td>DC3</td><td>51</td><td>3</td><td>83</td><td>S</td><td>115</td><td>s</td></tr><tr><td>20</td><td>DC4</td><td>52</td><td>4</td><td>84</td><td>T</td><td>116</td><td>t</td></tr><tr><td>21</td><td>NAK</td><td>53</td><td>5</td><td>85</td><td>U</td><td>117</td><td>u</td></tr><tr><td>22</td><td>SYN</td><td>54</td><td>6</td><td>86</td><td>V</td><td>118</td><td>v</td></tr><tr><td>23</td><td>TB</td><td>55</td><td>7</td><td>87</td><td>W</td><td>119</td><td>w</td></tr><tr><td>24</td><td>CAN</td><td>56</td><td>8</td><td>88</td><td>X</td><td>120</td><td>x</td></tr><tr><td>25</td><td>EM</td><td>57</td><td>9</td><td>89</td><td>Y</td><td>121</td><td>y</td></tr><tr><td>26</td><td>SUB</td><td>58</td><td>:</td><td>90</td><td>Z</td><td>122</td><td>z</td></tr><tr><td>27</td><td>ESC</td><td>59</td><td>;</td><td>91</td><td>[</td><td>123</td><td>{</td></tr><tr><td>28</td><td>FS</td><td>60</td><td>&lt;</td><td>92</td><td>&#x2F;</td><td>124</td><td></td></tr><tr><td>29</td><td>GS</td><td>61</td><td>&#x3D;</td><td>93</td><td>]</td><td>125</td><td>}</td></tr><tr><td>30</td><td>RS</td><td>62</td><td>&gt;</td><td>94</td><td>^</td><td>126</td><td>&#96;</td></tr><tr><td>31</td><td>US</td><td>63</td><td>?</td><td>95</td><td>_</td><td>127</td><td>DEL</td></tr></tbody></table><p><strong>ç‰¹æ®Šå­—ç¬¦è§£é‡Š</strong></p><table><thead><tr><th>NULç©º</th><th>VT å‚ç›´åˆ¶è¡¨</th><th>SYN ç©ºè½¬åŒæ­¥</th></tr></thead><tbody><tr><td>STX æ­£æ–‡å¼€å§‹</td><td>CR å›è½¦</td><td>CAN ä½œåºŸ</td></tr><tr><td>ETX æ­£æ–‡ç»“æŸ</td><td>SO ç§»ä½è¾“å‡º</td><td>EM çº¸å°½</td></tr><tr><td>EOY ä¼ è¾“ç»“æŸ</td><td>SI ç§»ä½è¾“å…¥</td><td>SUB æ¢ç½®</td></tr><tr><td>ENQ è¯¢é—®å­—ç¬¦</td><td>DLE ç©ºæ ¼</td><td>ESC æ¢ç </td></tr><tr><td>ACK æ‰¿è®¤</td><td>DC1 è®¾å¤‡æ§åˆ¶1</td><td>FS æ–‡å­—åˆ†éš”ç¬¦</td></tr><tr><td>BEL æŠ¥è­¦</td><td>DC2 è®¾å¤‡æ§åˆ¶2</td><td>GS ç»„åˆ†éš”ç¬¦</td></tr><tr><td>BS é€€ä¸€æ ¼</td><td>DC3 è®¾å¤‡æ§åˆ¶3</td><td>RS è®°å½•åˆ†éš”ç¬¦</td></tr><tr><td>HT æ¨ªå‘åˆ—è¡¨</td><td>DC4 è®¾å¤‡æ§åˆ¶4</td><td>US å•å…ƒåˆ†éš”ç¬¦</td></tr><tr><td>LF æ¢è¡Œ</td><td>NAK å¦å®š</td><td>DEL åˆ é™¤</td></tr></tbody></table><p><strong>Oracleå­—æ®µç±»å‹</strong></p><table><thead><tr><th>CODE</th><th>Type</th></tr></thead><tbody><tr><td>1</td><td>VARCHAR2</td></tr><tr><td>2</td><td>NUMBER</td></tr><tr><td>8</td><td>LONG</td></tr><tr><td>12</td><td>DATE</td></tr><tr><td>23</td><td>RAW</td></tr><tr><td>24</td><td>LONG RAW</td></tr><tr><td>69</td><td>ROWID</td></tr><tr><td>96</td><td>CHAR</td></tr><tr><td>112</td><td>CLOB</td></tr><tr><td>113</td><td>BLOB</td></tr><tr><td>114</td><td>BFILE</td></tr><tr><td>180</td><td>TIMESTAMP</td></tr><tr><td>181</td><td>TIMESTAMP WITH TIMEZONE</td></tr><tr><td>182</td><td>INTERVAL YEAR TO MONTH</td></tr><tr><td>183</td><td>INTERVAL DAY TO SECOND</td></tr><tr><td>208</td><td>UROWID</td></tr><tr><td>231</td><td>TIMESTAMP WITH LOCAL TIMEZONE</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>DataBase</category>
      
      <category>Oracle</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Oracle</tag>
      
      <tag>ä¸å¯è§å­—ç¬¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  
  
  
  <entry>
    <title>about</title>
    <link href="/"/>
    <url>/</url>
    
    <content type="html"><![CDATA[<h1 id="About-Me"><a href="#About-Me" class="headerlink" title="About Me"></a>About Me</h1><p class="note note-primary">A Coder</p><div id="calendar_box" style="width:100%;overflow-x:auto;overflow-y:hidden;"><div id="calendar" style="width: 895px;height:165px;"></div></div><script src="https://cdn.jsdelivr.net/npm/echarts@4.8.0/dist/echarts.min.js"></script><script type="text/javascript">  (function(){    function dateFormat(date){      date = new Date(date)      return date.getFullYear() + '-' + (date.getMonth() + 1).toString().padStart(2, '0') + '-' + date.getDate().toString().padStart(2, '0')    }    let calendarChart = echarts.init(document.getElementById('calendar'));    let endDate = new Date().getTime()    let startDate = new Date(endDate - 61*7*24*3600*1000).getTime()    let startDay = Math.ceil(startDate/(24*3600*1000))    let endDay = Math.ceil(endDate/(24*3600*1000))    let commitData = {"2024-03-28":1,"2024-01-14":1,"2023-12-25":1,"2023-12-22":1,"2023-11-22":1,"2023-11-21":1,"2023-08-11":2,"2023-06-20":1,"2023-06-03":1,"2023-06-02":4,"2023-06-01":4,"2023-05-31":1,"2023-05-30":1,"2023-05-12":4,"2023-05-11":5,"2023-05-10":14,"2023-05-02":1,"2023-04-25":2,"2023-04-23":14,"2023-04-22":21,"2023-04-21":10,"2023-04-20":3,"2023-04-19":2}    let seriesData = []    for(let i = startDay;i <= endDay;i++){      let date = i*24*3600*1000      let formatDate = dateFormat(date)      let times = commitData[formatDate] || 0      seriesData.push([formatDate, times])    }    let option = {      title: {        text: "å·æ‡’è®°å½•",        x: "center"      },      backgroundColor: "#f9f9f9",      tooltip: {        padding: 10,        backgroundColor: "#555",        borderColor: "#777",        borderWidth: 1,        formatter: function(a) {          var b = a.value;          return '<div style="font-size: 14px;">' + b[0] + "ï¼š" + b[1] + "</div>"        }      },      visualMap: {        show: !1,        showLabel: !0,        min: 0,        max: 4,        calculable: !1,        inRange: {          symbol: "rect",          color: ["#ebedf0", "#c6e48b", "#7bc96f", "#239a3b", "#196127"]        },        itemWidth: 12,        itemHeight: 12,        orient: "horizontal",        left: "center",        top: 0      },      calendar: [{        top: 50,        left: "center",        range: [dateFormat(startDate), dateFormat(endDate)],        cellSize: [13, 13],        splitLine: {          show: !1        },        name: {          textStyle: {            color: "#3C4858"          }        },        itemStyle: {          borderColor: "#fff",          borderWidth: 2        },        yearLabel: {          show: !1        },        monthLabel: {          nameMap: "cn",          fontSize: 11,          color: "#3C4858"        },        dayLabel: {          formatter: "{start} 1st",          nameMap: "cn",          fontSize: 11,          color: "#3C4858"        }      }],      series: [{        type: "heatmap",        coordinateSystem: "calendar",        calendarIndex: 0,        data: seriesData      }]    };    calendarChart.setOption(option);    let box = document.getElementById("calendar_box")    let child = document.getElementById("calendar")    window.addEventListener('load',function(){        box.scrollLeft = (child.clientWidth - box.clientWidth) / 2    })  })();</script>]]></content>
    
  </entry>
  
  
  
  <entry>
    <title>ç•™è¨€æ¿</title>
    <link href="/"/>
    <url>/</url>
    
    <content type="html"><![CDATA[<div class="markdown-body"><p class="note note-primary">Github Utterances ç•™è¨€æ¿åŠŸèƒ½å¯èƒ½åŠ è½½æ…¢ï¼Œç¬¬ä¸€æ¬¡ä¸æ˜¾ç¤ºï¼Œç¨ç­‰ç‰‡åˆ»åˆ·æ–°å‡ ä¸‹ï¼ï¼ï¼ ğŸ¤ªğŸ¤ªğŸ¤ªğŸ¤ªğŸ¤ª</p></div>]]></content>
    
  </entry>
  
  
  
</search>
