<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>行走在0与1之间</title>
  
  <subtitle>浮生若梦，世事无常，独醉梦一场</subtitle>
  <link href="https://blog.dekun.wang/atom.xml" rel="self"/>
  
  <link href="https://blog.dekun.wang/"/>
  <updated>2021-07-22T09:33:46.630Z</updated>
  <id>https://blog.dekun.wang/</id>
  
  <author>
    <name>Wang Dekun</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Mysql基础-4 ---『 函数 』</title>
    <link href="https://blog.dekun.wang/2021/07/21/Mysql%E5%9F%BA%E7%A1%80-4/"/>
    <id>https://blog.dekun.wang/2021/07/21/Mysql%E5%9F%BA%E7%A1%80-4/</id>
    <published>2021-07-21T10:14:48.000Z</published>
    <updated>2021-07-22T09:33:46.630Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Mysql 高频函数<br/></p></blockquote><span id="more"></span><h1 id="Mysql函数"><a href="#Mysql函数" class="headerlink" title="Mysql函数"></a>Mysql函数</h1><p class="note note-primary"> <a href="https://dev.mysql.com/doc/refman/8.0/en/functions.html">Mysql 官网文档</a></p><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><table><thead><tr><th>函数</th><th>功能描述</th></tr></thead><tbody><tr><td>concat(s1,s2,….,sn)</td><td>连接s1,s2,…,sn为一个字符串</td></tr><tr><td>insert(str,x,y,instr)</td><td>将字符串str从第x位置开始，y个字符长的子串替换为字符串instr</td></tr><tr><td>lower(str)</td><td>将字符串str中所有字符变为小写</td></tr><tr><td>upper(str)</td><td>将字符串str中所有字符变为大写</td></tr><tr><td>left(str,x)</td><td>返回字符串str最左边的x个字符</td></tr><tr><td>right(str,x)</td><td>返回字符串str最右边的x个字符</td></tr><tr><td>lpad(str,n,pad)</td><td>用字符串pad对str最左边进行填充，直至长度为n个字符长度</td></tr><tr><td>rpad(str,n,pad)</td><td>用字符串pad对str最右边进行填充，直至长度为n个字符长度</td></tr><tr><td>ltrim(str)</td><td>去掉字符串str左侧的空格</td></tr><tr><td>rtrim(str)</td><td>去掉字符串str右侧（行尾）的空格</td></tr><tr><td>repeat(str,x)</td><td>返回str重复x次的结果</td></tr><tr><td>replace(str,a,b)</td><td>用字符串b替换字符串str中所有出现的字符串a</td></tr><tr><td>strcmp(s1,s2)</td><td>比较字符串s1和s2</td></tr><tr><td>trim(str)</td><td>去掉字符串行尾和行头的空格</td></tr><tr><td>substring(str,x,y)</td><td>返回从字符串str x位置起y个字符长度的字串</td></tr><tr><td>📌 str_to_date(str,fmt)</td><td>返回str按照 <a href="#日期和时间格式">fmt格式</a>格式化的时间</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-keyword">insert</span>(<span class="hljs-string">&#x27;12345678&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;abcd&#x27;</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">-------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-keyword">insert</span>(<span class="hljs-string">&#x27;12345678&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;abcd&#x27;</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1</span>abcd5678                     <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br># 有什么卵用<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> repeat(<span class="hljs-string">&#x27;abcdefghijk  &#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------+</span><br><span class="hljs-operator">|</span> repeat(<span class="hljs-string">&#x27;abcdefghijk  &#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------+</span><br><span class="hljs-operator">|</span> abcdefghijk  abcdefghijk     <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br><br># <span class="hljs-keyword">Null</span> 返回 <span class="hljs-keyword">Null</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-keyword">left</span>(<span class="hljs-string">&#x27;abc123&#x27;</span>, <span class="hljs-number">3</span>), <span class="hljs-keyword">left</span>(<span class="hljs-string">&#x27;abc123&#x27;</span>, <span class="hljs-keyword">null</span>), <span class="hljs-keyword">right</span>(<span class="hljs-string">&#x27;abc123&#x27;</span>, <span class="hljs-number">3</span>), <span class="hljs-keyword">right</span>(<span class="hljs-string">&#x27;abc123&#x27;</span>, <span class="hljs-keyword">null</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">-------------------+----------------------+--------------------+-----------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-keyword">left</span>(<span class="hljs-string">&#x27;abc123&#x27;</span>, <span class="hljs-number">3</span>) <span class="hljs-operator">|</span> <span class="hljs-keyword">left</span>(<span class="hljs-string">&#x27;abc123&#x27;</span>, <span class="hljs-keyword">null</span>) <span class="hljs-operator">|</span> <span class="hljs-keyword">right</span>(<span class="hljs-string">&#x27;abc123&#x27;</span>, <span class="hljs-number">3</span>) <span class="hljs-operator">|</span> <span class="hljs-keyword">right</span>(<span class="hljs-string">&#x27;abc123&#x27;</span>, <span class="hljs-keyword">null</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------------------+----------------------+--------------------+-----------------------+</span><br><span class="hljs-operator">|</span> abc               <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>                 <span class="hljs-operator">|</span> <span class="hljs-number">123</span>                <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>                  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------------------+----------------------+--------------------+-----------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br># 🈯️定字符串凑足长度。<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> lpad(<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;0&#x27;</span>), rpad(<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+---------------------+</span><br><span class="hljs-operator">|</span> lpad(<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;0&#x27;</span>) <span class="hljs-operator">|</span> rpad(<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;0&#x27;</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+---------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">00</span>abc               <span class="hljs-operator">|</span> abc00               <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+---------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br># 比较 ASCII 码值的大小<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> strcmp(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>),strcmp(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>),strcmp(<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">------------------+------------------+------------------+</span><br><span class="hljs-operator">|</span> strcmp(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>) <span class="hljs-operator">|</span> strcmp(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-operator">|</span> strcmp(<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------+------------------+------------------+</span><br><span class="hljs-operator">|</span>               <span class="hljs-number">-1</span> <span class="hljs-operator">|</span>                <span class="hljs-number">0</span> <span class="hljs-operator">|</span>                <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------+------------------+------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h2 id="数值"><a href="#数值" class="headerlink" title="数值"></a>数值</h2><table><thead><tr><th>函数</th><th>功能描述</th></tr></thead><tbody><tr><td>abs(x)</td><td>绝对值</td></tr><tr><td>ceil(x)</td><td>大于x的最小整数值</td></tr><tr><td>floor(x)</td><td>小于x的最大整数值</td></tr><tr><td>mod(x,y)</td><td>x/y的模</td></tr><tr><td>rand()</td><td>0~1内的随机值</td></tr><tr><td>round(x,y)</td><td>参数x的四舍五入的有y位小数的值</td></tr><tr><td>truncate(x,y)</td><td>数字x截断为y位小数的结果</td></tr><tr><td>rand(seed)</td><td>可选的。如果指定了seed，则返回可重复的随机数序列。<br />如果未指定种子，则返回完全随机的数字</td></tr><tr><td></td><td></td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">ceil</span>(<span class="hljs-number">-0.1</span>), <span class="hljs-built_in">ceil</span>(<span class="hljs-number">0.1</span>), <span class="hljs-built_in">floor</span>(<span class="hljs-number">-0.1</span>), <span class="hljs-built_in">floor</span>(<span class="hljs-number">0.1</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">------------+-----------+-------------+------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-built_in">ceil</span>(<span class="hljs-number">-0.1</span>) <span class="hljs-operator">|</span> <span class="hljs-built_in">ceil</span>(<span class="hljs-number">0.1</span>) <span class="hljs-operator">|</span> <span class="hljs-built_in">floor</span>(<span class="hljs-number">-0.1</span>) <span class="hljs-operator">|</span> <span class="hljs-built_in">floor</span>(<span class="hljs-number">0.1</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------+-----------+-------------+------------+</span><br><span class="hljs-operator">|</span>          <span class="hljs-number">0</span> <span class="hljs-operator">|</span>         <span class="hljs-number">1</span> <span class="hljs-operator">|</span>          <span class="hljs-number">-1</span> <span class="hljs-operator">|</span>          <span class="hljs-number">0</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------+-----------+-------------+------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br><br># 含 <span class="hljs-keyword">null</span> 即返回 <span class="hljs-keyword">null</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">mod</span>(<span class="hljs-number">15</span>, <span class="hljs-number">9</span>), <span class="hljs-number">15</span> <span class="hljs-operator">%</span> <span class="hljs-number">9</span>, <span class="hljs-built_in">mod</span>(<span class="hljs-keyword">null</span>, <span class="hljs-number">1</span>), <span class="hljs-built_in">mod</span>(<span class="hljs-number">2</span>, <span class="hljs-keyword">null</span>), <span class="hljs-built_in">mod</span>(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">------------+--------+--------------+--------------+-----------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-built_in">mod</span>(<span class="hljs-number">15</span>, <span class="hljs-number">9</span>) <span class="hljs-operator">|</span> <span class="hljs-number">15</span> <span class="hljs-operator">%</span> <span class="hljs-number">9</span> <span class="hljs-operator">|</span> <span class="hljs-built_in">mod</span>(<span class="hljs-keyword">null</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">|</span> <span class="hljs-built_in">mod</span>(<span class="hljs-number">2</span>, <span class="hljs-keyword">null</span>) <span class="hljs-operator">|</span> <span class="hljs-built_in">mod</span>(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------+--------+--------------+--------------+-----------------+</span><br><span class="hljs-operator">|</span>          <span class="hljs-number">6</span> <span class="hljs-operator">|</span>      <span class="hljs-number">6</span> <span class="hljs-operator">|</span>         <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>         <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>            <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------+--------+--------------+--------------+-----------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br># 📌 返回 <span class="hljs-number">0</span>～<span class="hljs-number">100</span> 的随机整数<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">ceil</span>(<span class="hljs-number">100</span> <span class="hljs-operator">*</span> rand());<br><span class="hljs-operator">+</span><span class="hljs-comment">--------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-built_in">ceil</span>(<span class="hljs-number">100</span> <span class="hljs-operator">*</span> rand()) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------------------+</span><br><span class="hljs-operator">|</span>                 <span class="hljs-number">87</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br># 📌  字符串转时间<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> str_to_date(<span class="hljs-string">&#x27;2018-09-20 09:00:01&#x27;</span>, <span class="hljs-string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------------------------------------------+</span><br><span class="hljs-operator">|</span> str_to_date(<span class="hljs-string">&#x27;2018-09-20 09:00:01&#x27;</span>, <span class="hljs-string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------------------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2018</span><span class="hljs-number">-09</span><span class="hljs-number">-20</span> <span class="hljs-number">09</span>:<span class="hljs-number">00</span>:<span class="hljs-number">01</span>                                     <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------------------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h2 id="日期-时间"><a href="#日期-时间" class="headerlink" title="日期/时间"></a>日期/时间</h2><table><thead><tr><th>curdate()</th><th>当前日期</th></tr></thead><tbody><tr><td>curtime()</td><td>当前时间</td></tr><tr><td>now()</td><td>当前时间与日期</td></tr><tr><td>unix_timestamp(date)</td><td>返回日期date的UNIX的时间戳</td></tr><tr><td>from_unixtime</td><td>返回UNIX时间戳的日期值</td></tr><tr><td>week(date)</td><td>日期date为一年中的第几周</td></tr><tr><td>year(date)</td><td>日期date的年份</td></tr><tr><td>hour(time)</td><td>time的小时值</td></tr><tr><td>minute(time)</td><td>time的分钟值</td></tr><tr><td>monthname(date)</td><td>date的月份名</td></tr><tr><td>date_format(date,fmt)</td><td>按照fmt格式化日期date值</td></tr><tr><td>date_add(date, interval express type)</td><td>返回一个日期或时间值加上一个时间间隔的时间值</td></tr><tr><td>datediff(expr,expr2)</td><td>返回起始时间expr和结束时间expr2之间的天数</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> curdate(), curtime(), now();<br><span class="hljs-operator">+</span><span class="hljs-comment">------------+-----------+---------------------+</span><br><span class="hljs-operator">|</span> curdate()  <span class="hljs-operator">|</span> curtime() <span class="hljs-operator">|</span> now()               <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------+-----------+---------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-operator">|</span> <span class="hljs-number">10</span>:<span class="hljs-number">19</span>:<span class="hljs-number">55</span>  <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">10</span>:<span class="hljs-number">19</span>:<span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------+-----------+---------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> unix_timestamp(now()), from_unixtime(unix_timestamp(now()));<br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+--------------------------------------+</span><br><span class="hljs-operator">|</span> unix_timestamp(now()) <span class="hljs-operator">|</span> from_unixtime(unix_timestamp(now())) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+--------------------------------------+</span><br><span class="hljs-operator">|</span>            <span class="hljs-number">1626920418</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">10</span>:<span class="hljs-number">20</span>:<span class="hljs-number">18</span>                  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+--------------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> week(now()), <span class="hljs-keyword">YEAR</span>(NOW()), <span class="hljs-keyword">HOUR</span>(NOW()), <span class="hljs-keyword">MINUTE</span>(NOW()), MONTHNAME(NOW());<br><span class="hljs-operator">+</span><span class="hljs-comment">-------------+-------------+-------------+---------------+------------------+</span><br><span class="hljs-operator">|</span> week(now()) <span class="hljs-operator">|</span> <span class="hljs-keyword">YEAR</span>(NOW()) <span class="hljs-operator">|</span> <span class="hljs-keyword">HOUR</span>(NOW()) <span class="hljs-operator">|</span> <span class="hljs-keyword">MINUTE</span>(NOW()) <span class="hljs-operator">|</span> MONTHNAME(NOW()) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------------+-------------+-------------+---------------+------------------+</span><br><span class="hljs-operator">|</span>          <span class="hljs-number">29</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2021</span> <span class="hljs-operator">|</span>          <span class="hljs-number">10</span> <span class="hljs-operator">|</span>            <span class="hljs-number">21</span> <span class="hljs-operator">|</span> July             <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------------+-------------+-------------+---------------+------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> now(), date_format(now(), <span class="hljs-string">&#x27;%y%m%d%h%i%s&#x27;</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+------------------------------------+</span><br><span class="hljs-operator">|</span> now()               <span class="hljs-operator">|</span> date_format(now(), <span class="hljs-string">&#x27;%y%m%d%h%i%s&#x27;</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+------------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">10</span>:<span class="hljs-number">24</span>:<span class="hljs-number">50</span> <span class="hljs-operator">|</span> <span class="hljs-number">210722102450</span>                       <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+------------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br># 📌 之前时间，与当前时间结果为 负数<br>#    将来是假，与当前时间结果为 正数<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> now(), datediff(<span class="hljs-string">&#x27;20210701&#x27;</span>, now()),datediff(now(),now()),datediff(<span class="hljs-string">&#x27;20210801&#x27;</span>, now());<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+-----------------------------+-----------------------+-----------------------------+</span><br><span class="hljs-operator">|</span> now()               <span class="hljs-operator">|</span> datediff(<span class="hljs-string">&#x27;20210701&#x27;</span>, now()) <span class="hljs-operator">|</span> datediff(now(),now()) <span class="hljs-operator">|</span> datediff(<span class="hljs-string">&#x27;20210801&#x27;</span>, now()) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+-----------------------------+-----------------------+-----------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">19</span>:<span class="hljs-number">11</span> <span class="hljs-operator">|</span>                         <span class="hljs-number">-21</span> <span class="hljs-operator">|</span>                     <span class="hljs-number">0</span> <span class="hljs-operator">|</span>                          <span class="hljs-number">10</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+-----------------------------+-----------------------+-----------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br></code></pre></div></td></tr></table></figure><h3 id="日期和时间格式"><a href="#日期和时间格式" class="headerlink" title="日期和时间格式"></a>日期和时间格式</h3><table><thead><tr><th>格式符号</th><th>格式说明</th></tr></thead><tbody><tr><td>%S或%s</td><td>两位数字形式的  秒  （00，01，……，59）</td></tr><tr><td>%i</td><td>两位数字形式的  分  （00，01，……，59）</td></tr><tr><td>%H</td><td>两位数字形式的   小时，24小时  （00，01，……，23）</td></tr><tr><td>%h和%I</td><td>两位数字形式的   小时，12小时   （01，02，……，12）</td></tr><tr><td>%k</td><td>数字形式的小时，24小时  （1，2，….，23）</td></tr><tr><td>%l</td><td>数字形式的小时，12小时     （1，2，….，12）</td></tr><tr><td>%T</td><td>24小时的时间格式（hh:mm:ss）</td></tr><tr><td>%r</td><td>12小时的时间形式 (hh:mm:ssAM或hh:mm:ssPM）</td></tr><tr><td>%p</td><td>AM或PM</td></tr><tr><td>%W</td><td>一周中每一天的名称（星期英文）</td></tr><tr><td>%a</td><td>一周中每一天名称的缩写（星期英文缩写）</td></tr><tr><td>%d</td><td>2位数表示月中的天数（00，01，…，31）</td></tr><tr><td>%e</td><td>数字形式表示月中的天数（1，2，….，31）</td></tr><tr><td>%D</td><td>英文后缀表示月中的天数（1st，2nd，3rd，…..）</td></tr><tr><td>%w</td><td>以数字形式表示周中的天数（0=周日，1=周一，…，6=周六）</td></tr><tr><td>%j</td><td>以3位数表示年中的天数（001，002，….,366）</td></tr><tr><td>%U</td><td>当年的第几周，周日为一周的第一天</td></tr><tr><td>%u</td><td>当年的第几周，周一为一周的第一天</td></tr><tr><td>%M</td><td>月名（应为）</td></tr><tr><td>%b</td><td>缩写的月名（英文）</td></tr><tr><td>%m</td><td>两位数字表示的月份（01，02，….，12）</td></tr><tr><td>%c</td><td>数字表示的月份（1，2，….，12）</td></tr><tr><td>%Y</td><td>4位数表示的年</td></tr><tr><td>%y</td><td>2位数表示的年</td></tr><tr><td>%%</td><td>直接值”%“</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> date_format(now(),<span class="hljs-string">&#x27;%Y-%m-%d %T&#x27;</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------------------+</span><br><span class="hljs-operator">|</span> date_format(now(),<span class="hljs-string">&#x27;%Y-%m-%d %T&#x27;</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">24</span>:<span class="hljs-number">19</span>              <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> date_format(now(),<span class="hljs-string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------------------------+</span><br><span class="hljs-operator">|</span> date_format(now(),<span class="hljs-string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">25</span>:<span class="hljs-number">38</span>                    <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h3 id="date-add-date-interval-express-type"><a href="#date-add-date-interval-express-type" class="headerlink" title="date_add(date, interval express type)"></a>date_add(date, interval express type)</h3><blockquote><ul><li>interval : 间隔类型关键字</li><li>expr： 表达式，与type相关</li><li>type：间隔类型</li></ul></blockquote><table><thead><tr><th>表达式类型</th><th>描述</th><th>格式</th></tr></thead><tbody><tr><td>hour</td><td>小时</td><td>hh</td></tr><tr><td>minute</td><td>分</td><td>mm</td></tr><tr><td>second</td><td>秒</td><td>ss</td></tr><tr><td>year</td><td>年</td><td>YY</td></tr><tr><td>month</td><td>月</td><td>MM</td></tr><tr><td>day</td><td>日</td><td>DD</td></tr><tr><td>year_month</td><td>年和月</td><td>YY-MM</td></tr><tr><td>day_hour</td><td>日和小时</td><td>DD hh</td></tr><tr><td>day_minute</td><td>日和分</td><td>DD hh:mm</td></tr><tr><td>day_second</td><td>日和秒</td><td>DD hh:mm:ss</td></tr><tr><td>hour_minute</td><td>小时和分</td><td>hh:mm</td></tr><tr><td>hour_second</td><td>小时和秒</td><td>hh:ss</td></tr><tr><td>minute_second</td><td>分钟和秒</td><td>mm:ss</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> now(), date_add(now(), <span class="hljs-type">interval</span> <span class="hljs-number">1</span> <span class="hljs-keyword">day</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+---------------------------------+</span><br><span class="hljs-operator">|</span> now()               <span class="hljs-operator">|</span> date_add(now(), <span class="hljs-type">interval</span> <span class="hljs-number">1</span> <span class="hljs-keyword">day</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+---------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">12</span>:<span class="hljs-number">38</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-23</span> <span class="hljs-number">11</span>:<span class="hljs-number">12</span>:<span class="hljs-number">38</span>             <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+---------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> now(), date_add(now(), <span class="hljs-type">interval</span> <span class="hljs-string">&#x27;-1_1&#x27;</span> day_hour );<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+--------------------------------------------+</span><br><span class="hljs-operator">|</span> now()               <span class="hljs-operator">|</span> date_add(now(), <span class="hljs-type">interval</span> <span class="hljs-string">&#x27;-1_1&#x27;</span> day_hour ) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+--------------------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">15</span>:<span class="hljs-number">22</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">15</span>:<span class="hljs-number">22</span>                        <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+--------------------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h2 id="流程函数"><a href="#流程函数" class="headerlink" title="流程函数"></a>流程函数</h2><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>if(value,t ,f)</td><td>value==真，返回t，否则返回f</td></tr><tr><td>ifnull(value1,value2)</td><td>如 value1不为空，则反回value1，否则返回value2</td></tr><tr><td>case when [value1] then [result1]….else [default] end</td><td>value1==真，返回result1，否则返回default</td></tr><tr><td>case [expr] when [value1] then [result] …. else [default] end</td><td>如expr==value1，返回result1，否则返回default</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> salary (<br>    userid <span class="hljs-type">int</span> ,<br>    salary <span class="hljs-type">decimal</span>(<span class="hljs-number">9</span> , <span class="hljs-number">2</span>)<br>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salary <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>,<span class="hljs-number">1000</span>), (<span class="hljs-number">2</span>,<span class="hljs-number">2000</span>), (<span class="hljs-number">3</span>,<span class="hljs-number">3000</span>), (<span class="hljs-number">4</span>,<span class="hljs-number">4000</span>), (<span class="hljs-number">5</span>,<span class="hljs-number">5000</span>), (<span class="hljs-number">6</span>,<span class="hljs-keyword">null</span>);<br>##<span class="hljs-comment">------------------------------------</span><br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> userid, salary, if(salary <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2000</span>, <span class="hljs-string">&#x27;H&#x27;</span>, <span class="hljs-string">&#x27;L&#x27;</span>) <span class="hljs-keyword">from</span> salary;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+------------------------------+</span><br><span class="hljs-operator">|</span> userid <span class="hljs-operator">|</span> salary  <span class="hljs-operator">|</span> if(salary <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2000</span>, <span class="hljs-string">&#x27;H&#x27;</span>, <span class="hljs-string">&#x27;L&#x27;</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+------------------------------+</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">1000.00</span> <span class="hljs-operator">|</span> L                            <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">2000.00</span> <span class="hljs-operator">|</span> H                            <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">3</span> <span class="hljs-operator">|</span> <span class="hljs-number">3000.00</span> <span class="hljs-operator">|</span> H                            <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">4</span> <span class="hljs-operator">|</span> <span class="hljs-number">4000.00</span> <span class="hljs-operator">|</span> H                            <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">5</span> <span class="hljs-operator">|</span> <span class="hljs-number">5000.00</span> <span class="hljs-operator">|</span> H                            <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">6</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> L                            <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+------------------------------+</span><br><span class="hljs-number">6</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> userid, salary, ifnull(salary, <span class="hljs-number">0</span>) <span class="hljs-keyword">from</span> salary;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+-------------------+</span><br><span class="hljs-operator">|</span> userid <span class="hljs-operator">|</span> salary  <span class="hljs-operator">|</span> ifnull(salary, <span class="hljs-number">0</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+-------------------+</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">1000.00</span> <span class="hljs-operator">|</span>           <span class="hljs-number">1000.00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">2000.00</span> <span class="hljs-operator">|</span>           <span class="hljs-number">2000.00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">3</span> <span class="hljs-operator">|</span> <span class="hljs-number">3000.00</span> <span class="hljs-operator">|</span>           <span class="hljs-number">3000.00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">4</span> <span class="hljs-operator">|</span> <span class="hljs-number">4000.00</span> <span class="hljs-operator">|</span>           <span class="hljs-number">4000.00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">5</span> <span class="hljs-operator">|</span> <span class="hljs-number">5000.00</span> <span class="hljs-operator">|</span>           <span class="hljs-number">5000.00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">6</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>              <span class="hljs-number">0.00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+-------------------+</span><br><span class="hljs-number">6</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br><br><br><br># 📌 <span class="hljs-keyword">case</span> [expr] <span class="hljs-keyword">when</span> [value1] <span class="hljs-keyword">then</span> [<span class="hljs-keyword">result</span>] .... <span class="hljs-keyword">else</span> [<span class="hljs-keyword">default</span>] <span class="hljs-keyword">end</span><br># <span class="hljs-keyword">case</span> 简单函数用法<br># <span class="hljs-keyword">case</span> 后面跟列名或者列的表达式<br># <span class="hljs-keyword">when</span> 后面枚举这个表达式所有可能的值，不能是范围值。<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> userid, salary,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        <span class="hljs-keyword">case</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            salary<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            <span class="hljs-keyword">when</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;low&#x27;</span> #枚举 不能是范围 <br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            <span class="hljs-keyword">when</span> <span class="hljs-number">2000</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;low&#x27;</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                      <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;high&#x27;</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            <span class="hljs-keyword">end</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            salary_lavel<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">from</span> salary;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+--------------+</span><br><span class="hljs-operator">|</span> userid <span class="hljs-operator">|</span> salary  <span class="hljs-operator">|</span> salary_lavel <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+--------------+</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">1000.00</span> <span class="hljs-operator">|</span> low          <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">2000.00</span> <span class="hljs-operator">|</span> low          <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">3</span> <span class="hljs-operator">|</span> <span class="hljs-number">3000.00</span> <span class="hljs-operator">|</span> high         <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">4</span> <span class="hljs-operator">|</span> <span class="hljs-number">4000.00</span> <span class="hljs-operator">|</span> high         <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">5</span> <span class="hljs-operator">|</span> <span class="hljs-number">5000.00</span> <span class="hljs-operator">|</span> high         <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">6</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> high         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+--------------+</span><br><span class="hljs-number">6</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br># 📌 <span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span> [value1] <span class="hljs-keyword">then</span> [result1]....<span class="hljs-keyword">else</span> [<span class="hljs-keyword">default</span>] <span class="hljs-keyword">end</span><br># <span class="hljs-keyword">case</span> 搜索函数用法<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> userid, salary,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        <span class="hljs-keyword">case</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            <span class="hljs-keyword">when</span> salary <span class="hljs-operator">&lt;=</span> <span class="hljs-number">2000</span>                   <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;low&#x27;</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            <span class="hljs-keyword">when</span> <span class="hljs-number">2000</span> <span class="hljs-operator">&lt;</span> salary <span class="hljs-keyword">and</span> salary <span class="hljs-operator">&lt;=</span> <span class="hljs-number">4000</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;middle&#x27;</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            <span class="hljs-keyword">when</span> salary <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span>                   <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;IS NULL&#x27;</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                                                  <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;high&#x27;</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            <span class="hljs-keyword">end</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>            salary_lavel<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">from</span> salary;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+--------------+</span><br><span class="hljs-operator">|</span> userid <span class="hljs-operator">|</span> salary  <span class="hljs-operator">|</span> salary_lavel <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+--------------+</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">1000.00</span> <span class="hljs-operator">|</span> low          <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">2000.00</span> <span class="hljs-operator">|</span> low          <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">3</span> <span class="hljs-operator">|</span> <span class="hljs-number">3000.00</span> <span class="hljs-operator">|</span> middle       <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">4</span> <span class="hljs-operator">|</span> <span class="hljs-number">4000.00</span> <span class="hljs-operator">|</span> middle       <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">5</span> <span class="hljs-operator">|</span> <span class="hljs-number">5000.00</span> <span class="hljs-operator">|</span> high         <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">6</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>      <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+--------------+</span><br><span class="hljs-number">6</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br></code></pre></div></td></tr></table></figure><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><table>    <tr>        <td>函数类型</td>        <td>名称</td>        <td>功能描述</td>    </tr>    <tr>        <td rowspan="3">创建JSON</td>        <td>json_array()</td>        <td>创建JSON数组</td>    </tr>    <tr>        <td>json_object()</td>        <td>创建JSON对象</td>    </tr>    <tr>        <td>json_quote()/json_unquote()</td>        <td>加上/去掉JSON文档两边的双引号</td>    </tr>    <tr>        <td rowspan="5">查询JSON</td>        <td>json_contains()</td>        <td>查询文档中是否包含指定的元素</td>    </tr>    <tr>        <td>json_contains_path()</td>        <td>查询文档中是否包含指定的路径</td>    </tr>    <tr>        <td>json_extract() / -> /->></td>        <td>根据条件提取文档中的数据</td>    </tr>    <tr>        <td>json_keys()</td>        <td>提取所有key的集合</td>    </tr>    <tr>        <td>json_seatch()</td>        <td>返回所有符合条件的路径集合</td>    </tr>    <tr>        <td rowspan="6">修改JSON</td>      <td><del>json_merge()[deprecated 5.7.22]<br/></del>json_merge_preserve()</td>        <td>将两个文档合并</td>    </tr>    <tr>        <td>json_array_append()</td>        <td>数组尾部追加元素</td>    </tr>    <tr>        <td>json_array_insert()</td>        <td>数组的指定位置插入元素</td>    </tr>    <tr>        <td>json_remove()</td>        <td>删除文档中指定位置的元素</td>    </tr>    <tr>        <td>json_replace()</td>        <td>替换文档中指定位置的元素</td>    </tr>    <tr>        <td>json_set()</td>        <td>给文档中指定位置的元素设置新value，如果元素不存在，则进行插入</td>    </tr>    <tr>        <td rowspan="4">查询JSON元数据</td>        <td>json_depth()</td>        <td>json文档的深度（元素的最大嵌套层数）</td>    </tr>    <tr>        <td>json_length()</td>        <td>json文档的长度（元素个数）</td>    </tr>    <tr>        <td>json_type()</td>        <td>json文档类型（数组、对象、标量类型）</td>    </tr>    <tr>        <td>json_valid()</td>        <td>json格式是否合法</td>    </tr>    <tr>        <td rowspan="6">其他函数</td>        <td>json_pretty()</td>        <td>格式化</td>    </tr>    <tr>        <td>json_storage_size()</td>        <td>占用存储空间大小</td>    </tr>    <tr>        <td>json_storage_free()</td>        <td>json更新操作后剩余空间【Mysql8.0新增】</td>    </tr>    <tr>        <td>json_table()</td>        <td>json转表格 【Mysql8.0新增】</td>    </tr>    <tr>        <td>json_arrayagg()</td>        <td>将聚合后参数中的多个值转换为json数组</td>    </tr>    <tr>        <td>json_objectagg()</td>        <td>把两个列或者是表达式解释为一个Key和一个value，返回一个JSON对象</td>    </tr></table><h2 id="窗口函数"><a href="#窗口函数" class="headerlink" title="窗口函数"></a>窗口函数</h2><blockquote><p>可以理解为记录集合，窗口函数也就是在满足某种条件的记录集合上执行的特殊函数，对于每条记录都要在此窗口函数内执行函数。</p><ul><li>静态窗口：随着记录不同，窗口大小都是固定的。    </li><li>滑动窗口：不用的记录对应着不同的窗口。</li></ul></blockquote><p class="note note-primary"> <span>窗口函数与聚合函数有些类似，最大的区别是聚合函数是多行聚合为一行，窗口函数则是多行聚合为相同的行数，每行会多一个聚合后的新列。窗口函数在Oracle数据库中也称作 分析函数。</span></p><table><thead><tr><th>函数</th><th>功能描述</th></tr></thead><tbody><tr><td>row_number()</td><td>分区中的当前行号</td></tr><tr><td>rank()</td><td>当前行在分区中的排名，含序号间隙</td></tr><tr><td>dense_rank()</td><td>当前行在分区的排名，没有序号的间隙</td></tr><tr><td>percent_rank()</td><td>百分比等级值</td></tr><tr><td>cume_dist()</td><td>累计分配值</td></tr><tr><td>first_value()</td><td>窗口中第一行的参数值</td></tr><tr><td>last_value()</td><td>窗口中最后一行的参数值</td></tr><tr><td>lag()</td><td>分区中指定行落后与当前行的参数值</td></tr><tr><td>lead()</td><td>分区中领先当前行的参数值</td></tr><tr><td><a href="#nth-value-field-number">nth_value()</a></td><td>从第N行窗口框架的参数值</td></tr><tr><td><a href="#🔆-ntile-number">ntile()</a> 🔆</td><td>分区中当前行的桶号</td></tr><tr><td></td><td></td></tr></tbody></table><h3 id="测试基础数据"><a href="#测试基础数据" class="headerlink" title="测试基础数据"></a>测试基础数据</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> order_tab (<br>    order_id    <span class="hljs-type">int</span> ,<br>    user_no     <span class="hljs-type">int</span>(<span class="hljs-number">3</span>) zerofill ,<br>    amount      <span class="hljs-type">int</span> ,<br>    create_date datetime<br>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order_tab<br>    <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span> , <span class="hljs-number">001</span> , <span class="hljs-number">100</span> , <span class="hljs-string">&#x27;2021-07-01&#x27;</span>),<br>           (<span class="hljs-number">2</span> , <span class="hljs-number">001</span> , <span class="hljs-number">300</span> , <span class="hljs-string">&#x27;2021-07-02&#x27;</span>),<br>           (<span class="hljs-number">3</span> , <span class="hljs-number">001</span> , <span class="hljs-number">500</span> , <span class="hljs-string">&#x27;2021-07-02&#x27;</span>),<br>           (<span class="hljs-number">4</span> , <span class="hljs-number">001</span> , <span class="hljs-number">800</span> , <span class="hljs-string">&#x27;2021-07-03&#x27;</span>),<br>           (<span class="hljs-number">5</span> , <span class="hljs-number">001</span> , <span class="hljs-number">900</span> , <span class="hljs-string">&#x27;2021-07-04&#x27;</span>),<br>           (<span class="hljs-number">6</span> , <span class="hljs-number">002</span> , <span class="hljs-number">500</span> , <span class="hljs-string">&#x27;2021-07-03&#x27;</span>),<br>           (<span class="hljs-number">7</span> , <span class="hljs-number">002</span> , <span class="hljs-number">600</span> , <span class="hljs-string">&#x27;2021-07-04&#x27;</span>),<br>           (<span class="hljs-number">8</span> , <span class="hljs-number">002</span> , <span class="hljs-number">300</span> , <span class="hljs-string">&#x27;2021-07-10&#x27;</span>),<br>           (<span class="hljs-number">9</span> , <span class="hljs-number">002</span> , <span class="hljs-number">800</span> , <span class="hljs-string">&#x27;2021-07-16&#x27;</span>),<br>          (<span class="hljs-number">10</span> , <span class="hljs-number">002</span> , <span class="hljs-number">800</span> , <span class="hljs-string">&#x27;2021-07-22&#x27;</span>);<br>           <br>           <br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> order_tab;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span> order_id <span class="hljs-operator">|</span> user_no <span class="hljs-operator">|</span> amount <span class="hljs-operator">|</span> create_date         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">100</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">600</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">8</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-16</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+---------+--------+---------------------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h3 id="row-number-查询每个用户最新订单"><a href="#row-number-查询每个用户最新订单" class="headerlink" title="row_number() 查询每个用户最新订单"></a>row_number() 查询每个用户最新订单</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">from</span> (<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>              <span class="hljs-keyword">select</span> <span class="hljs-built_in">row_number</span>() <span class="hljs-keyword">over</span> (<span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> create_date <span class="hljs-keyword">desc</span> ) <span class="hljs-keyword">as</span> row_num,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                     order_id, user_no, amount, create_date<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                  <span class="hljs-keyword">from</span> order_tab<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>          ) t<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">where</span> row_num <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">---------+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span> row_num <span class="hljs-operator">|</span> order_id <span class="hljs-operator">|</span> user_no <span class="hljs-operator">|</span> amount <span class="hljs-operator">|</span> create_date         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">1</span> <span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+----------+---------+--------+---------------------+</span><br><span class="hljs-number">2</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br></code></pre></div></td></tr></table></figure><ul><li><p>over ：关键字，用来指定函数执行的窗口范围，如果后面的括号什么都不写，则意味着窗口包含所有行，窗口函数将在所有行上进行计算；</p><p>如果不为空，支持4种语法</p><ul><li><p>​    <code>window</code> 取别名</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 📌  <span class="hljs-keyword">over</span>后面无括号<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br>    <span class="hljs-keyword">from</span> (<br>             <span class="hljs-keyword">select</span> <span class="hljs-built_in">row_number</span>() <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> row_num,<br>                    order_id, user_no, amount, create_date<br>                 <span class="hljs-keyword">from</span> order_tab<br>                     <span class="hljs-keyword">window</span> w <span class="hljs-keyword">as</span> ( <span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> create_date <span class="hljs-keyword">desc</span> )<br>         ) t<br>    <span class="hljs-keyword">where</span> row_num <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>    <br>#<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><br># ⭐️ 无  <span class="hljs-keyword">where</span> row_num <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">from</span> (<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>              <span class="hljs-keyword">select</span> <span class="hljs-built_in">row_number</span>() <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> row_num,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                     order_id, user_no, amount, create_date<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                  <span class="hljs-keyword">from</span> order_tab<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                      <span class="hljs-keyword">window</span> w <span class="hljs-keyword">as</span> ( <span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> create_date <span class="hljs-keyword">desc</span> )<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>          ) t<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> ;<br><span class="hljs-operator">+</span><span class="hljs-comment">---------+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span> row_num <span class="hljs-operator">|</span> order_id <span class="hljs-operator">|</span> user_no <span class="hljs-operator">|</span> amount <span class="hljs-operator">|</span> create_date         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">100</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">1</span> <span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-16</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">8</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">600</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+----------+---------+--------+---------------------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br></code></pre></div></td></tr></table></figure><ul><li><p><code>partition by</code> : 窗口按照那些字段进行分组，窗口函数在不同的分组上分别执行。</p></li><li><p><code>order by</code> : 按照那些字段进行排序，窗口函数将按照排序后的记录顺序进行编号【例：row_num】，既可以和partition子句配合使用，也可以单独使用，</p></li><li><p><code>frame</code>：是当前分区的一个子集，子句用来定义子集的规则，通常用来作滑动窗口使用。</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">🔆 frame 例子：<br># 每个用户，根据每个订单动态计算<br># 包括本订单和按时间顺序 前 后 两 个订单（共涉及三个订单，无前订单涉及两个订单）的平均订单金额。<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br>    <span class="hljs-keyword">from</span> (<br>             <span class="hljs-keyword">select</span> order_id, user_no, amount,<br>                    <span class="hljs-built_in">avg</span>(amount) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> avg_num, create_date<br>                 <span class="hljs-keyword">from</span> order_tab<br>                     <span class="hljs-keyword">window</span> w <span class="hljs-keyword">as</span><br>                         ( <span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no<br>                         <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> create_date <span class="hljs-keyword">desc</span><br>                         <span class="hljs-keyword">rows</span> <span class="hljs-keyword">between</span> <span class="hljs-number">1</span> preceding <span class="hljs-keyword">and</span> <span class="hljs-number">1</span> following)<br>         ) t;<br><br>#<span class="hljs-comment">------------------</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+---------+--------+----------+---------------------+</span><br><span class="hljs-operator">|</span> order_id <span class="hljs-operator">|</span> user_no <span class="hljs-operator">|</span> amount <span class="hljs-operator">|</span> avg_num  <span class="hljs-operator">|</span> create_date         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+---------+--------+----------+---------------------+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">850.0000</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">666.6667</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">533.3333</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">300.0000</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">100</span> <span class="hljs-operator">|</span> <span class="hljs-number">300.0000</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">800.0000</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">633.3333</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-16</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">8</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">566.6667</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">600</span> <span class="hljs-operator">|</span> <span class="hljs-number">466.6667</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">550.0000</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+---------+--------+----------+---------------------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><blockquote><p><strong><em>滑动窗口的范围</em></strong>    指定的两种方式</p></blockquote><ul><li><p>基于行: <code>rows between frame_start and frame_end</code> 语法来表示行范围</p><ul><li><p>frame_start与frame_end 「非关键字，代指」</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 📌 支持如下关键字<br><span class="hljs-keyword">current</span> <span class="hljs-type">row</span> # 边界是当前行，一般和其他范围关键字一起使用<br>unbounded preceding # 边界是分区中的第一行<br>unbounded following # 边界是分区中的最后一行<br>expr preceding # 边界是当前行减去expr的值<br>expr following  # 边界是当前行加上expr的值<br><br># 例子<br><br># 窗口范围是 当前行、前一行、后一行一共<span class="hljs-number">3</span>行记录<br><span class="hljs-keyword">rows</span> <span class="hljs-keyword">between</span> <span class="hljs-number">1</span> preceding <span class="hljs-keyword">and</span> <span class="hljs-number">1</span> following<br><br>#当前行到分区中的最后一行<br><span class="hljs-keyword">rows</span> unbounded following<br><br># 当前分区中  所有行，等同于不写<br><span class="hljs-keyword">rows</span> <span class="hljs-keyword">between</span> unbounded  preceding <span class="hljs-keyword">and</span> unbounded following<br></code></pre></div></td></tr></table></figure></li></ul></li></ul></li></ul></li></ul></li></ul><div class="hljs code-wrapper"><pre><code>- 基于范围：`range` 替换`rows`，其余类似</code></pre></div><h3 id="Rank-、-DENSE-RANK"><a href="#Rank-、-DENSE-RANK" class="headerlink" title="Rank()、 DENSE_RANK()"></a>Rank()、 DENSE_RANK()</h3><blockquote><p>Rank()、 DENSE_RANK() 与 row_number() 非常相似，<strong><em>在出现重复时处理逻辑不通</em></strong>。</p></blockquote><ul><li>行号 18、19相同amount产生了序列差异。<ul><li>rank 产生了相同的序号，但可能含有序列间隙</li><li>dense_rank 产生了相同序号，但无序列间隙</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">from</span> (<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>              <span class="hljs-keyword">select</span> <span class="hljs-built_in">row_number</span>() <span class="hljs-keyword">over</span> (<span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> amount <span class="hljs-keyword">desc</span> ) <span class="hljs-keyword">as</span> row_num1,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                     <span class="hljs-built_in">rank</span>() <span class="hljs-keyword">over</span> (<span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> amount <span class="hljs-keyword">desc</span> ) <span class="hljs-keyword">as</span> row_num2,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                     <span class="hljs-built_in">dense_rank</span>() <span class="hljs-keyword">over</span> (<span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> amount <span class="hljs-keyword">desc</span> ) <span class="hljs-keyword">as</span> row_num3,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                     order_id, user_no, amount, create_date<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>                  <span class="hljs-keyword">from</span> order_tab<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>          ) t;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+----------+----------+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span> row_num1 <span class="hljs-operator">|</span> row_num2 <span class="hljs-operator">|</span> row_num3 <span class="hljs-operator">|</span> order_id <span class="hljs-operator">|</span> user_no <span class="hljs-operator">|</span> amount <span class="hljs-operator">|</span> create_date         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+----------+----------+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">100</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-16</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">600</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">8</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+----------+----------+----------+---------+--------+---------------------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h3 id="🔆-ntile-number"><a href="#🔆-ntile-number" class="headerlink" title="🔆 ntile(number)"></a>🔆 ntile(number)</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">ntile</span>(<span class="hljs-number">3</span>) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> nt,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        order_id, user_no, amount, create_date<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">from</span> order_tab<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>         <span class="hljs-keyword">window</span> w <span class="hljs-keyword">as</span> (<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>             <span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> amount <span class="hljs-keyword">desc</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>             );<br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span> nt <span class="hljs-operator">|</span> order_id <span class="hljs-operator">|</span> user_no <span class="hljs-operator">|</span> amount <span class="hljs-operator">|</span> create_date         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">100</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br>#<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-16</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">600</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">8</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+---------+--------+---------------------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><br># 📌<br>#<span class="hljs-built_in">ntile</span>(<span class="hljs-number">5</span>) <br># 因根据  user_no 分组，一组只有<span class="hljs-number">5</span>个，则只能分五个桶<br># 上面 <span class="hljs-built_in">ntile</span>(<span class="hljs-number">3</span>)，则是对每组的五个数据，进行再分组，总计<span class="hljs-number">3</span>个组。 <br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">ntile</span>(<span class="hljs-number">5</span>) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> nt,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        order_id, user_no, amount, create_date<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">from</span> order_tab<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>         <span class="hljs-keyword">window</span> w <span class="hljs-keyword">as</span> (<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>             <span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> amount <span class="hljs-keyword">desc</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>             );<br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span> nt <span class="hljs-operator">|</span> order_id <span class="hljs-operator">|</span> user_no <span class="hljs-operator">|</span> amount <span class="hljs-operator">|</span> create_date         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">100</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-16</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">600</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">8</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+---------+--------+---------------------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h3 id="nth-value-field-number"><a href="#nth-value-field-number" class="headerlink" title="nth_value(field,number)"></a>nth_value(field,number)</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">ntile</span>(<span class="hljs-number">5</span>) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> nt,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        <span class="hljs-built_in">nth_value</span>(order_id,<span class="hljs-number">3</span>) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> nth,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        order_id, user_no, amount, create_date<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">from</span> order_tab<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>         <span class="hljs-keyword">window</span> w <span class="hljs-keyword">as</span> (<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>             <span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> amount <span class="hljs-keyword">desc</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>             );<br><span class="hljs-operator">+</span><span class="hljs-comment">----+------+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span> nt <span class="hljs-operator">|</span> nth  <span class="hljs-operator">|</span> order_id <span class="hljs-operator">|</span> user_no <span class="hljs-operator">|</span> amount <span class="hljs-operator">|</span> create_date         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+------+----------+---------+--------+---------------------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">100</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>        <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-16</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>    <span class="hljs-number">7</span> <span class="hljs-operator">|</span>        <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">600</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span>    <span class="hljs-number">7</span> <span class="hljs-operator">|</span>        <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span>    <span class="hljs-number">7</span> <span class="hljs-operator">|</span>        <span class="hljs-number">8</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+------+----------+---------+--------+---------------------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>#📌<br># nth 列 返回了分组排序后的窗口中 order_id 的第三个值， ‘<span class="hljs-number">001</span>’用户返回 <span class="hljs-number">3</span> ，‘<span class="hljs-number">002</span>’ 用户返回 <span class="hljs-number">7</span><br># 对于前N<span class="hljs-number">-1</span>列 此函数返回<span class="hljs-keyword">NULL</span><br></code></pre></div></td></tr></table></figure><h3 id="聚合窗口作为窗口函数"><a href="#聚合窗口作为窗口函数" class="headerlink" title="聚合窗口作为窗口函数"></a>聚合窗口作为窗口函数</h3><blockquote><p>聚合函数可以作为窗口函数使用</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> order_id, user_no, amount, create_date,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        <span class="hljs-built_in">sum</span>(amount) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> sum1,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        <span class="hljs-built_in">avg</span>(amount) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> avg1,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        <span class="hljs-built_in">max</span>(amount) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> max1,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        <span class="hljs-built_in">min</span>(amount) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> min1,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>        <span class="hljs-built_in">count</span>(amount) <span class="hljs-keyword">over</span> w <span class="hljs-keyword">as</span> count1<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     <span class="hljs-keyword">from</span> order_tab<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>         <span class="hljs-keyword">window</span> w <span class="hljs-keyword">as</span> (<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>             <span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> user_no <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> order_id<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>             );<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+---------+--------+---------------------+------+----------+------+------+--------+</span><br><span class="hljs-operator">|</span> order_id <span class="hljs-operator">|</span> user_no <span class="hljs-operator">|</span> amount <span class="hljs-operator">|</span> create_date         <span class="hljs-operator">|</span> sum1 <span class="hljs-operator">|</span> avg1     <span class="hljs-operator">|</span> max1 <span class="hljs-operator">|</span> min1 <span class="hljs-operator">|</span> count1 <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+---------+--------+---------------------+------+----------+------+------+--------+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">100</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span>  <span class="hljs-number">100</span> <span class="hljs-operator">|</span> <span class="hljs-number">100.0000</span> <span class="hljs-operator">|</span>  <span class="hljs-number">100</span> <span class="hljs-operator">|</span>  <span class="hljs-number">100</span> <span class="hljs-operator">|</span>      <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span>  <span class="hljs-number">400</span> <span class="hljs-operator">|</span> <span class="hljs-number">200.0000</span> <span class="hljs-operator">|</span>  <span class="hljs-number">300</span> <span class="hljs-operator">|</span>  <span class="hljs-number">100</span> <span class="hljs-operator">|</span>      <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span>  <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">300.0000</span> <span class="hljs-operator">|</span>  <span class="hljs-number">500</span> <span class="hljs-operator">|</span>  <span class="hljs-number">100</span> <span class="hljs-operator">|</span>      <span class="hljs-number">3</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> <span class="hljs-number">1700</span> <span class="hljs-operator">|</span> <span class="hljs-number">425.0000</span> <span class="hljs-operator">|</span>  <span class="hljs-number">800</span> <span class="hljs-operator">|</span>  <span class="hljs-number">100</span> <span class="hljs-operator">|</span>      <span class="hljs-number">4</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">001</span> <span class="hljs-operator">|</span>    <span class="hljs-number">900</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> <span class="hljs-number">2600</span> <span class="hljs-operator">|</span> <span class="hljs-number">520.0000</span> <span class="hljs-operator">|</span>  <span class="hljs-number">900</span> <span class="hljs-operator">|</span>  <span class="hljs-number">100</span> <span class="hljs-operator">|</span>      <span class="hljs-number">5</span> <span class="hljs-operator">|</span><br><br><span class="hljs-operator">|</span>        <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-03</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span>  <span class="hljs-number">500</span> <span class="hljs-operator">|</span> <span class="hljs-number">500.0000</span> <span class="hljs-operator">|</span>  <span class="hljs-number">500</span> <span class="hljs-operator">|</span>  <span class="hljs-number">500</span> <span class="hljs-operator">|</span>      <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">600</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-04</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> <span class="hljs-number">1100</span> <span class="hljs-operator">|</span> <span class="hljs-number">550.0000</span> <span class="hljs-operator">|</span>  <span class="hljs-number">600</span> <span class="hljs-operator">|</span>  <span class="hljs-number">500</span> <span class="hljs-operator">|</span>      <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">8</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">300</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> <span class="hljs-number">1400</span> <span class="hljs-operator">|</span> <span class="hljs-number">466.6667</span> <span class="hljs-operator">|</span>  <span class="hljs-number">600</span> <span class="hljs-operator">|</span>  <span class="hljs-number">300</span> <span class="hljs-operator">|</span>      <span class="hljs-number">3</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-16</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> <span class="hljs-number">2200</span> <span class="hljs-operator">|</span> <span class="hljs-number">550.0000</span> <span class="hljs-operator">|</span>  <span class="hljs-number">800</span> <span class="hljs-operator">|</span>  <span class="hljs-number">300</span> <span class="hljs-operator">|</span>      <span class="hljs-number">4</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">002</span> <span class="hljs-operator">|</span>    <span class="hljs-number">800</span> <span class="hljs-operator">|</span> <span class="hljs-number">2021</span><span class="hljs-number">-07</span><span class="hljs-number">-22</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> <span class="hljs-number">3000</span> <span class="hljs-operator">|</span> <span class="hljs-number">600.0000</span> <span class="hljs-operator">|</span>  <span class="hljs-number">800</span> <span class="hljs-operator">|</span>  <span class="hljs-number">300</span> <span class="hljs-operator">|</span>      <span class="hljs-number">5</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+---------+--------+---------------------+------+----------+------+------+--------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>#每组 当前行 与 前面的记录 比较<span class="hljs-operator">/</span>求值<span class="hljs-operator">/</span>统计  📌<br><br><br></code></pre></div></td></tr></table></figure><blockquote><p>聚合函数</p><ul><li>sum</li><li>avg</li><li>max</li><li>min</li><li>count</li></ul></blockquote><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><table><thead><tr><th>函数</th><th>功能描述</th></tr></thead><tbody><tr><td>database()</td><td>当前数据库名称</td></tr><tr><td>version()</td><td>当前数据库版本</td></tr><tr><td>user()</td><td>当前登陆用户</td></tr><tr><td>inet_aton(IP)</td><td>返回IP地址的数字表示</td></tr><tr><td>inet_ntoa(num)</td><td>返回数字代表的IP地址</td></tr><tr><td>password(Str)</td><td>返回字符串str的加密版本</td></tr><tr><td>MD5()</td><td>返回字符串str的MD5值</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Mysql 高频函数&lt;br/&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Mysql" scheme="https://blog.dekun.wang/categories/Mysql/"/>
    
    <category term="基础" scheme="https://blog.dekun.wang/categories/Mysql/%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="Mysql" scheme="https://blog.dekun.wang/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>Mysql基础-3 ---『 运算符 』</title>
    <link href="https://blog.dekun.wang/2021/07/21/Mysql%E5%9F%BA%E7%A1%80-3/"/>
    <id>https://blog.dekun.wang/2021/07/21/Mysql%E5%9F%BA%E7%A1%80-3/</id>
    <published>2021-07-21T08:39:12.000Z</published>
    <updated>2021-07-22T09:33:53.825Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>正文的一部分作为摘要</p></blockquote><span id="more"></span><h1 id="Mysql运算符"><a href="#Mysql运算符" class="headerlink" title="Mysql运算符"></a>Mysql运算符</h1><h2 id="算数"><a href="#算数" class="headerlink" title="算数"></a>算数</h2><table><thead><tr><th align="center">运算符</th><th align="left">描述</th></tr></thead><tbody><tr><td align="center">+</td><td align="left">加法</td></tr><tr><td align="center">-</td><td align="left">减法</td></tr><tr><td align="center">*</td><td align="left">乘法</td></tr><tr><td align="center">/  或 DIV</td><td align="left">除法  (div 只返回商)</td></tr><tr><td align="center">% 或 MOD</td><td align="left">取余</td></tr></tbody></table><blockquote><p>除法或取余 运算 除数为0，返回结果： null</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span><span class="hljs-operator">/</span><span class="hljs-number">0</span> ,<span class="hljs-number">1</span><span class="hljs-operator">%</span><span class="hljs-number">0</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1</span><span class="hljs-operator">/</span><span class="hljs-number">0</span>  <span class="hljs-operator">|</span> <span class="hljs-number">1</span><span class="hljs-operator">%</span><span class="hljs-number">0</span>  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+</span><br><span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span>, <span class="hljs-number">2</span> warnings (<span class="hljs-number">0.00</span> sec)<br>#<span class="hljs-comment">---------</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-number">2</span><span class="hljs-operator">/</span><span class="hljs-number">3</span> ,<span class="hljs-number">2</span><span class="hljs-operator">/</span><span class="hljs-number">1</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2</span><span class="hljs-operator">/</span><span class="hljs-number">3</span>    <span class="hljs-operator">|</span> <span class="hljs-number">2</span><span class="hljs-operator">/</span><span class="hljs-number">1</span>  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">0.6667</span> <span class="hljs-operator">|</span> <span class="hljs-number">2.0000</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span>, <span class="hljs-number">1</span> warning (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> div <span class="hljs-number">2</span>,<span class="hljs-number">3</span><span class="hljs-operator">/</span><span class="hljs-number">2</span>,<span class="hljs-built_in">mod</span>(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>),<span class="hljs-number">3</span><span class="hljs-operator">%</span><span class="hljs-number">2</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">---------+--------+----------+------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">3</span> div <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">3</span><span class="hljs-operator">/</span><span class="hljs-number">2</span>    <span class="hljs-operator">|</span> <span class="hljs-built_in">mod</span>(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>) <span class="hljs-operator">|</span> <span class="hljs-number">3</span><span class="hljs-operator">%</span><span class="hljs-number">2</span>  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+--------+----------+------+</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">1.5000</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+--------+----------+------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h2 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h2><blockquote><ul><li>数字比较，浮点数比较</li><li>字符串比较，不区分大小写比较</li><li>表达式比较</li><li>true为1，false为0</li></ul></blockquote><table><thead><tr><th>运算符号</th><th>描述</th></tr></thead><tbody><tr><td>=</td><td>等于</td></tr><tr><td>&lt;&gt; 或 !=</td><td>不等于</td></tr><tr><td>📌 &lt;=&gt;</td><td>null 安全的等于（null-safe） 【可与参与null的比较】</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&lt;=</td><td>小于等于</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>between</td><td>存在于指定     范围 ; 格式：<code>field between min or max</code>,闭区间</td></tr><tr><td>in</td><td>存在与指定     集合 ; 格式：<code>field in(value1,...,valueN)</code></td></tr><tr><td>is null</td><td>是null</td></tr><tr><td>is not null</td><td>不是null</td></tr><tr><td>like</td><td>通配符匹配【百分号（%）、下划线（_）】</td></tr><tr><td>regexp 或 rlike</td><td>正则匹配</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-number">0</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">0</span>, <span class="hljs-number">1</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">1</span>, <span class="hljs-number">2</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">1</span>, <span class="hljs-keyword">null</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">1</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">---------+---------+---------+---------------+------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">0</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">0</span> <span class="hljs-operator">|</span> <span class="hljs-number">1</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">2</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">null</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-keyword">null</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">null</span> <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+---------+---------+---------------+------------+</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">1</span> <span class="hljs-operator">|</span>       <span class="hljs-number">1</span> <span class="hljs-operator">|</span>       <span class="hljs-number">0</span> <span class="hljs-operator">|</span>             <span class="hljs-number">1</span> <span class="hljs-operator">|</span>          <span class="hljs-number">0</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+---------+---------+---------------+------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h2 id="逻辑"><a href="#逻辑" class="headerlink" title="逻辑"></a>逻辑</h2><table><thead><tr><th>运算符</th><th>描述</th></tr></thead><tbody><tr><td>not 或 !</td><td>非  ； 备注：not null ⇒null</td></tr><tr><td>and 或 &amp;&amp;</td><td>与  ； 备注：任意一个操作数是null 则 ⇒ null</td></tr><tr><td>or 或 ||</td><td>或 ； 备注： 两个均为null 则 ⇒ null；有一个null，另一个非零则 为true，否则 null</td></tr><tr><td>xor</td><td>异或   ；相同为0，不同为1； 备注：任意一个操作数是null 则 ⇒ null</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-keyword">null</span> <span class="hljs-operator">||</span> <span class="hljs-string">&#x27;false&#x27;</span>, <span class="hljs-keyword">null</span> <span class="hljs-operator">||</span> <span class="hljs-number">1</span>, <span class="hljs-keyword">null</span> <span class="hljs-operator">||</span> <span class="hljs-number">0</span>,<span class="hljs-keyword">null</span> <span class="hljs-operator">||</span> <span class="hljs-number">-1</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------+-----------+-----------+------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-keyword">null</span> <span class="hljs-operator">||</span> <span class="hljs-string">&#x27;false&#x27;</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">null</span> <span class="hljs-operator">||</span> <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">null</span> <span class="hljs-operator">||</span> <span class="hljs-number">0</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">null</span> <span class="hljs-operator">||</span> <span class="hljs-number">-1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------+-----------+-----------+------------+</span><br><span class="hljs-operator">|</span>            <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>         <span class="hljs-number">1</span> <span class="hljs-operator">|</span>      <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>          <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------+-----------+-----------+------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span>, <span class="hljs-number">5</span> warnings (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h2 id="位"><a href="#位" class="headerlink" title="位"></a>位</h2><table><thead><tr><th>运算法</th><th>描述</th></tr></thead><tbody><tr><td>&amp;</td><td>位与（位AND）</td></tr><tr><td>｜</td><td>位或（位OR）</td></tr><tr><td>^</td><td>位异或（位XOR）</td></tr><tr><td>～</td><td>位取反</td></tr><tr><td>&gt;&gt;</td><td>位右移 「左补0」</td></tr><tr><td>&lt;&lt;</td><td>位左移「右补0」</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">#与<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-operator">&amp;</span> <span class="hljs-number">3</span>, bin(<span class="hljs-number">2</span>), bin(<span class="hljs-number">3</span>),bin(<span class="hljs-number">2</span> <span class="hljs-operator">&amp;</span> <span class="hljs-number">3</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+--------+------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2</span> <span class="hljs-operator">&amp;</span> <span class="hljs-number">3</span> <span class="hljs-operator">|</span> bin(<span class="hljs-number">2</span>) <span class="hljs-operator">|</span> bin(<span class="hljs-number">3</span>) <span class="hljs-operator">|</span> bin(<span class="hljs-number">2</span> <span class="hljs-operator">&amp;</span> <span class="hljs-number">3</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+--------+------------+</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">10</span>     <span class="hljs-operator">|</span> <span class="hljs-number">11</span>     <span class="hljs-operator">|</span> <span class="hljs-number">10</span>         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+--------+------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>#或<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">3</span>, bin(<span class="hljs-number">2</span>), bin(<span class="hljs-number">3</span>),bin(<span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">3</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+--------+------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">3</span> <span class="hljs-operator">|</span> bin(<span class="hljs-number">2</span>) <span class="hljs-operator">|</span> bin(<span class="hljs-number">3</span>) <span class="hljs-operator">|</span> bin(<span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">3</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+--------+------------+</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">3</span> <span class="hljs-operator">|</span> <span class="hljs-number">10</span>     <span class="hljs-operator">|</span> <span class="hljs-number">11</span>     <span class="hljs-operator">|</span> <span class="hljs-number">11</span>         <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+--------+------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>#异或<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-operator">^</span> <span class="hljs-number">3</span>, bin(<span class="hljs-number">2</span>), bin(<span class="hljs-number">3</span>),bin(<span class="hljs-number">2</span> <span class="hljs-operator">^</span> <span class="hljs-number">3</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+--------+------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2</span> <span class="hljs-operator">^</span> <span class="hljs-number">3</span> <span class="hljs-operator">|</span> bin(<span class="hljs-number">2</span>) <span class="hljs-operator">|</span> bin(<span class="hljs-number">3</span>) <span class="hljs-operator">|</span> bin(<span class="hljs-number">2</span> <span class="hljs-operator">^</span> <span class="hljs-number">3</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+--------+------------+</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">10</span>     <span class="hljs-operator">|</span> <span class="hljs-number">11</span>     <span class="hljs-operator">|</span> <span class="hljs-number">1</span>          <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+--------+------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>#取反<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">~</span><span class="hljs-number">1</span>, <span class="hljs-operator">~</span><span class="hljs-number">18446744073709551614</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------+-----------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-operator">~</span><span class="hljs-number">1</span>                   <span class="hljs-operator">|</span> <span class="hljs-operator">~</span><span class="hljs-number">18446744073709551614</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------+-----------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">18446744073709551614</span> <span class="hljs-operator">|</span>                     <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------+-----------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br># 📌 Mysql 常量默认 <span class="hljs-number">8</span>字节（<span class="hljs-number">64</span>位）<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> bin(<span class="hljs-number">1</span>),<span class="hljs-operator">~</span>bin(<span class="hljs-number">1</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+----------------------+</span><br><span class="hljs-operator">|</span> bin(<span class="hljs-number">1</span>) <span class="hljs-operator">|</span> <span class="hljs-operator">~</span>bin(<span class="hljs-number">1</span>)              <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+----------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1</span>      <span class="hljs-operator">|</span> <span class="hljs-number">18446744073709551614</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+----------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> bin(<span class="hljs-number">18446744073709551614</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------------------------------------------+</span><br><span class="hljs-operator">|</span> bin(<span class="hljs-number">18446744073709551614</span>)                                        <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------------------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1111111111111111111111111111111111111111111111111111111111111110</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------------------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>#左右移动，移动二进制左右补<span class="hljs-number">0</span>⃣️<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-number">8</span> <span class="hljs-operator">&gt;&gt;</span> <span class="hljs-number">1</span>, <span class="hljs-number">8</span> <span class="hljs-operator">&lt;&lt;</span> <span class="hljs-number">1</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">8</span> <span class="hljs-operator">&gt;&gt;</span> <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">8</span> <span class="hljs-operator">&lt;&lt;</span> <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+</span><br><span class="hljs-operator">|</span>      <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">16</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> bin(<span class="hljs-number">8</span>), bin(<span class="hljs-number">8</span> <span class="hljs-operator">&gt;&gt;</span> <span class="hljs-number">1</span>), bin(<span class="hljs-number">8</span> <span class="hljs-operator">&lt;&lt;</span> <span class="hljs-number">1</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+-------------+-------------+</span><br><span class="hljs-operator">|</span> bin(<span class="hljs-number">8</span>) <span class="hljs-operator">|</span> bin(<span class="hljs-number">8</span> <span class="hljs-operator">&gt;&gt;</span> <span class="hljs-number">1</span>) <span class="hljs-operator">|</span> bin(<span class="hljs-number">8</span> <span class="hljs-operator">&lt;&lt;</span> <span class="hljs-number">1</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+-------------+-------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1000</span>   <span class="hljs-operator">|</span> <span class="hljs-number">100</span>         <span class="hljs-operator">|</span> <span class="hljs-number">10000</span>       <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+-------------+-------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h2 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h2><table><thead><tr><th>优先级顺序「优先级从低到高 ↓ 」</th><th>运算符</th></tr></thead><tbody><tr><td>1「优先级最低」</td><td><code>:=</code></td></tr><tr><td>2</td><td>||、OR、XOR</td></tr><tr><td>3</td><td>&amp;&amp;、AND</td></tr><tr><td>4</td><td>NOT</td></tr><tr><td>5</td><td>BETWEEN、CASE、WHEN、THEN、ELSE</td></tr><tr><td>6</td><td>=(比较运算)、&lt;=&gt;、&lt;=、&gt;、&gt;=、!=、&lt;&gt;、IN、IS NULL、LIKE、REGEXP</td></tr><tr><td>7</td><td>｜</td></tr><tr><td>8</td><td>&amp;</td></tr><tr><td>9</td><td>&lt;&lt;和&gt;&gt;</td></tr><tr><td>10</td><td>-和+</td></tr><tr><td>11</td><td>*、/、DIV、%和MOD</td></tr><tr><td>12</td><td>^</td></tr><tr><td>13</td><td>-(负号)和 ～</td></tr><tr><td>14 「优先级最高」</td><td>！</td></tr></tbody></table><blockquote><p>优先级随便看看就好，使用 （） 控制优先级。</p></blockquote><hr><blockquote><p><code>= 与 :=（赋值）</code> 区别<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://blog.csdn.net/qq_37155959/article/details/81005287">[1]</span></a></sup></p><blockquote><ul><li>=<ul><li>只有在set和update时才是和:=一样，<strong>赋值</strong>的作用，其它都是<strong>等于</strong>的作用。鉴于此，用变量实现行号时，必须用:=</li></ul></li><li>:=<ul><li>不只在set和update时时赋值的作用，在select也是赋值的作用。</li></ul></li></ul></blockquote></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">####<br>#<span class="hljs-variable">@num</span> :<span class="hljs-operator">=</span> <span class="hljs-variable">@num</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span> 赋值运算<br>####<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">set</span> <span class="hljs-variable">@num</span><span class="hljs-operator">=</span><span class="hljs-number">0</span>;<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-variable">@num</span> :<span class="hljs-operator">=</span> <span class="hljs-variable">@num</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> num,<span class="hljs-keyword">User</span> <span class="hljs-keyword">from</span> mysql.user;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+------------------+</span><br><span class="hljs-operator">|</span> num  <span class="hljs-operator">|</span> <span class="hljs-keyword">User</span>             <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------------------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> mysql.infoschema <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span> mysql.session    <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span> mysql.sys        <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">4</span> <span class="hljs-operator">|</span> root             <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------------------+</span><br><span class="hljs-number">4</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span>, <span class="hljs-number">1</span> warning (<span class="hljs-number">0.00</span> sec)<br><br># <span class="hljs-comment">-------------------------------------------------------------------</span><br>####<br># <span class="hljs-variable">@num</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@num</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span> 此时是比较运算<br># <span class="hljs-variable">@num</span>不等于<span class="hljs-variable">@num</span><span class="hljs-operator">+</span><span class="hljs-number">1</span>，所以始终返回<span class="hljs-number">0</span><br>####<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">set</span> <span class="hljs-variable">@num</span><span class="hljs-operator">=</span><span class="hljs-number">0</span>;<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-variable">@num</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@num</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> num,<span class="hljs-keyword">User</span> <span class="hljs-keyword">from</span> mysql.user;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+------------------+</span><br><span class="hljs-operator">|</span> num  <span class="hljs-operator">|</span> <span class="hljs-keyword">User</span>             <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------------------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">0</span> <span class="hljs-operator">|</span> mysql.infoschema <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">0</span> <span class="hljs-operator">|</span> mysql.session    <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">0</span> <span class="hljs-operator">|</span> mysql.sys        <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">0</span> <span class="hljs-operator">|</span> root             <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------------------+</span><br><span class="hljs-number">4</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><section class="footnotes"><h6>Reference</h6><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://blog.csdn.net/qq_37155959/article/details/81005287">https://blog.csdn.net/qq_37155959/article/details/81005287</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;正文的一部分作为摘要&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Mysql" scheme="https://blog.dekun.wang/categories/Mysql/"/>
    
    <category term="基础" scheme="https://blog.dekun.wang/categories/Mysql/%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="Mysql" scheme="https://blog.dekun.wang/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>Mysql基础-2 ---『 数据类型 』</title>
    <link href="https://blog.dekun.wang/2021/07/20/Mysql%E5%9F%BA%E7%A1%80-2/"/>
    <id>https://blog.dekun.wang/2021/07/20/Mysql%E5%9F%BA%E7%A1%80-2/</id>
    <published>2021-07-20T03:30:12.000Z</published>
    <updated>2021-07-22T09:33:59.625Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>正文的一部分作为摘要</p></blockquote><span id="more"></span><h1 id="Mysql—数据类型"><a href="#Mysql—数据类型" class="headerlink" title="Mysql—数据类型"></a>Mysql—数据类型</h1><h2 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h2><table><thead><tr><th align="left">整数类型</th><th align="center">字节</th><th align="left">最小值</th><th align="left">最大值</th></tr></thead><tbody><tr><td align="left">tinyint（tiny int）</td><td align="center">1</td><td align="left">有符号 -128 「 $- 2^7$」<br />无符号 0</td><td align="left">有符号 127 「 $ 2^7 -1 $」<br />无符号 255  「 $ 2^8 -1 $」</td></tr><tr><td align="left">smallint （small int）</td><td align="center">2</td><td align="left">有符号 -32768 「 $ - 2^{15}$」<br />无符号 0</td><td align="left">有符号 32767「$2^{15}-1$」<br />无符号 65535 [ $2^{16}-1$ ]</td></tr><tr><td align="left">mediumint (medium int)</td><td align="center">3</td><td align="left">有符号 -8388608 「 $ - 2^{23}$」<br />无符号 0</td><td align="left">有符号 83388607 [ $ 2^{23}-1$ ]<br />无符号 16777215 [ $ 2^{24}-1$]</td></tr><tr><td align="left">int、integer</td><td align="center">4</td><td align="left">有符号 -2147483648 「 $ -2^{31}$ 」<br />无符号 0</td><td align="left">有符号 2147483647 「 $ 2^{31}-1$ 」<br />无符号 4294967295 「 $ 2^{32}-1$ 」</td></tr><tr><td align="left">bitint (big int)</td><td align="center">8</td><td align="left">有符号 -9223372036854775808<br />「 $ -2^{63}$ 」<br />无符号 0</td><td align="left">有符号 9223372036854775807 <br />「 $ 2^{63}-1$ 」<br />无符号 18446744073709551615 <br />「 $ 2^{64}$ 」</td></tr></tbody></table><blockquote><p>支持在类型名称后面的小括号内指定 <strong><em>显示宽度</em></strong> ，默认为int(11) 。例： int(5) 表示当数值宽度小于5位时在数字前面填满宽度。 </p><p>配合 zerofill 数字位数不够的空间用字符“0”填满。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t1 (<br>id <span class="hljs-type">int</span>,<br>  number <span class="hljs-type">int</span>  [unsigned <span class="hljs-operator">|</span> signed] # 默认 有符号 <br>);<br><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> t1 modify id <span class="hljs-type">int</span>(<span class="hljs-number">5</span>) zerofill<br># ⭐️ 使用zerofill 自动设置为  unsigned (无符号)<br># ⭐️ 并不会影响精度，按照数据类型实际精度存储。<br><br># 整数类型 属性：auto_increment 开始值<span class="hljs-number">1</span>，每行增加<span class="hljs-number">1.</span> <br><br># ⭐️ 一个表最多只能有一个 auto_increment列，必须定义为 <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> ，并定义为 <span class="hljs-keyword">primary</span> key 或 <span class="hljs-keyword">unique</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> ai (id <span class="hljs-type">int</span> auto_increment <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">primary</span> key);<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> ai (id <span class="hljs-type">int</span> auto_increment <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> , <span class="hljs-keyword">primary</span> key (id));<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> ai (id <span class="hljs-type">int</span> auto_increment <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> ,<span class="hljs-keyword">unique</span>(id));<br></code></pre></div></td></tr></table></figure><table><thead><tr><th align="left">浮点数类型</th><th align="center">字节</th><th>最小值</th><th>最大值</th></tr></thead><tbody><tr><td align="left">float</td><td align="center">4</td><td>$\pm1.175494351E-38$</td><td>$\pm3.402823466E+38$</td></tr><tr><td align="left">duble</td><td align="center">8</td><td>$\pm2.2250738585072014E-308$</td><td>$\pm1.7976931348623157E+308$</td></tr></tbody></table><table><thead><tr><th align="left">定点数类型</th><th align="center">字节</th><th align="center">描述</th></tr></thead><tbody><tr><td align="left">dec(M,D)<br />decimal(M,D)</td><td align="center">M+2</td><td align="center">最大取值范围与duble相同，给定decimal的有效取值范围由M和D决定</td></tr></tbody></table><blockquote><p>浮点数、定点数 都可以名称后增加（M,D） M:显示位数（整数+小数） D：小数点后显示D位，保存值四舍五入。</p><p>float(7,4)  显示：-999.9999</p><p>警告⭐️：浮点数后更 （M，D） 非标准用法。</p><p>float/double 不指定精度：默认按照实际精度显示（实际精度操作系统和硬件决定）</p><p>decimal 不指定精度：默认 dec(10,0)</p></blockquote><table><thead><tr><th align="left">位类型</th><th align="center">字节</th><th align="left">最小值</th><th>最大值</th></tr></thead><tbody><tr><td align="left">bit(M) 备注：M是二进制位数，不写默认1</td><td align="center">1~8</td><td align="left">BIT(1)</td><td>BIT(64)</td></tr></tbody></table><blockquote><p>❗️ 直接使用<code>select</code> 查询 bit类型字段无法显示。</p><p>❗️ 使用 bin( field ) 【显示为二进制格式】或 hex(field)【显示为十六进制格式】 函数进行读取。</p></blockquote><h2 id="日期与时间类型"><a href="#日期与时间类型" class="headerlink" title="日期与时间类型"></a>日期与时间类型</h2><table><thead><tr><th>日期📅和时间⌚️类型</th><th>字节</th><th>最小值</th><th>最大值</th></tr></thead><tbody><tr><td>date</td><td>4</td><td>1000-01-01</td><td>9999-12-31</td></tr><tr><td>datetime</td><td>8</td><td>1000-01-01 00:00:00</td><td>9999-12-31 23:59:59</td></tr><tr><td>timestamp</td><td>4</td><td>19700101080001</td><td>2038年的某个时刻</td></tr><tr><td>time</td><td>3</td><td>-838:59:59</td><td>838:59:59</td></tr><tr><td>year</td><td>1</td><td>1901</td><td>2155</td></tr></tbody></table><blockquote><p>年月日 ⇒ date</p><p>年月日时分秒 ⇒ date time 或 timestamp 「警告 ⭐️：timestamp与时区有关, 不适合存放比较久远日期『最大值』」</p><p>时分秒 ⇒ time</p><p>年份 ⇒ year    </p><blockquote><p> 比date占用空间少，year含有 2位或4位格式的年，默认 四位格式。</p><p>四位取值范围：1901～2155 和 0000</p><p><del>两位取值范围：70～69  表示：1970～2069 ⭐️ Mysql5.5.27 弃用</del></p></blockquote></blockquote><table><thead><tr><th>数据类型</th><th>零0⃣️值表示</th></tr></thead><tbody><tr><td>datetime</td><td>0000-00-00 00:00:00</td></tr><tr><td>date</td><td>0000-00-00</td></tr><tr><td>timestamp</td><td>00000000000000 「14个0⃣️」</td></tr><tr><td>time</td><td>00:00:00</td></tr><tr><td>year</td><td>0000</td></tr></tbody></table><blockquote><p>❗️timestamp 和系统属性：explicit_defaults_for_timestamp 「 略 」</p><p> datetime 与 timestamp 都可以设置 <code>on update curremt_timestamp</code> ，使得日期列可以随其他列的更新而自动更新为新时间。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 将 explici_defaults_for_timestamp设置 为<span class="hljs-keyword">on</span>，则默认值、<span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> 和 <span class="hljs-keyword">on</span> update <span class="hljs-built_in">CURRENT_TIMESTAMP</span>属性都❗️不会自动设置。<br><span class="hljs-keyword">set</span> explicit_defaults_for_timestamp<span class="hljs-operator">=</span><span class="hljs-keyword">on</span>;<br># <span class="hljs-number">8.0</span><span class="hljs-number">.2</span>版本之后默认<span class="hljs-keyword">on</span>，之前版本默认off（导致：自动设置<span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>、默认值 curremt_timestamp ，并设置`<span class="hljs-keyword">on</span> update curremt_timestamp`）<br># 设置为OFF，导致mysql只给表中第一个<span class="hljs-type">timestamp</span>字段设置默认值为系统时间。<br></code></pre></div></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">#查看当前时区<br><span class="hljs-keyword">show</span> variables <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;time_zone&#x27;</span>;<br>#时区值 为 <span class="hljs-keyword">SYSTEM</span> 默认值和主机的时区一致。<br><br># 当前时间<br><span class="hljs-keyword">select</span> now()<br><br>#修改时区为东八区<br><span class="hljs-keyword">set</span> time_zone<span class="hljs-operator">=</span><span class="hljs-string">&#x27;+8:00&#x27;</span><br></code></pre></div></td></tr></table></figure><blockquote><p>❗️ timestamp与datetime 区别：</p><ul><li>取值范围 【datetime 取值范围更大，包含timestamp范围内】</li><li>都可以设置默认值和 <code>ON UPDATE CURRENT_TIMESTAMP</code>属性，🚩<strong><em>使得日期列可以随其他列的更新而自动更新为最新时间</em></strong></li><li>timestamp 插入读取受时区影响</li></ul></blockquote><blockquote><p>datetime</p><ul><li><p>YYYY-MM-DD HH:MM:SS 或 YY-MM-DD HH:MM:SS 格式的字符串。分隔符【不严格】语法，可以使任意字符</p><blockquote><p>例如：98/12/31 11*22:11 ⇔ 98-12-31 11:22:11 等同</p><p>​           1979-6-9  ⇔ 1979-06-09 等同</p><p>​            1979-10-30 1:2:3  ⇔ 1979-10-30 01:02:03 等同</p></blockquote></li><li><p>YYYYMMDDHHMMSS 或 YYMMDDHHMMSS 格式没有间隔符</p><blockquote><p>例如：</p><p>​        19970523091528 和 970523091528  ➱ 1997-05-23 09:15:28 （被解释的时间）</p><p>​        971122129015 不合法，因为分钟不合法将被设置为：0000-00-00 00:00:00</p></blockquote></li><li><p>函数返回结果，其值适合 datetime 、date或timestamp 。时间函数： now() 【2021-07-20 17:56:27】 , current_date() 「2021-07-20」</p></li></ul></blockquote><h2 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h2><table><thead><tr><th>字符串类型</th><th>字节</th><th>描述及存储需求</th><th>用途</th></tr></thead><tbody><tr><td>char(M)</td><td>M</td><td>M 为0～255  「 $ 2^8 -1 $」之间的整数</td><td>定长字符串</td></tr><tr><td>varchar(M)</td><td></td><td>M 为0～ 65535 [ $2^{16}-1$ ]之间的整数，<strong><em>值的长度+1个字节</em></strong></td><td>变长字符串</td></tr><tr><td>tinyblob</td><td></td><td>允许长度0～255  「 $ 2^8 -1 $」字节，值的长度+1个字节</td><td>不超过 255 个字符的二进制字符串</td></tr><tr><td>blob</td><td></td><td>允许长度0～65535 [ $2^{16}-1$ ]，值的长度+2个字节</td><td>二进制形式的长文本数据</td></tr><tr><td>mediumblob</td><td></td><td>允许长度0～167772150 [ $ (2^{24}-1)\times10$]，值的长度+3个字节</td><td>二进制形式的中等长度文本数据</td></tr><tr><td>longblob</td><td></td><td>允许长度0～4294967295 「 $ 2^{32}-1$ 」，值的长度+4个字节</td><td>二进制形式的极大文本数据</td></tr><tr><td>tinytext</td><td></td><td>允许长度0～255  「 $ 2^8 -1 $」，值的长度+2个字节</td><td>短文本字符串</td></tr><tr><td>text</td><td></td><td>允许长度0～65535 [ $2^{16}-1$ ]，值的长度+2个字节</td><td>长文本数据</td></tr><tr><td>mediumtext</td><td></td><td>允许长度0～167772150 [ $ (2^{24}-1)\times10$]，值的长度+3个字节</td><td>中等长度文本数据</td></tr><tr><td>longtext</td><td></td><td>允许长度0～4294967295 「 $ 2^{32}-1$ 」，值的长度+4个字节</td><td>极大文本数据</td></tr><tr><td>varbinary(M)</td><td></td><td>允许长度0～M个字节的<strong><em>变</em></strong>长字节字符串，值的长度+1个字符</td><td></td></tr><tr><td>binary(M)</td><td>M</td><td>允许长度0～M个字节的<strong><em>定</em></strong>长字节字符串</td><td></td></tr></tbody></table><h2 id="char与varchar-binary和varbinary"><a href="#char与varchar-binary和varbinary" class="headerlink" title="char与varchar / binary和varbinary"></a>char与varchar / binary和varbinary</h2><blockquote><p>binary varbinary 类似char和varchar</p><p>不同点：它们包含二进制字符串而不包含非二进制字符串</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t(c <span class="hljs-type">binary</span>(<span class="hljs-number">3</span>));<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t  <span class="hljs-keyword">values</span> (<span class="hljs-string">&#x27;a&#x27;</span>);<br># ❗️ 正确语法，网上搜索是用来提高速度<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t <span class="hljs-keyword">set</span> c<span class="hljs-operator">=</span><span class="hljs-string">&#x27;b&#x27;</span>;<br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> , hex(c), c<span class="hljs-operator">=</span><span class="hljs-string">&#x27;a&#x27;</span>,c<span class="hljs-operator">=</span><span class="hljs-string">&#x27;a\0&#x27;</span>,c<span class="hljs-operator">=</span><span class="hljs-string">&#x27;a\0\0&#x27;</span> <span class="hljs-keyword">from</span> t<br># a  <span class="hljs-number">610000</span> flase <span class="hljs-literal">false</span> <span class="hljs-literal">true</span><br>#❗️保存<span class="hljs-type">binary</span>值时，在值最后填充<span class="hljs-string">&#x27;0x00&#x27;</span>(零字节)以达到指定的字段定义长度<br>#  例如：<span class="hljs-type">binary</span>(<span class="hljs-number">3</span>) 插入 <span class="hljs-string">&#x27;a&#x27;</span>变成为<span class="hljs-string">&#x27;a\0\0&#x27;</span><br></code></pre></div></td></tr></table></figure><h2 id="enum类型"><a href="#enum类型" class="headerlink" title="enum类型"></a>enum类型</h2><blockquote><ul><li>1~255     1个字节存储</li><li>255~65535  2个字节存储</li><li>最对允许65535个成员</li></ul></blockquote><p>枚举类型</p><ul><li>忽略大小写</li><li>插入值不在ENUM指定的范围，⭐️ 数字则按照初始化顺序。</li><li>📌 只允许从集合中取一个值。</li></ul><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t(<br>gender enum(<span class="hljs-string">&#x27;M&#x27;</span>,<span class="hljs-string">&#x27;F&#x27;</span>)  # M F 即是成员，使用时只能使用M或F<br>);<br><br># ⭐️<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;M&#x27;</span>),(<span class="hljs-string">&#x27;1&#x27;</span>),(<span class="hljs-string">&#x27;f&#x27;</span>),(<span class="hljs-keyword">null</span>);<br>Query OK, <span class="hljs-number">4</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.01</span> sec)<br>Records: <span class="hljs-number">4</span>  Duplicates: <span class="hljs-number">0</span>  Warnings: <span class="hljs-number">0</span><br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+</span><br><span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+</span><br><span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>  #<span class="hljs-number">1</span> 被替换为 M ,初始化顺序。此例如数字大于<span class="hljs-number">2</span>则报错。<br><span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+</span><br><span class="hljs-number">4</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h2 id="set类型"><a href="#set类型" class="headerlink" title="set类型"></a>set类型</h2><blockquote><p>set 与enum类型类似，📍 <strong><em>主要区别是set可以选取集合中多个成员</em></strong>。</p></blockquote><p>占用字节</p><ul><li>1～8 成员集合，占用1个字节</li><li>9～16 成员集合，占用2个字节</li><li>17～24成员集合，占用3个字节</li><li>25～32 成员集合，占用4个字节</li><li>33～64成员集合，占用8个字节</li></ul><p>存储注意❗️：</p><ul><li>重复成员仅保留一个</li><li>非集合中成员报错</li></ul><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t (<br>    col <span class="hljs-keyword">set</span> (<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>)<br>);<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span>  t <span class="hljs-keyword">values</span> (<span class="hljs-string">&#x27;a,b&#x27;</span>),(<span class="hljs-string">&#x27;a,d,a&#x27;</span>),(<span class="hljs-string">&#x27;a,b&#x27;</span>),(<span class="hljs-string">&#x27;a,c&#x27;</span>),(<span class="hljs-string">&#x27;a&#x27;</span>);<br>Query OK, <span class="hljs-number">5</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.00</span> sec)<br>Records: <span class="hljs-number">5</span>  Duplicates: <span class="hljs-number">0</span>  Warnings: <span class="hljs-number">0</span><br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-operator">|</span> col  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-operator">|</span> a,b  <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> a,d  <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> a,b  <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> a,c  <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> a    <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-number">5</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></div></td></tr></table></figure><h2 id="JSON类型"><a href="#JSON类型" class="headerlink" title="JSON类型"></a>JSON类型</h2><blockquote><p>5.7.8版本开始支持JSON数据类型。</p><p>JSON 数据类型，会自动校验JSON格式是否正确。</p><p>json_type() 函数判断JSON数据是什么类型。 例如：<code>select json_type(&quot;abc&quot;) type</code>，结果 type  显示为String类型</p><p>大小写敏感 📌，JSON默认排序规则 utf8mb4_bin 导致。</p><p>📌 常见的 null、true、false必须是小写才合法； <code>select json_valid(&#39;null&#39;) valid</code>  ，判断是否合法。1合法，0 非法。</p><p>警告⭐️： JSON类型，不允许❎设置默认值，最大长度由系统常量    <code>max_allowed_packet</code>控制。该值仅在服务器进行存储的时候进行限制，在内存中进行计算时允许超过该值。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 📌 <span class="hljs-keyword">value</span>含有特殊符号，需使用反斜杠转义<br><br># 方法一：显示插入转义字符<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t <span class="hljs-keyword">values</span>( <span class="hljs-built_in">json_object</span>(&quot;name&quot;,&quot;ab\&quot;c&quot;));<br><br># 方法二：隐示插入转义字符<br>#  双斜杠 ⭐️<br>insert into t values(&#x27;&#123;&quot;name&quot;,&quot;ab\\&quot;c&quot;&#125;<span class="hljs-string">&#x27;);</span><br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;正文的一部分作为摘要&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Mysql" scheme="https://blog.dekun.wang/categories/Mysql/"/>
    
    <category term="基础" scheme="https://blog.dekun.wang/categories/Mysql/%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="Mysql" scheme="https://blog.dekun.wang/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>Mysql基础-1</title>
    <link href="https://blog.dekun.wang/2021/07/19/Mysql%E5%9F%BA%E7%A1%80-1/"/>
    <id>https://blog.dekun.wang/2021/07/19/Mysql%E5%9F%BA%E7%A1%80-1/</id>
    <published>2021-07-19T02:31:12.000Z</published>
    <updated>2021-07-22T09:34:04.893Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>正文的一部分作为摘要</p></blockquote><span id="more"></span><h2 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h2><ul><li>DDL（Data Definition Language/数据定义语句）<ul><li>create</li><li>drop</li><li>alter</li><li>……</li></ul></li><li>DML （Data Manipulation Language/数据操纵语句）<ul><li>insert</li><li>delete</li><li>update</li><li>select </li><li>……</li></ul></li><li>DCL （Data Control Language/数据控制语句）<ul><li>grant</li><li>revoke</li><li>…….</li></ul></li></ul><h2 id="Mysql-基础"><a href="#Mysql-基础" class="headerlink" title="Mysql 基础"></a>Mysql 基础</h2><h3 id="DB-init"><a href="#DB-init" class="headerlink" title="DB init"></a>DB init</h3><ol><li><p>创建数据库 ； <code>create  datebase dbname</code></p></li><li><p>查看数据；<code>show databases</code></p></li><li><p>选择数据库；<code>use dbname</code></p><ol><li>show databases 查看 dbname 数据库中创建的所有数据表 <code>show tables</code></li></ol></li><li><p>删除数据库 ;<code>drop database dbname</code></p><blockquote><p>⭐️ <code>dbname</code>  实际数据库名称</p></blockquote></li></ol><h3 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h3><ul><li><p>创建表 </p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs SQL"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> tablename(<br>colume_name_1 column_type_1 constraints,<br> ......<br>colume_name_1 column_type_1 constraints<br>);<br></code></pre></div></td></tr></table></figure><blockquote><p>column_name: 列名字</p><p>column_type: 数据类型</p><p>constraints：约束条件</p><blockquote><p>⭐️  on update</p><p>⭐️  on delete</p></blockquote></blockquote></li><li><p>查看表结构：<code>desc tableNmae</code></p></li><li><p>删除表 ： <code>drop table tableName</code></p></li><li><p>修改表： </p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">#修改表字段<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tableName modify [<span class="hljs-keyword">column</span>] column_definition [<span class="hljs-keyword">first</span><span class="hljs-operator">|</span>after col_name]<br>#增加表字段<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tableName <span class="hljs-keyword">add</span> [<span class="hljs-keyword">column</span>] column_definition [<span class="hljs-keyword">first</span> <span class="hljs-operator">|</span>after col_name]<br>#删除表字段<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tableName <span class="hljs-keyword">drop</span> [<span class="hljs-keyword">column</span>] col_umn<br>#字段改名<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tableName change [<span class="hljs-keyword">column</span>] old_col_name column_definition [<span class="hljs-keyword">first</span><span class="hljs-operator">|</span>after col_name]<br>#修改字段排序顺序<br>可选项 [<span class="hljs-keyword">first</span><span class="hljs-operator">|</span>after col_name] 控制，mysql独有<br>#更改表名<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> tableName rename [<span class="hljs-keyword">to</span>] new_tableName<br><br></code></pre></div></td></tr></table></figure><blockquote><p>change / modify 都可以修改表的定义<br>不同点：change 后面需要写两次列名<br>优点：change优点是可以修改列名称，modify则不能。</p></blockquote></li></ul><h3 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h3><ul><li><p>插入数据</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tableName(field1,field2,...,fieldn) <span class="hljs-keyword">values</span> (value1,value2,...,valuen);<br><br><span class="hljs-operator">&gt;</span>field 可以不写，但<span class="hljs-keyword">values</span>值顺序需要与表结构一致。<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tableName  <span class="hljs-keyword">values</span> (value1,value2,...,valuen);<br># 自动设置 默认值、<span class="hljs-keyword">null</span>、自增<br><br># 一次插入多条数据<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tableName(field1,field2,...,fieldn)<br><span class="hljs-keyword">values</span> <br>(value1,value2,...,valuen),<br>(value1,value2,...,valuen),<br>.....<br>(value1,value2,...,valuen);<br></code></pre></div></td></tr></table></figure></li><li><p>更新数据</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">update tableName <span class="hljs-keyword">set</span> field1<span class="hljs-operator">=</span>value1,field2<span class="hljs-operator">=</span>value2,...,field<span class="hljs-operator">-</span>valuen [<span class="hljs-keyword">where</span> <span class="hljs-keyword">condition</span>]<br><br># 同时修改多个表<br>update t1,t2,...,tn <span class="hljs-keyword">set</span> t1.field1<span class="hljs-operator">=</span>expr1,tn.fieldn<span class="hljs-operator">=</span>exprn  [<span class="hljs-keyword">where</span> <span class="hljs-keyword">condition</span>]<br></code></pre></div></td></tr></table></figure><blockquote><p>⭐️ 注意：多表更新的语法更多的用于根据一个表的字段来动态地更新另外一个表的字段。</p></blockquote></li><li><p>删除数据</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> tableName [<span class="hljs-keyword">where</span> <span class="hljs-keyword">condition</span>]<br><br># 同时修改多个表<br><span class="hljs-keyword">delete</span> t1,t2,...,tn <span class="hljs-keyword">from</span> t1,t2,...,tn   [<span class="hljs-keyword">where</span> <span class="hljs-keyword">condition</span>]<br></code></pre></div></td></tr></table></figure></li><li><p>查询数据</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tableName [<span class="hljs-keyword">where</span> <span class="hljs-keyword">condition</span>]<br># <span class="hljs-operator">*</span> 星号表示所有表字段<br></code></pre></div></td></tr></table></figure><ol><li><p>查询不重复的记录</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">distinct</span><br></code></pre></div></td></tr></table></figure></li><li><p>条件查询</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">where</span> 后面增加条件 <br> <span class="hljs-operator">&gt;</span> 、<span class="hljs-operator">&lt;</span> 、<span class="hljs-operator">&gt;=</span> 、<span class="hljs-operator">&lt;=</span> 、<span class="hljs-operator">!=</span> 、 <span class="hljs-keyword">or</span> 、 <span class="hljs-keyword">and</span> <br></code></pre></div></td></tr></table></figure></li><li><p>排序和限制</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tableName [<span class="hljs-keyword">where</span> <span class="hljs-keyword">condition</span>] [<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> field1 [<span class="hljs-keyword">desc</span><span class="hljs-operator">|</span><span class="hljs-keyword">asc</span>],field2 [<span class="hljs-keyword">desc</span><span class="hljs-operator">|</span><span class="hljs-keyword">asc</span>],...,fieldn [<span class="hljs-keyword">desc</span><span class="hljs-operator">|</span><span class="hljs-keyword">asc</span>]]<br># 排序<br># <span class="hljs-keyword">desc</span> : 降序<br># <span class="hljs-keyword">asc</span> : 生序 （默认值）<br><br>## 分页<br><span class="hljs-keyword">select</span> ...[limit offset_start ,row_count]<br># <span class="hljs-keyword">offset</span> <span class="hljs-keyword">start</span> 表示记录的起始偏移量; offset_start 不写，则默认为:<span class="hljs-number">0</span><br># <span class="hljs-type">row</span> count 表示显示的行数<br></code></pre></div></td></tr></table></figure><blockquote><p>⭐️ 注意 : order by 可以根多个不同的排序字段，并且每个排序字段可以有不同的排序顺序。</p><p>如果排序字段的值一样，则值相同的字段按照第二个排序字段进行排序，依此类推。</p><p>如果只有一个排序字段，则这些字段相同的记录将会无序排序。</p></blockquote><blockquote><p>⭐️  limit 经常和 order by 一起配合使用来进行记录的分页显示</p><p>limit属于Mysql 扩展 SQL92后的语法。</p></blockquote></li><li><p>聚合</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> [field1,field2,...,fieldn] fun_name <span class="hljs-keyword">from</span> tableName<br>[<span class="hljs-keyword">where</span> where_contition]<br>[<br>  <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> field1,field2,...,fieldn<br>[<span class="hljs-keyword">with</span> <span class="hljs-keyword">rollup</span>]<br>]<br>[<span class="hljs-keyword">having</span> where_contition]<br><br># fun_name : 聚合函数； 常用：<span class="hljs-built_in">sum</span>(求和);<span class="hljs-built_in">count</span>(记录数);<span class="hljs-built_in">avg</span>(平均数);<span class="hljs-built_in">max</span>(最大值);<span class="hljs-built_in">min</span>(最小值);<br># <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> :分类聚合字段（分类<span class="hljs-operator">/</span>分组）<br># <span class="hljs-keyword">with</span> <span class="hljs-keyword">rollup</span> : 对分类聚合后结果在进行汇总 ; ⭐️ : Mysql语法独有<br># <span class="hljs-keyword">having</span> :分类后的结果在进行条件过滤<br><br>#⭐️ <span class="hljs-keyword">having</span>与<span class="hljs-keyword">where</span> 区别：<span class="hljs-keyword">having</span>对聚合后的结果进行条件的过滤，<span class="hljs-keyword">where</span> 是在聚合前就对记录进行过滤。<br># 优先使用 <span class="hljs-keyword">where</span>:  结果集减少，提高聚合效率。<br></code></pre></div></td></tr></table></figure></li><li><p>表连接</p><ol><li><p>内连接</p><blockquote><p>仅选出两张表中互相匹配的记录</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> table1 t1,table2 t2 <span class="hljs-keyword">on</span> t1.field<span class="hljs-operator">=</span>t2.field<br>或<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">join</span> table2 <span class="hljs-keyword">on</span> t1.field<span class="hljs-operator">=</span>t2.field<br></code></pre></div></td></tr></table></figure></li><li><p>外连接</p><blockquote><p>选出其他不匹配的记录</p></blockquote><ol><li><p>左连接</p><blockquote><p>包含所有的左边👈表中的记录甚至是右边👉表中没有和它匹配的记录</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> table1 t1 <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> table2 t2 <span class="hljs-keyword">on</span> t1.field<span class="hljs-operator">=</span>t2.field<br></code></pre></div></td></tr></table></figure></li><li><p>右连接</p><blockquote><p>包含所有的右边👉表中的记录甚至是左边👈表中没有和它匹配的记录</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> table1 t1 <span class="hljs-keyword">right</span> <span class="hljs-keyword">join</span> table2 t2 <span class="hljs-keyword">on</span> t1.field<span class="hljs-operator">=</span>t2.field<br></code></pre></div></td></tr></table></figure></li></ol></li></ol></li><li><p>子查询 </p><blockquote><p>↩︎ 用于子查询的关键字</p><p>in </p><p>not in</p><p>=</p><p>!=</p><p>exists</p><p>not exists</p></blockquote></li><li><p>记录联合</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t1<br><span class="hljs-keyword">union</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span>  # <span class="hljs-operator">|</span> <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> 或<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t2<br>...<br><span class="hljs-keyword">union</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span> <br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tn;<br></code></pre></div></td></tr></table></figure><blockquote><p>⭐️ 注意：union all 是把结果集直接合并在一起，而union是将union all 后的结果进行一次 distinct，去除重复记录后的结果。</p></blockquote></li></ol></li></ul><h3 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h3><ul><li>grant 赋予权限</li><li>revoke 回收权限</li></ul><h2 id="Mysql-元数据"><a href="#Mysql-元数据" class="headerlink" title="Mysql 元数据"></a>Mysql 元数据</h2><ul><li>information_schema : 记录元数据信息，虚拟数据库，物理上并不存在相关的目录和文件。</li><li>常见视图<ul><li>schemate：当前Mysql实例中所有数据库的信息，<code>show databases</code>结果取自此表</li><li>tables ：表/视图信息</li><li>columns： 表中的列信息</li><li>statistics：表索引信息</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 删除数据库test1下所有前缀为tmp的表<br><span class="hljs-keyword">select</span> concat(<span class="hljs-string">&#x27;drop table test1.&#x27;</span>,table_name,<span class="hljs-string">&#x27;;&#x27;</span>) <span class="hljs-keyword">from</span> tables <span class="hljs-keyword">where</span> table_schema<span class="hljs-operator">=</span><span class="hljs-string">&#x27;test1&#x27;</span> <span class="hljs-keyword">and</span> table_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;tmp%&#x27;</span>;<br>#将数据库test1下所有存储引擎为 myisam的表改为innodb<br><span class="hljs-keyword">select</span> concat(<span class="hljs-string">&#x27;alter table test1.&#x27;</span>,table_name,<span class="hljs-string">&#x27;engine=innodb;&#x27;</span>) <span class="hljs-keyword">from</span> tables <span class="hljs-keyword">where</span> table_schema<span class="hljs-operator">=</span><span class="hljs-string">&#x27;test1&#x27;</span> <span class="hljs-keyword">and</span>  engine<span class="hljs-operator">=</span><span class="hljs-string">&#x27;MyISAM&#x27;</span>;<br></code></pre></div></td></tr></table></figure><h2 id="帮助的使用"><a href="#帮助的使用" class="headerlink" title="帮助的使用"></a>帮助的使用</h2><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 查阅 所有可提供查询的分类<br>mysql<span class="hljs-operator">&gt;</span> ? contents<br># 查询具体某个类<br>mysql<span class="hljs-operator">&gt;</span> ? 类别名称<br># 快速查询帮助<br>mysql<span class="hljs-operator">&gt;</span>? <span class="hljs-keyword">show</span><br>#查询 创建表语法<br>mysql<span class="hljs-operator">&gt;</span> ? <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span><br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;正文的一部分作为摘要&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Mysql" scheme="https://blog.dekun.wang/categories/Mysql/"/>
    
    <category term="基础" scheme="https://blog.dekun.wang/categories/Mysql/%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="Mysql" scheme="https://blog.dekun.wang/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>思维导图-book-java多线程编程核心技术-第一版</title>
    <link href="https://blog.dekun.wang/2021/07/02/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE-book-java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E7%AC%AC%E4%B8%80%E7%89%88/"/>
    <id>https://blog.dekun.wang/2021/07/02/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE-book-java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E7%AC%AC%E4%B8%80%E7%89%88/</id>
    <published>2021-07-02T09:56:13.000Z</published>
    <updated>2021-07-22T09:35:17.117Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>思维导图</p></blockquote><span id="more"></span><p><a href="https://www.edrawsoft.cn/viewer/public/s/60442804979443">查阅地址：https://www.edrawsoft.cn/viewer/public/s/60442804979443 </a></p><blockquote><p>Safari浏览器、360浏览器，可以访问</p><p>谷歌浏览器，上面链接无法展示</p></blockquote><iframe frameborder= "no" border= "0" marginwidth= "0" marginheight= "0" width=800 height=800 src= "https://edrawcloudpubliccn.oss-cn-shenzhen.aliyuncs.com/viewer/self/18537546/share/2021-7-2/1625219691/main.svg"></iframe>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;思维导图&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Book" scheme="https://blog.dekun.wang/categories/Book/"/>
    
    <category term="Java" scheme="https://blog.dekun.wang/categories/Book/Java/"/>
    
    <category term="思维导图" scheme="https://blog.dekun.wang/categories/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/"/>
    
    <category term="Book" scheme="https://blog.dekun.wang/categories/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/Book/"/>
    
    
    <category term="多线程" scheme="https://blog.dekun.wang/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
    <category term="Book" scheme="https://blog.dekun.wang/tags/Book/"/>
    
    <category term="java多线程编程核心技术--第一版" scheme="https://blog.dekun.wang/tags/java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E7%AC%AC%E4%B8%80%E7%89%88/"/>
    
  </entry>
  
  <entry>
    <title>Failure to find net.sf.json-lib:json-lib:jar:JDK15:</title>
    <link href="https://blog.dekun.wang/2020/12/21/net-sf-json-lib-json-lib-jar-JDK15/"/>
    <id>https://blog.dekun.wang/2020/12/21/net-sf-json-lib-json-lib-jar-JDK15/</id>
    <published>2020-12-21T04:16:47.000Z</published>
    <updated>2021-07-02T09:02:08.085Z</updated>
    
    <content type="html"><![CDATA[<p>Mac 系统报错：Failure to find net.sf.json-lib:json-lib:jar:JDK15:</p><figure class="highlight stata"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs stata">[<span class="hljs-keyword">ERROR</span>] Failed to execute goal <span class="hljs-keyword">on</span> project BI: Could not resolve dependencies <span class="hljs-keyword">for</span> project ******* : Failure to find <span class="hljs-keyword">net</span>.sf.json-lib:json-lib:jar:JDK15:2.4 <span class="hljs-keyword">in</span> https:<span class="hljs-comment">//repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -&gt; [Help 1]</span><br>[<span class="hljs-keyword">ERROR</span>] <br>[<span class="hljs-keyword">ERROR</span>] To see the full <span class="hljs-keyword">stack</span> trace of the errors, re-<span class="hljs-keyword">run</span> Maven with the -<span class="hljs-keyword">e</span> switch.<br>[<span class="hljs-keyword">ERROR</span>] Re-<span class="hljs-keyword">run</span> Maven using the -X switch to enable full debug logging.<br>[<span class="hljs-keyword">ERROR</span>] <br>[<span class="hljs-keyword">ERROR</span>] <span class="hljs-keyword">For</span> <span class="hljs-keyword">more</span> information <span class="hljs-keyword">about</span> the errors and possible solutions, please <span class="hljs-keyword">read</span> the following articles:<br>[<span class="hljs-keyword">ERROR</span>] [<span class="hljs-keyword">Help</span> 1] http:<span class="hljs-comment">//cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException</span><br><br></code></pre></div></td></tr></table></figure><p>解决方式：修改Pom文件，<code>&lt;classifier&gt;JDK15&lt;/classifier&gt;</code> 为值修改为小写<code>&lt;classifier&gt;jdk15&lt;/classifier&gt;</code> 则可以正常下载jar包，大小写自测只影响第一次下载，自行决定是否保留修改。</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>net.sf.json-lib<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>json-lib<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>JDK15<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></div></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Mac 系统报错：Failure to find net.sf.json-lib:json-lib:jar:JDK15:&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter hljs&quot;&gt;&lt;div </summary>
      
    
    
    
    <category term="Maven" scheme="https://blog.dekun.wang/categories/Maven/"/>
    
    
    <category term="Maven" scheme="https://blog.dekun.wang/tags/Maven/"/>
    
    <category term="net.sf.json-lib" scheme="https://blog.dekun.wang/tags/net-sf-json-lib/"/>
    
  </entry>
  
  <entry>
    <title>svn迁移git</title>
    <link href="https://blog.dekun.wang/2020/07/31/svn%E8%BF%81%E7%A7%BBgit/"/>
    <id>https://blog.dekun.wang/2020/07/31/svn%E8%BF%81%E7%A7%BBgit/</id>
    <published>2020-07-31T08:18:05.000Z</published>
    <updated>2021-07-02T08:58:18.664Z</updated>
    
    <content type="html"><![CDATA[<p>#git仓库迁移</p><blockquote><p>将svn转移到git并保留提交记录</p></blockquote><ul><li><p>1.确定svn所有用户</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">svn log --xml | grep author | sort -u | perl -pe &#x27;s/.*&gt;(.*?)&lt;.*/$1 = /&#x27; &gt;user.txt<br></code></pre></div></td></tr></table></figure><blockquote><p>示例：svn=git&lt;email&gt;<br>wangdekun = wangdekun&lt;<a href="mailto:dekun555@163.co">dekun555@163.co</a>&gt;</p></blockquote></li></ul><ul><li>2.拉取svn代码，并转换成git版本控制</li></ul> <figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">git svn clone  --no-metadata --no-minimize-url --authors-file=users.txt  [svn url]  [local file name]<br><br>示例<br> <br> git svn clone  --no-metadata --no-minimize-url --authors-file=users.txt  https://127.0.0.01/svn/repo/code  iotcode<br></code></pre></div></td></tr></table></figure><ul><li>3.清理svn信息参考官方文档 <a href="https://git-scm.com/book/zh/v2/Git-%E4%B8%8E%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F-%E8%BF%81%E7%A7%BB%E5%88%B0-Git">git教程</a> 。<em>注：也许不需要清理</em></li><li>4.本地仓库添加添加远程仓库</li></ul><figure class="highlight css"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs css"> 添加<br>git remote add <span class="hljs-selector-attr">[origin name]</span> <span class="hljs-selector-attr">[url]</span><br><br> 查看<br> git remote -v<br></code></pre></div></td></tr></table></figure><ul><li><p>5.拉取远程仓库，因为本地仓库与远程仓库无交集，需要使用<code>git pull origin master --allow-unrelated-histories</code> 拉取代码。<a href="https://blog.csdn.net/lindexi_gd/article/details/52554159">参考</a></p></li><li><p>6.推送到远程服务器<code>git push origin --all</code></p><blockquote><p><a href="https://github.wangkaimin.com/2018/09/05/git-svn-mac-error.html">Mac系统，第二步异常参考</a></p></blockquote></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;#git仓库迁移&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;将svn转移到git并保留提交记录&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;1.确定svn所有用户&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;</summary>
      
    
    
    
    <category term="Git" scheme="https://blog.dekun.wang/categories/Git/"/>
    
    
    <category term="Git" scheme="https://blog.dekun.wang/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Oracle不可见字符</title>
    <link href="https://blog.dekun.wang/2020/04/19/Oracle%E4%B8%8D%E5%8F%AF%E8%A7%81%E5%AD%97%E7%AC%A6/"/>
    <id>https://blog.dekun.wang/2020/04/19/Oracle%E4%B8%8D%E5%8F%AF%E8%A7%81%E5%AD%97%E7%AC%A6/</id>
    <published>2020-04-19T09:23:54.000Z</published>
    <updated>2021-07-02T09:02:21.246Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Oracle-不可见字符处理"><a href="#Oracle-不可见字符处理" class="headerlink" title="Oracle 不可见字符处理"></a>Oracle 不可见字符处理</h1><h2 id="1、处理过程"><a href="#1、处理过程" class="headerlink" title="1、处理过程"></a>1、处理过程</h2><ul><li>表结构</li></ul><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs SQL"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> telphone_temp_20190821(<br>    telnum varchar2(<span class="hljs-number">32</span>)<br>);<br></code></pre></div></td></tr></table></figure><ul><li>查询数据，确定Ascii值</li></ul><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs SQL"><span class="hljs-keyword">select</span> ROWNUM<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span><span class="hljs-built_in">trim</span>(telnum)<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span>lengthb(telnum)<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span> dump(telnum) <span class="hljs-keyword">from</span> telphone_temp_20190821 <span class="hljs-keyword">where</span>  ROWNUM <span class="hljs-operator">&lt;</span><span class="hljs-number">3</span>;<br></code></pre></div></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs SQL">ROWNUM<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span><span class="hljs-built_in">TRIM</span>(TELNUM)<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span>LENGTHB(TELNUM)<span class="hljs-operator">||</span><span class="hljs-string">&#x27;#&#x27;</span><span class="hljs-operator">||</span>DUMP(TELNUM)<br><span class="hljs-comment">-----------------------------------------------------------------</span><br><span class="hljs-number">1</span>#              <span class="hljs-number">146</span>           #<span class="hljs-number">17</span>#Typ<span class="hljs-operator">=</span><span class="hljs-number">1</span> Len<span class="hljs-operator">=</span><span class="hljs-number">17</span>: <span class="hljs-number">9</span>,<span class="hljs-number">9</span>,<span class="hljs-number">49</span>,<span class="hljs-number">52</span>,<span class="hljs-number">54</span>,<span class="hljs-number">9</span>,<span class="hljs-number">9</span><br><span class="hljs-number">2</span>#              <span class="hljs-number">144</span>           #<span class="hljs-number">15</span>#Typ<span class="hljs-operator">=</span><span class="hljs-number">1</span> Len<span class="hljs-operator">=</span><span class="hljs-number">15</span>: <span class="hljs-number">9</span>,<span class="hljs-number">9</span>,<span class="hljs-number">49</span>,<span class="hljs-number">52</span>,<span class="hljs-number">52</span>,<span class="hljs-number">9</span>,<span class="hljs-number">9</span><br><br></code></pre></div></td></tr></table></figure><blockquote><p>不可见字符 ascii值等于9</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> chr(<span class="hljs-number">9</span>) <span class="hljs-keyword">from</span> dual;<br></code></pre></div></td></tr></table></figure><ul><li>replace剔除不可见字符，利用<code>chr()</code>函数将数值转换成<strong><em>不可见</em></strong>字符</li></ul><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs SQL"><span class="hljs-keyword">select</span> replace(telnum, chr(<span class="hljs-number">9</span>), <span class="hljs-string">&#x27;&#x27;</span>) <span class="hljs-keyword">from</span> telphone_temp_20190821 <span class="hljs-keyword">where</span> ROWNUM <span class="hljs-operator">&lt;</span><span class="hljs-number">3</span>;<br></code></pre></div></td></tr></table></figure><h2 id="2、Oracle-函数"><a href="#2、Oracle-函数" class="headerlink" title="2、Oracle 函数"></a>2、Oracle 函数</h2><ul><li><p><code>dump(expression [, return_format] [, start_position] [, length] )</code></p><div class="hljs code-wrapper"><pre><code>expression：要分析的表达式。return_format：决定了返回值的格式，该参数可以是以下任何值：     ● 8 ：八进制符号     ● 10 ：十进制符号     ● 16 ：十六进制符号     ● 17 ：单个字符     ● 1008 ：带字符集名称的八进制符号     ● 1010 ：带字符集名称的十进制符号     ● 1016 ：带字符集名称的十六进制符号     ● 1017 ：带字符集名称的单个字符start_position ：可选的，要返回的内部表示的起始位置。length ：可选的，要返回的内部表示的长度。</code></pre></div></li></ul><div class="hljs code-wrapper"><pre><code>返回值: Typ=1 Len=17: [CharacterSet=ZHS16GBK] 9,9,49,52,54,9,9    ● Type : 字段类型（见表格）    ● Len ：长度    ● 每个字符的 Ascii值</code></pre></div><ul><li><code>lengthb()</code>：返回的是 字节数</li></ul><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs SQL"><span class="hljs-keyword">select</span> length(<span class="hljs-string">&#x27;Oracle&#x27;</span>) <span class="hljs-keyword">from</span> dual<br>结果：<span class="hljs-number">6</span><br><span class="hljs-keyword">select</span> lengthb(<span class="hljs-string">&#x27;Oracle&#x27;</span>) <span class="hljs-keyword">from</span> dual<br>结果：<span class="hljs-number">6</span><br><span class="hljs-keyword">select</span> length(<span class="hljs-string">&#x27;甲骨文&#x27;</span>) <span class="hljs-keyword">from</span> dual<br>结果：<span class="hljs-number">3</span><br><span class="hljs-keyword">select</span> lengthb(<span class="hljs-string">&#x27;甲骨文&#x27;</span>) <span class="hljs-keyword">from</span> dual<br>结果：<span class="hljs-number">6</span><br></code></pre></div></td></tr></table></figure><ul><li><code>length()</code> ：返回的是 字符数 </li><li><code>trim()</code> ：函数从字符串的开头，结尾或两端删除空格或指定的字符。</li><li><code>replace(char, search_string [, replace_string])</code>：) 如果没有指定replace_string 变量的值，那么当发现search_string 变量的值时，就将其删除</li><li><code>ascii(single_character)</code> ：返回代表指定字符的数字值代码</li><li><code>chr(number_code)</code> ：函数可以根据数字代码返回字符</li></ul><h2 id="3-对照表"><a href="#3-对照表" class="headerlink" title="3. 对照表"></a>3. 对照表</h2><p><strong>ASCII对照表</strong></p><table><thead><tr><th>ASCII值</th><th>控制字符</th><th>ASCII值</th><th>控制字符</th><th>ASCII值</th><th>控制字符</th><th>ASCII值</th><th>控制字符</th></tr></thead><tbody><tr><td>0</td><td>NUT</td><td>32</td><td>(space)</td><td>64</td><td>@</td><td>96</td><td>、</td></tr><tr><td>1</td><td>SOH</td><td>33</td><td>!</td><td>65</td><td>A</td><td>97</td><td>a</td></tr><tr><td>2</td><td>STX</td><td>34</td><td>“</td><td>66</td><td>B</td><td>98</td><td>b</td></tr><tr><td>3</td><td>ETX</td><td>35</td><td>#</td><td>67</td><td>C</td><td>99</td><td>c</td></tr><tr><td>4</td><td>EOT</td><td>36</td><td>$</td><td>68</td><td>D</td><td>100</td><td>d</td></tr><tr><td>5</td><td>ENQ</td><td>37</td><td>%</td><td>69</td><td>E</td><td>101</td><td>e</td></tr><tr><td>6</td><td>ACK</td><td>38</td><td>&amp;</td><td>70</td><td>F</td><td>102</td><td>f</td></tr><tr><td>7</td><td>BEL</td><td>39</td><td>,</td><td>71</td><td>G</td><td>103</td><td>g</td></tr><tr><td>8</td><td>BS</td><td>40</td><td>(</td><td>72</td><td>H</td><td>104</td><td>h</td></tr><tr><td>9</td><td>HT</td><td>41</td><td>)</td><td>73</td><td>I</td><td>105</td><td>i</td></tr><tr><td>10</td><td>LF</td><td>42</td><td>*</td><td>74</td><td>J</td><td>106</td><td>j</td></tr><tr><td>11</td><td>VT</td><td>43</td><td>+</td><td>75</td><td>K</td><td>107</td><td>k</td></tr><tr><td>12</td><td>FF</td><td>44</td><td>,</td><td>76</td><td>L</td><td>108</td><td>l</td></tr><tr><td>13</td><td>CR</td><td>45</td><td>-</td><td>77</td><td>M</td><td>109</td><td>m</td></tr><tr><td>14</td><td>SO</td><td>46</td><td>.</td><td>78</td><td>N</td><td>110</td><td>n</td></tr><tr><td>15</td><td>SI</td><td>47</td><td>/</td><td>79</td><td>O</td><td>111</td><td>o</td></tr><tr><td>16</td><td>DLE</td><td>48</td><td>0</td><td>80</td><td>P</td><td>112</td><td>p</td></tr><tr><td>17</td><td>DCI</td><td>49</td><td>1</td><td>81</td><td>Q</td><td>113</td><td>q</td></tr><tr><td>18</td><td>DC2</td><td>50</td><td>2</td><td>82</td><td>R</td><td>114</td><td>r</td></tr><tr><td>19</td><td>DC3</td><td>51</td><td>3</td><td>83</td><td>S</td><td>115</td><td>s</td></tr><tr><td>20</td><td>DC4</td><td>52</td><td>4</td><td>84</td><td>T</td><td>116</td><td>t</td></tr><tr><td>21</td><td>NAK</td><td>53</td><td>5</td><td>85</td><td>U</td><td>117</td><td>u</td></tr><tr><td>22</td><td>SYN</td><td>54</td><td>6</td><td>86</td><td>V</td><td>118</td><td>v</td></tr><tr><td>23</td><td>TB</td><td>55</td><td>7</td><td>87</td><td>W</td><td>119</td><td>w</td></tr><tr><td>24</td><td>CAN</td><td>56</td><td>8</td><td>88</td><td>X</td><td>120</td><td>x</td></tr><tr><td>25</td><td>EM</td><td>57</td><td>9</td><td>89</td><td>Y</td><td>121</td><td>y</td></tr><tr><td>26</td><td>SUB</td><td>58</td><td>:</td><td>90</td><td>Z</td><td>122</td><td>z</td></tr><tr><td>27</td><td>ESC</td><td>59</td><td>;</td><td>91</td><td>[</td><td>123</td><td>{</td></tr><tr><td>28</td><td>FS</td><td>60</td><td>&lt;</td><td>92</td><td>/</td><td>124</td><td></td></tr><tr><td>29</td><td>GS</td><td>61</td><td>=</td><td>93</td><td>]</td><td>125</td><td>}</td></tr><tr><td>30</td><td>RS</td><td>62</td><td>&gt;</td><td>94</td><td>^</td><td>126</td><td>`</td></tr><tr><td>31</td><td>US</td><td>63</td><td>?</td><td>95</td><td>_</td><td>127</td><td>DEL</td></tr></tbody></table><p><strong>特殊字符解释</strong></p><table><thead><tr><th>NUL空</th><th>VT 垂直制表</th><th>SYN 空转同步</th></tr></thead><tbody><tr><td>STX 正文开始</td><td>CR 回车</td><td>CAN 作废</td></tr><tr><td>ETX 正文结束</td><td>SO 移位输出</td><td>EM 纸尽</td></tr><tr><td>EOY 传输结束</td><td>SI 移位输入</td><td>SUB 换置</td></tr><tr><td>ENQ 询问字符</td><td>DLE 空格</td><td>ESC 换码</td></tr><tr><td>ACK 承认</td><td>DC1 设备控制1</td><td>FS 文字分隔符</td></tr><tr><td>BEL 报警</td><td>DC2 设备控制2</td><td>GS 组分隔符</td></tr><tr><td>BS 退一格</td><td>DC3 设备控制3</td><td>RS 记录分隔符</td></tr><tr><td>HT 横向列表</td><td>DC4 设备控制4</td><td>US 单元分隔符</td></tr><tr><td>LF 换行</td><td>NAK 否定</td><td>DEL 删除</td></tr></tbody></table><p><strong>Oracle字段类型</strong></p><table><thead><tr><th>CODE</th><th>Type</th></tr></thead><tbody><tr><td>1</td><td>VARCHAR2</td></tr><tr><td>2</td><td>NUMBER</td></tr><tr><td>8</td><td>LONG</td></tr><tr><td>12</td><td>DATE</td></tr><tr><td>23</td><td>RAW</td></tr><tr><td>24</td><td>LONG RAW</td></tr><tr><td>69</td><td>ROWID</td></tr><tr><td>96</td><td>CHAR</td></tr><tr><td>112</td><td>CLOB</td></tr><tr><td>113</td><td>BLOB</td></tr><tr><td>114</td><td>BFILE</td></tr><tr><td>180</td><td>TIMESTAMP</td></tr><tr><td>181</td><td>TIMESTAMP WITH TIMEZONE</td></tr><tr><td>182</td><td>INTERVAL YEAR TO MONTH</td></tr><tr><td>183</td><td>INTERVAL DAY TO SECOND</td></tr><tr><td>208</td><td>UROWID</td></tr><tr><td>231</td><td>TIMESTAMP WITH LOCAL TIMEZONE</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Oracle-不可见字符处理&quot;&gt;&lt;a href=&quot;#Oracle-不可见字符处理&quot; class=&quot;headerlink&quot; title=&quot;Oracle 不可见字符处理&quot;&gt;&lt;/a&gt;Oracle 不可见字符处理&lt;/h1&gt;&lt;h2 id=&quot;1、处理过程&quot;&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="Oracle" scheme="https://blog.dekun.wang/categories/Oracle/"/>
    
    
    <category term="Oracle" scheme="https://blog.dekun.wang/tags/Oracle/"/>
    
  </entry>
  
</feed>
