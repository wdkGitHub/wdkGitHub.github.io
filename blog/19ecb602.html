<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="dark"><head><meta name="keywords" content="wangdekun"><meta name="keywords" content="wdk"><meta name="keywords" content="dekun"><meta name="keywords" content="è¡Œèµ°åœ¨0ä¸1ä¹‹é—´"><meta name="msvalidate.01" content="1641F43545510C314738B88788728C1D"><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/images/icon.png"><link rel="icon" href="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/images/icon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="Wang Dekun"><meta name="keywords" content="wangdekun wdk dekun è¡Œèµ°åœ¨0ä¸1ä¹‹é—´"><meta name="description" content="MacOsç¼–è¯‘OpenJDK             æœªå¼ºè°ƒç›®å½•ï¼Œå³æœ¬åœ°ä»“åº“æ ¹ç›®å½•ç¼–è¯‘Git Tagï¼šjdk-21+21   # æœ¬æƒ³ç¼–è¯‘jdk17ï¼Œå¥ˆä½•17ç‰ˆæœ¬æŠ¥é”™å¤ªå¤šï¼Œæ— æ³•è§£å†³ï¼Œæ€€ç–‘æ˜¯xcodeæˆ–ç³»ç»Ÿç‰ˆæœ¬é—®é¢˜ï¼Œç´¢æ€§ç›®å‰æœ€æ–°ã€‚                          ç‚¹å‡»ä¸‹é¢æŒ‰é’®è·³è½¬ç›¸å…³æ–‡æ¡£             OpenJDKå®˜ç½‘åœ°å€ æ„å»ºJDKæ–‡æ¡£    æ„å»ºJDKæ–‡æ¡£ Clio"><meta name="referrer" content="no-referrer-when-downgrade"><title>Macç¼–è¯‘OpenJdkæºç  - è¡Œèµ°åœ¨0ä¸1ä¹‹é—´</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/css/main.css"><link id="highlight-css" rel="stylesheet" href="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"blog.dekun.wang",root:"/",version:"1.9.4",typing:{enable:!0,typeSpeed:80,cursorChar:"|",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:"â¡"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"left",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:5},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:"a0ebaf097c911f6d3c6a2c3c505c99c3",google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml",include_content_in_search:!0};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/js/utils.js"></script><script src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/js/color-schema.js"></script><script async>var _hmt;Fluid.ctx.dnt||(_hmt=_hmt||[],function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?a0ebaf097c911f6d3c6a2c3c505c99c3";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}())</script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=",function(){function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","")})</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="è¡Œèµ°åœ¨0ä¸1ä¹‹é—´" type="application/atom+xml"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>è¡Œèµ°åœ¨0ä¸1ä¹‹é—´</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>é¦–é¡µ</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> <span>å½’æ¡£</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>æ ‡ç­¾</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>åˆ†ç±»</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>å…³äº</span></a></li><li class="nav-item"><a class="nav-link" href="/leave-a-note"><i class="iconfont icon-pen"></i> <span>ç•™è¨€æ¿</span></a></li><li class="nav-item"><a class="nav-link" href="/atom.xml"><i class="iconfont icon-rss"></i> <span>RSS</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/images/banner_img/post_page.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Macç¼–è¯‘OpenJdkæºç "></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Wang Dekun </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-05-09 13:54" pubdate>2023-05-09 13:54 æ˜ŸæœŸäºŒ</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 9.3k å­— </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 93 åˆ†é’Ÿ</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="padding-left:2rem;margin-right:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>ç›®å½•</span></p><div class="toc-body" id="toc-body"></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">Macç¼–è¯‘OpenJdkæºç </h1><p class="note note-primary">æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2023-05-12 22:53 æ˜ŸæœŸäº”</p><div class="markdown-body"><h1 id="MacOsç¼–è¯‘OpenJDK"><a href="#MacOsç¼–è¯‘OpenJDK" class="headerlink" title="MacOsç¼–è¯‘OpenJDK"></a>MacOsç¼–è¯‘OpenJDK</h1><div class="note note-warning"><ul><li>æœªå¼ºè°ƒç›®å½•ï¼Œå³æœ¬åœ°ä»“åº“æ ¹ç›®å½•</li><li>ç¼–è¯‘Git Tagï¼šjdk-21+21 # æœ¬æƒ³ç¼–è¯‘jdk17ï¼Œå¥ˆä½•17ç‰ˆæœ¬æŠ¥é”™å¤ªå¤šï¼Œæ— æ³•è§£å†³ï¼Œæ€€ç–‘æ˜¯xcodeæˆ–ç³»ç»Ÿç‰ˆæœ¬é—®é¢˜ï¼Œç´¢æ€§ç›®å‰æœ€æ–°ã€‚</li></ul></div><div class="note note-primary"><p>ç‚¹å‡»ä¸‹é¢æŒ‰é’®è·³è½¬ç›¸å…³æ–‡æ¡£</p></div><a class="btn" href="https://openjdk.org/" title="OpenJDK" target="_blank">OpenJDKå®˜ç½‘åœ°å€</a> <a class="btn" href="https://openjdk.org/groups/build/doc/building.html" title="Building the JDK" target="_blank">æ„å»ºJDKæ–‡æ¡£</a> <a class="btn" href="https://htmlpreview.github.io/?https://raw.githubusercontent.com/openjdk/jdk/master/doc/building.html" title="Building the JDK" target="_blank">æ„å»ºJDKæ–‡æ¡£</a> <a class="btn" href="https://blog.jetbrains.com/clion/2020/03/openjdk-with-clion/" title="Develop OpenJDK in CLion with Pleasure" target="_blank">Clionåšå®¢å…³äºOpenJDKå¼€å‘çš„å†…å®¹</a><hr><h2 id="è·å–OpenJDK"><a href="#è·å–OpenJDK" class="headerlink" title="è·å–OpenJDK"></a>è·å–OpenJDK</h2><a class="btn" href="https://github.com/openjdk/jdk/" title="OpenJDK GitHub" target="_blank">æºç ä»“åº“åœ°å€</a><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/openjdk/jdk.git<br></code></pre></td></tr></table></figure><h2 id="ç¼–è¯‘ç¯å¢ƒ"><a href="#ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="ç¼–è¯‘ç¯å¢ƒ"></a>ç¼–è¯‘ç¯å¢ƒ</h2><ul><li><p>è½¯ä»¶ç¯å¢ƒ ï¼ˆå‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼Œè‡ªè¡Œå®‰è£…ã€‚MacOs æ¨èä½¿ç”¨brewï¼‰</p><ul><li><p>macos Ventura 13.3.1 (a)</p></li><li><p><code>xcodebuild -version</code> : Xcode 14.3</p></li><li><p><code>xcode-select -v</code> : xcode-select version 2397.</p></li><li><p><code>/Library/Java/JavaVirtualMachines/jdk-20.jdk/Contents/Home</code></p></li><li><p><code>clang --version</code></p><blockquote><p>Apple clang version 14.0.3 (clang-1403.0.22.14.1)<br>Target: x86_64-apple-darwin22.4.0<br>Thread model: posix<br>InstalledDir: &#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Toolchains&#x2F;XcodeDefault.xctoolchain&#x2F;usr&#x2F;bin</p></blockquote></li><li><p><code>clang++ --version</code></p><blockquote><p>Apple clang version 14.0.3 (clang-1403.0.22.14.1)<br>Target: x86_64-apple-darwin22.4.0<br>Thread model: posix<br>InstalledDir: &#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Toolchains&#x2F;XcodeDefault.xctoolchain&#x2F;usr&#x2F;bin</p></blockquote></li><li><p><code>autoconf --version</code> : autoconf (GNU Autoconf) 2.71 <code># brew install autoconf</code></p></li><li><p><code>freetype-config --ftversion</code> : 2.13.0 <code># brew install freetype</code></p></li><li><p><code>make --version</code> : GNU Make 3.81 <code># brew install make</code></p></li><li><p><code>ccache -V</code> : ccache version 4.8 <code># brew install ccache</code></p></li></ul></li><li><p>ç¡¬ä»¶ ï¼šMacBook Pro ; 2.6 GHz å…­æ ¸Intel Core i7 ï¼› å†…å­˜ 16 GB 2400 MHz DDR4</p></li></ul><hr><h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><h3 id="configure"><a href="#configure" class="headerlink" title="configure"></a><a href="8dd8a18f" target="_blank">configure</a></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># è·å–é…ç½®å‚æ•°å¸®åŠ©</span><br>$ bash configure --<span class="hljs-built_in">help</span><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">bash configure \<br>--with-debug-level=slowdebug  \<br>--with-jvm-variants=server  \<br>--with-target-bits=64 \<br>--with-boot-jdk=<span class="hljs-variable">$JAVA_20_HOME</span><br></code></pre></td></tr></table></figure><ul><li><p>â€“with-debug-level&#x3D;slowdebug #å¯é€‰ï¼šreleaseã€fastdebugã€slowdebugï¼Œè¶Šé ådebugä¿¡æ¯è¶Šå¤šï¼Œä¼˜åŒ–è¶Šå°‘ã€‚</p></li><li><p>â€“with-jvm-variants&#x3D;server #jvmæ¨¡å¼ï¼šserverã€clientã€minimalã€coreã€zeroã€custom</p></li><li><p>â€“with-target-bits&#x3D;64 #æŒ‡å®šç¼–è¯‘32ä½è¿˜æ˜¯64ä½çš„JVM</p></li><li><p>â€“with-boot-jdk&#x3D;$JAVA_20_HOME # ç³»ç»Ÿexport é…ç½®çš„ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯jdk20</p></li></ul><div class="note note-primary"><p>è¡¥å……</p><ul><li>â€“with-conf-name&#x3D;jdk-21+22-slowdebug è‡ªå®šä¹‰åå­—ï¼Œæ‰§è¡Œ<code>make</code>æŒ‡ä»¤ï¼Œå¢åŠ <code>CONF=jdk-21+22-slowdebug</code> å‚æ•°ã€‚ä¾‹å¦‚<code>make CONF=jdk-21+22-slowdebug images</code></li></ul></div><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ java --version<br>java 20.0.1 2023-04-18<br>Java(TM) SE Runtime Environment (build 20.0.1+9-29)<br>Java HotSpot(TM) 64-Bit Server VM (build 20.0.1+9-29, mixed mode, sharing)<br></code></pre></td></tr></table></figure><div class="note note-success"><p>configure ç»“æœ</p></div><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs gradle">====================================================<br>A <span class="hljs-keyword">new</span> configuration has been successfully created in<br><span class="hljs-regexp">/Users/</span>*<span class="hljs-regexp">/openjdk/</span>build/macosx-x86_64-server-slowdebug<br>using configure arguments <span class="hljs-string">&#x27;--with-debug-level=slowdebug --with-jvm-variants=server --with-target-bits=64 --with-boot-jdk=/Library/Java/JavaVirtualMachines/jdk-20.jdk/Contents/Home&#x27;</span>.<br><br>Configuration summary:<br>* Name:           macosx-x86_64-server-slowdebug<br>* Debug level:    slowdebug<br>* HS debug level: debug<br>* JVM variants:   server<br>* JVM features:   server: <span class="hljs-string">&#x27;cds compiler1 compiler2 dtrace epsilongc g1gc jfr jni-check jvmci jvmti management parallelgc serialgc services shenandoahgc vm-structs zgc&#x27;</span><br>* OpenJDK target: OS: macosx, CPU architecture: x86, address length: <span class="hljs-number">64</span><br>* Version string: <span class="hljs-number">21</span>-internal-adhoc.wdk.openjdk (<span class="hljs-number">21</span>-internal)<br>* <span class="hljs-keyword">Source</span> date:    <span class="hljs-number">1683614002</span> (<span class="hljs-number">2023</span>-<span class="hljs-number">05</span>-<span class="hljs-number">09</span>T06:<span class="hljs-number">33</span>:<span class="hljs-number">22</span>Z)<br><br>Tools summary:<br>* Boot JDK:       java version <span class="hljs-string">&quot;20.0.1&quot;</span> <span class="hljs-number">2023</span>-<span class="hljs-number">04</span>-<span class="hljs-number">18</span> Java(TM) SE <span class="hljs-keyword">Runtime</span> Environment (build <span class="hljs-number">20.0</span>.<span class="hljs-number">1</span>+<span class="hljs-number">9</span>-<span class="hljs-number">29</span>) Java HotSpot(TM) <span class="hljs-number">64</span>-Bit Server VM (build <span class="hljs-number">20.0</span>.<span class="hljs-number">1</span>+<span class="hljs-number">9</span>-<span class="hljs-number">29</span>, mixed mode, sharing) (at <span class="hljs-regexp">/Library/</span>Java<span class="hljs-regexp">/JavaVirtualMachines/</span>jdk-<span class="hljs-number">20</span>.jdk<span class="hljs-regexp">/Contents/</span>Home)<br>* Toolchain:      clang (clang/LLVM <span class="hljs-keyword">from</span> Xcode <span class="hljs-number">14.3</span>)<br>* Sysroot:        <span class="hljs-regexp">/Applications/</span>Xcode.app<span class="hljs-regexp">/Contents/</span>Developer<span class="hljs-regexp">/Platforms/M</span>acOSX.platform<span class="hljs-regexp">/Developer/</span>SDKs/MacOSX13.<span class="hljs-number">3</span>.sdk<br>* C Compiler:     Version <span class="hljs-number">14.0</span>.<span class="hljs-number">3</span> (at <span class="hljs-regexp">/usr/</span>bin/clang)<br>* C++ Compiler:   Version <span class="hljs-number">14.0</span>.<span class="hljs-number">3</span> (at <span class="hljs-regexp">/usr/</span>bin/clang++)<br><br>Build performance summary:<br>* Build jobs:     <span class="hljs-number">12</span><br>* Memory limit:   <span class="hljs-number">16384</span> MB<br><br>The following warnings were produced. Repeated here <span class="hljs-keyword">for</span> convenience:<br>WARNING: pandoc is version <span class="hljs-number">2.18</span>, not the recommended version <span class="hljs-number">2.19</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><blockquote><p><code>build</code>ç›®å½•ç”Ÿæˆå¦‚ä¸‹ç›®å½•ã€‚</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ tree -NL 1 build .<br>build<br>â””â”€â”€ macosx-x86_64-server-slowdebug  <span class="hljs-comment"># configure ä¹‹åç”Ÿæˆçš„ç›®å½•ï¼Œä¹‹åç¼–è¯‘ç»“æœå­˜æ”¾åœ¨æ­¤</span><br>.<br>â”œâ”€â”€ ADDITIONAL_LICENSE_INFO<br>â”œâ”€â”€ ASSEMBLY_EXCEPTION<br>â”œâ”€â”€ CONTRIBUTING.md<br>â”œâ”€â”€ LICENSE<br>â”œâ”€â”€ Makefile<br>â”œâ”€â”€ README.md<br>â”œâ”€â”€ bin<br>â”œâ”€â”€ build<br>â”œâ”€â”€ compile_commands.json<br>â”œâ”€â”€ configure<br>â”œâ”€â”€ doc<br>â”œâ”€â”€ make<br>â”œâ”€â”€ src<br>â””â”€â”€ <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><h3 id="make"><a href="#make" class="headerlink" title="make"></a>make</h3><p><code>make [Targets]</code><sup id="fnref:Targetsæ–‡æ¡£" class="footnote-ref"><a href="#fn:Targetsæ–‡æ¡£" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://hg.openjdk.org/jdk/jdk11/raw-file/tip/doc/building.html#common-make-targets">[Targetsæ–‡æ¡£]</span></a></sup></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vim"># å…¨é‡ç¼–è¯‘<br>$ <span class="hljs-keyword">make</span> <span class="hljs-keyword">all</span><br>Building target <span class="hljs-string">&#x27;all&#x27;</span> in configuration <span class="hljs-string">&#x27;macosx-x86_64-server-slowdebug&#x27;</span><br>Compiling <span class="hljs-keyword">up</span> <span class="hljs-keyword">to</span> <span class="hljs-number">1</span> <span class="hljs-keyword">files</span> <span class="hljs-keyword">for</span> BUILD_TOOLS_HOTSPOT<br>..........<br># éœ€è¦ä¸€æ®µæ—¶é—´ ï¼Œè¿™é‡Œçœç•¥<span class="hljs-keyword">N</span>è¡Œä¿¡æ¯<br>..........<br>Compiling <span class="hljs-keyword">up</span> <span class="hljs-keyword">to</span> <span class="hljs-number">2</span> <span class="hljs-keyword">files</span> <span class="hljs-keyword">for</span> CLASSLIST_JAR<br>Creating support/classlist.jar<br>Creating jdk.jlink.jmod<br>Creating java.base.jmod<br>Creating jdk image<br>Creating CDS archive <span class="hljs-keyword">for</span> jdk image <span class="hljs-keyword">for</span> server<br>Creating CDS-NOCOOPS archive <span class="hljs-keyword">for</span> jdk image <span class="hljs-keyword">for</span> server<br>Stopping javac server<br>Finished building target <span class="hljs-string">&#x27;all&#x27;</span> in configuration <span class="hljs-string">&#x27;macosx-x86_64-server-slowdebug&#x27;</span><br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">$ ./build/macosx-x86_64-<span class="hljs-keyword">server</span>-slowdebug/jdk/bin/java  <span class="hljs-comment">--version</span><br>openjdk <span class="hljs-number">21</span>-<span class="hljs-type">internal</span> <span class="hljs-number">2023</span><span class="hljs-number">-09</span><span class="hljs-number">-19</span><br>OpenJDK Runtime Environment (slowdebug build <span class="hljs-number">21</span>-<span class="hljs-type">internal</span>-adhoc.wdk.openjdk)<br>OpenJDK <span class="hljs-number">64</span>-<span class="hljs-type">Bit</span> <span class="hljs-keyword">Server</span> VM (slowdebug build <span class="hljs-number">21</span>-<span class="hljs-type">internal</span>-adhoc.wdk.openjdk, mixed mode)<br></code></pre></td></tr></table></figure><h2 id="å¯¼å…¥Clion"><a href="#å¯¼å…¥Clion" class="headerlink" title="å¯¼å…¥Clion"></a>å¯¼å…¥Clion</h2><h3 id="compile-commands-json"><a href="#compile-commands-json" class="headerlink" title="compile-commands.json"></a>compile-commands.json</h3><blockquote><p>ç”Ÿæˆ compile-commands.json ï¼ŒCompile Commandså‚è€ƒClion<sup id="fnref:å½©è›‹" class="footnote-ref"><a href="#fn:å½©è›‹" rel="footnote"><span class="hint--top hint--rounded" aria-label="æ¥æºç½‘ç»œçš„æ¿€æ´»å·¥å…· https://ffff.ga/">[å½©è›‹]</span></a></sup>æ–‡æ¡£<sup id="fnref:jetbrains" class="footnote-ref"><a href="#fn:jetbrains" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://www.jetbrains.com/help/fleet/generating-a-json-compilation-database.html">[jetbrains]</span></a></sup></p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim">$ <span class="hljs-keyword">make</span> compile-commands<br>Building target <span class="hljs-string">&#x27;compile-commands&#x27;</span> in configuration <span class="hljs-string">&#x27;macosx-x86_64-server-slowdebug&#x27;</span><br>Cleaning compile-commands <span class="hljs-keyword">make</span> support artifacts ... done<br>Updating compile_commands.json<br>Finished building target <span class="hljs-string">&#x27;compile-commands&#x27;</span> in configuration <span class="hljs-string">&#x27;macosx-x86_64-server-slowdebug&#x27;</span><br><br>#  <span class="hljs-keyword">make</span> compile-commands å† <span class="hljs-keyword">make</span> <span class="hljs-keyword">all</span> ç”Ÿæˆçš„compile_commands.json  ä¹Ÿå¯ä»¥<br></code></pre></td></tr></table></figure><h3 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h3><ol><li><p>ä½¿ç”¨Clionæ‰“å¼€ç›®å½• <code>./build/macosx-x86_64-server-slowdebug/compile_commands.json</code> æ–‡ä»¶ã€‚</p></li><li><p>ä½¿ç”¨é¡¹ç›®æ‰“å¼€ï¼Œç­‰å¾…Clionå®Œæˆé¡¹ç›®ç´¢å¼•æ‰«æ</p></li><li><p>æ›´æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸ºOpenJDKæ ¹ç›®å½•ï¼Œç­‰å¾…é‡æ–°æ‰«æç´¢å¼•ã€‚å¦‚ä¸‹å›¾</p></li></ol><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/1.png" srcset="/img/loading.gif" lazyload alt="æ ¹æ®compile_commands.jsonå¯¼å…¥é¡¹ç›®"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/2.png" srcset="/img/loading.gif" lazyload alt="é¡¹ç›®æ‰“å¼€æ–¹å¼"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/3.png" srcset="/img/loading.gif" lazyload alt="æ›´æ”¹æ ¹ç›®å½•"></div></div></div><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><h4 id="é…ç½®å¤–éƒ¨å·¥å…·"><a href="#é…ç½®å¤–éƒ¨å·¥å…·" class="headerlink" title="é…ç½®å¤–éƒ¨å·¥å…·"></a>é…ç½®å¤–éƒ¨å·¥å…·</h4><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/ExtendedTools.png" srcset="/img/loading.gif" lazyload alt="ExtendedTools"></p><ul><li><p><code>make all</code></p><blockquote><p>#Program å’Œ Arguments å…±åŒæ„æˆäº†æ‰€è¦æ‰§è¡Œçš„å‘½ä»¤ â€œmake allâ€</p><p>Name: make<br>Program: make<br>Arguments: all<br>Working directory: {é¡¹ç›®çš„æ ¹ç›®å½•&#x2F;æœ¬åœ°openjdkä½ç½®}</p></blockquote></li><li><p><code>make clean</code> é…ç½®åŒ <code>make all</code></p></li><li><p><code>make images</code> é…ç½® åŒ <code>make all</code></p></li><li><p><code>make</code> é…ç½®åŒ <code>make all</code></p></li></ul><h4 id="è¿è¡Œ-x2F-è°ƒè¯•é…ç½®-ï¼ˆRun-x2F-Debug-configurationï¼‰"><a href="#è¿è¡Œ-x2F-è°ƒè¯•é…ç½®-ï¼ˆRun-x2F-Debug-configurationï¼‰" class="headerlink" title="è¿è¡Œ&#x2F;è°ƒè¯•é…ç½® ï¼ˆRun&#x2F;Debug configurationï¼‰"></a>è¿è¡Œ&#x2F;è°ƒè¯•é…ç½® ï¼ˆRun&#x2F;Debug configurationï¼‰</h4><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/RunDebugConfiguration.png" srcset="/img/loading.gif" lazyload alt="RunDebugConfiguration"></p><ul><li><p>Run&#x2F;Debug configuration</p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/Configuration.png" srcset="/img/loading.gif" lazyload alt="Configuration"></p></li><li><p>ç¼–è¯‘jdkï¼Œä¿®æ”¹jdkæºç åç¼–è¯‘æºç ä½¿ç”¨ã€‚</p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/make-images.png" srcset="/img/loading.gif" lazyload alt="make-images"></p></li></ul><p>è¿è¡ŒDebug</p><ul><li><p>Debugå…¥å£ <code>src/java.base/share/native/libjli/java.c</code> ç¬¬391è¡Œ</p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/debug-openjdk.png" srcset="/img/loading.gif" lazyload alt="debug-openjdk"></p></li><li><p>Debugå‡ºç° <a href="#lldb%E6%8A%A5%E9%94%99%EF%BC%9ASIGSEGV-signal-SIGSEGV-%EF%BC%88%E6%B6%89%E5%8F%8A%E5%88%B0C-x2F-C-%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9%EF%BC%8C%E4%B8%8D%E6%98%8E%E6%89%80%E4%BB%A5%EF%BC%8C%E5%AE%8C%E5%85%A8%E6%98%AF%E7%85%A7%E7%8C%AB%E7%94%BB%E8%99%8E%EF%BC%89">SIGSEGV (signal SIGSEGV)</a></p></li></ul><h2 id="IDEA-å¼•ç”¨-Native-OpenJDK"><a href="#IDEA-å¼•ç”¨-Native-OpenJDK" class="headerlink" title="IDEA å¼•ç”¨ Native OpenJDK"></a>IDEA å¼•ç”¨ Native OpenJDK</h2><ol><li><h3 id="IDEA-æ–°å»ºå·¥ç¨‹ï¼Œå¹¶ä¿®æ”¹JDKä¸ºç¼–è¯‘å¥½çš„jdkï¼ˆ-build-macosx-x86-64-server-slowdebug-images-ï¼‰ï¼Œå°†æºç ä¿®æ”¹ä¸ºOpenJdkæ ¹ç›®å½•ä¸‹çš„srcç›®å½•ã€‚"><a href="#IDEA-æ–°å»ºå·¥ç¨‹ï¼Œå¹¶ä¿®æ”¹JDKä¸ºç¼–è¯‘å¥½çš„jdkï¼ˆ-build-macosx-x86-64-server-slowdebug-images-ï¼‰ï¼Œå°†æºç ä¿®æ”¹ä¸ºOpenJdkæ ¹ç›®å½•ä¸‹çš„srcç›®å½•ã€‚" class="headerlink" title="IDEA æ–°å»ºå·¥ç¨‹ï¼Œå¹¶ä¿®æ”¹JDKä¸ºç¼–è¯‘å¥½çš„jdkï¼ˆ build/macosx-x86_64-server-slowdebug/images/ï¼‰ï¼Œå°†æºç ä¿®æ”¹ä¸ºOpenJdkæ ¹ç›®å½•ä¸‹çš„srcç›®å½•ã€‚"></a>IDEA æ–°å»ºå·¥ç¨‹ï¼Œå¹¶ä¿®æ”¹JDKä¸ºç¼–è¯‘å¥½çš„jdkï¼ˆ<code>build/macosx-x86_64-server-slowdebug/images/</code>ï¼‰ï¼Œå°†æºç ä¿®æ”¹ä¸ºOpenJdkæ ¹ç›®å½•ä¸‹çš„srcç›®å½•ã€‚</h3><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/SDK1.png" srcset="/img/loading.gif" lazyload alt="SDK1"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/SDK2.png" srcset="/img/loading.gif" lazyload alt="SDK2"></div></div></div></li><li><h3 id="ä¿®æ”¹jdkä»£ç "><a href="#ä¿®æ”¹jdkä»£ç " class="headerlink" title="ä¿®æ”¹jdkä»£ç "></a>ä¿®æ”¹jdkä»£ç </h3><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/MAIN.png" srcset="/img/loading.gif" lazyload alt="MAIN"></p></li><li><h3 id="æ‰§è¡Œ-make-images-ç¼–è¯‘jdk"><a href="#æ‰§è¡Œ-make-images-ç¼–è¯‘jdk" class="headerlink" title="æ‰§è¡Œ make images ç¼–è¯‘jdk"></a>æ‰§è¡Œ make images ç¼–è¯‘jdk</h3><blockquote><p>æºç æ›´ç›®å½•æ‰§è¡Œ<code>make images</code> æˆ–åœ¨CLionæ‰§è¡Œé¢„å…ˆé…ç½®å¥½çš„make imageså³å¯ã€‚</p></blockquote><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/run-make-images1.png" srcset="/img/loading.gif" lazyload alt="run-make-images1"></div><div class="group-image-wrap"><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/run-make-images2.png" srcset="/img/loading.gif" lazyload alt="run-make-images1"></div></div></div></li><li><h3 id="è¿è¡Œæµ‹è¯•ä»£ç çœ‹ä¿®æ”¹æ•ˆæœ"><a href="#è¿è¡Œæµ‹è¯•ä»£ç çœ‹ä¿®æ”¹æ•ˆæœ" class="headerlink" title="è¿è¡Œæµ‹è¯•ä»£ç çœ‹ä¿®æ”¹æ•ˆæœ"></a>è¿è¡Œæµ‹è¯•ä»£ç çœ‹ä¿®æ”¹æ•ˆæœ</h3><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/result.png" srcset="/img/loading.gif" lazyload alt="result"></p></li></ol><h2 id="å¼‚å¸¸é—®é¢˜"><a href="#å¼‚å¸¸é—®é¢˜" class="headerlink" title="å¼‚å¸¸é—®é¢˜"></a>å¼‚å¸¸é—®é¢˜</h2><h3 id="error-unmappable-character-0xE6-for-encoding-ascii"><a href="#error-unmappable-character-0xE6-for-encoding-ascii" class="headerlink" title="error: unmappable character (0xE6) for encoding ascii"></a>error: unmappable character (0xE6) for encoding ascii</h3><div class="note note-danger"><p><code>make/common/JavaCompilation.gmk</code>æ–‡ä»¶ï¼Œ274è¡Œå°† <code>ascii</code> ä¿®æ”¹ä¸º<code>utf-8</code></p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/ascii_to_utf8.png" srcset="/img/loading.gif" lazyload alt="ascii_to_utf8"></p></div><h3 id="Library-not-loaded-x2F-usr-x2F-local-x2F-lib-x2F-libgvc-6-dylib-é”™è¯¯ä¿¡æ¯"><a href="#Library-not-loaded-x2F-usr-x2F-local-x2F-lib-x2F-libgvc-6-dylib-é”™è¯¯ä¿¡æ¯" class="headerlink" title="Library not loaded: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvc.6.dylib é”™è¯¯ä¿¡æ¯"></a>Library not loaded: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvc.6.dylib é”™è¯¯ä¿¡æ¯</h3><div class="note note-danger"><p>Library not loaded: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvc.6.dylib é”™è¯¯ä¿¡æ¯</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle">dyld[<span class="hljs-number">77415</span>]: Library not loaded: <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/lib/</span>libgvc.<span class="hljs-number">6</span>.dylib<br>  Referenced <span class="hljs-keyword">from</span>: &lt;<span class="hljs-number">1</span>F936113-F892-<span class="hljs-number">345</span>E-A9E8-<span class="hljs-number">0</span>F93B969392C&gt; <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>dot<br>  Reason: tried: <span class="hljs-string">&#x27;/usr/local/lib/libgvc.6.dylib&#x27;</span> (no such <span class="hljs-keyword">file</span>), <span class="hljs-string">&#x27;/System/Volumes/Preboot/Cryptexes/OS/usr/local/lib/libgvc.6.dylib&#x27;</span> (no such <span class="hljs-keyword">file</span>), <span class="hljs-string">&#x27;/usr/local/lib/libgvc.6.dylib&#x27;</span> (no such <span class="hljs-keyword">file</span>), <span class="hljs-string">&#x27;/usr/lib/libgvc.6.dylib&#x27;</span> (no such <span class="hljs-keyword">file</span>, not in dyld cache)<br><br></code></pre></td></tr></table></figure></div><div class="note note-success"><p><del>è§£å†³æ–¹å¼ : å°† <a target="_blank" rel="noopener" href="https://graphviz.org/download/#mac">graphviz</a><sup id="fnref:graphvizå®˜ç½‘" class="footnote-ref"><a href="#fn:graphvizå®˜ç½‘" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://graphviz.org/download/#mac">[graphvizå®˜ç½‘]</span></a></sup>çš„ libç›®å½•ä¸‹ <code>.dylib</code> æ–‡ä»¶æ˜ å°„åˆ° <code>/usr/local/lib/</code> ç›®å½•ä¸‹</del></p><p>è§£å†³æ–¹å¼ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">brew install graphviz<br>brew link graphviz <br><span class="hljs-meta prompt_">#</span><span class="language-bash">æˆ–</span><br>brew link --overwrite graphviz<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">-------------------------------------------------------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">-------------------------------------------------------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">-------------------------------------------------------</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¦‚æœ‰ä»¥ä¸‹é”™è¯¯</span><br>brew link --overwrite graphviz<br>Linking /usr/local/Cellar/graphviz/8.0.5...<br>Error: Could not symlink lib/graphviz/config6<br>/usr/local/lib/graphviz is not writable.<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ‰§è¡Œ <span class="hljs-built_in">chown</span> æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹</span><br>sudo chown -R &#x27;ç”¨æˆ·å:admin&#x27; /usr/local/lib/graphviz<br></code></pre></td></tr></table></figure><div class="note note-danger"><p><del>å¯»æ‰¾åˆ°çš„å˜ç›¸è§£å†³æ–¹å¼ï¼Œåæ­£æ˜¯æ„å¤–çš„è§£å†³äº†<code>make all</code> æŠ¥é”™çš„é—®é¢˜ã€‚</del></p><blockquote><p><del>æ„Ÿè§‰ä¸æ˜¯æœ€ç»ˆè§£å†³æ–¹å¼ï¼Œä½†æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œå¦‚çœ‹åˆ°æ­¤è´´çš„äººçŸ¥é“ï¼Œéº»çƒ¦è¯·å‘ŠçŸ¥ä¸€ä¸‹æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</del></p><p>ğŸ“®é‚®ç®± : <a href="mailto:&#x77;&#97;&#110;&#103;&#x64;&#x65;&#107;&#117;&#110;&#x65;&#109;&#97;&#105;&#108;&#64;&#x67;&#x6d;&#x61;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;">&#x77;&#97;&#110;&#103;&#x64;&#x65;&#107;&#117;&#110;&#x65;&#109;&#97;&#105;&#108;&#64;&#x67;&#x6d;&#x61;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;</a></p></blockquote></div><blockquote><p><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libcdt.5.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libcdt.5.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libcgraph.6.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libcgraph.6.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libgvc.6.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvc.6.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libgvpr.2.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libgvpr.2.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;liblab_gamut.1.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;liblab_gamut.1.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;grahviz&#x2F;8.0.5&#x2F;lib&#x2F;libpathplan.4.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libpathplan.4.dylib</del><br><del>ln -s &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;graphviz&#x2F;8.0.5&#x2F;lib&#x2F;libxdot.4.dylib &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libxdot.4.dylib</del></p></blockquote></div><h3 id="lldbæŠ¥é”™ï¼šSIGSEGV-signal-SIGSEGV-ï¼ˆæ¶‰åŠåˆ°C-x2F-C-ç›¸å…³å†…å®¹ï¼Œä¸æ˜æ‰€ä»¥ï¼Œå®Œå…¨æ˜¯ç…§çŒ«ç”»è™ï¼‰"><a href="#lldbæŠ¥é”™ï¼šSIGSEGV-signal-SIGSEGV-ï¼ˆæ¶‰åŠåˆ°C-x2F-C-ç›¸å…³å†…å®¹ï¼Œä¸æ˜æ‰€ä»¥ï¼Œå®Œå…¨æ˜¯ç…§çŒ«ç”»è™ï¼‰" class="headerlink" title="lldbæŠ¥é”™ï¼šSIGSEGV (signal SIGSEGV)  ï¼ˆæ¶‰åŠåˆ°C&#x2F;C++ç›¸å…³å†…å®¹ï¼Œä¸æ˜æ‰€ä»¥ï¼Œå®Œå…¨æ˜¯ç…§çŒ«ç”»è™ï¼‰"></a>lldb<code>æŠ¥é”™ï¼š</code>SIGSEGV (signal SIGSEGV) ï¼ˆæ¶‰åŠåˆ°C&#x2F;C++ç›¸å…³å†…å®¹ï¼Œä¸æ˜æ‰€ä»¥ï¼Œå®Œå…¨æ˜¯ç…§çŒ«ç”»è™ï¼‰</h3><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/SIGSEGV.png" srcset="/img/loading.gif" lazyload alt="iShot_2023-05-10_01.10.55"></p><blockquote><p>è§£å†³åŠæ³•æ˜¯ï¼Œåœ¨ç”¨æˆ·å®¶ç›®å½•åˆ›å»º<code>.lldbinit</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p></blockquote><ul><li><p>ç¬¬ä¸€ç§æ–¹æ³•<sup id="fnref:lldbinit1" class="footnote-ref"><a href="#fn:lldbinit1" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://blog.jetbrains.com/clion/2020/03/openjdk-with-clion/">[lldbinit1]</span></a></sup></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># åœ¨compile_commands.json åŒçº§ç›®å½•æ·»åŠ ç»è¿‡æµ‹è¯•æ— æ•ˆï¼Œéœ€è¦åœ¨ç³»ç»Ÿ 	`~/.lldbinit`ç›®å½•ä¸‹æ–°å»ºï¼ŒåŸå› æœªçŸ¥ã€‚</span><br>br <span class="hljs-built_in">set</span> -n main -o <span class="hljs-literal">true</span> -G <span class="hljs-literal">true</span> -C <span class="hljs-string">&quot;pro hand -p true -s false SIGSEGV SIGBUS&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>ç¬¬äºŒç§æ–¹æ³•<sup id="fnref:lldbinit2" class="footnote-ref"><a href="#fn:lldbinit2" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://www.jianshu.com/p/e7891d25ba6a">[lldbinit2]</span></a></sup></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">#main.cæ˜¯æœ¬åœ°ç»å¯¹è·¯å¾„<br>breakpoint set --<span class="hljs-keyword">file</span> <span class="hljs-regexp">/Users/</span>..<span class="hljs-regexp">/openjdk/</span>src<span class="hljs-regexp">/java.base/</span>share<span class="hljs-regexp">/native/</span>launcher/main.c --line <span class="hljs-number">98</span> -C <span class="hljs-string">&quot;pro hand -p true -s false SIGSEGV SIGBUS&quot;</span> --auto-<span class="hljs-keyword">continue</span> <span class="hljs-keyword">true</span><br></code></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰ç§æ–¹æ³•<sup id="fnref:lldbinit3" class="footnote-ref"><a href="#fn:lldbinit3" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://jiawanggjia.github.io/post/openjdk-bian-yi-zhi-nan/">[lldbinit3]</span></a></sup></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">break set -n <span class="hljs-selector-tag">main</span> -C &quot;process handle <span class="hljs-attr">--pass</span> true <span class="hljs-attr">--stop</span> false SIGSEGV&quot; -C &quot;process handle <span class="hljs-attr">--pass</span> true <span class="hljs-attr">--stop</span> false SIGBUS&quot;<br></code></pre></td></tr></table></figure></li></ul><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><blockquote><p>å…³äºåœ¨ç½‘ä¸Šçœ‹åˆ°å¦‚ä¸‹å‘½ä»¤</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">bash configure <span class="hljs-attribute">--with-debug-level</span>=slowdebug <span class="hljs-attribute">--with-jvm-variants</span>=server<br>make <span class="hljs-attribute">CONF</span>=macosx-x86_64-server-slowdebug compile-commands<br>make <span class="hljs-attribute">CONF</span>=macosx-x86_64-server-slowdebug<br></code></pre></td></tr></table></figure><p>å…³äºCONFå‚æ•°çš„ä½œç”¨ï¼Œå¦‚æœbuildç›®å½•ä¸‹é¢åªæœ‰ä¸€ä¸ªé…ç½®ä¿¡æ¯ï¼Œåˆ™å¯ä»¥çœç•¥ã€‚</p></blockquote><div class="note note-primary"><p>è¡¥å……è¯´æ˜ <code>CONF=&lt;config pattern&gt;</code></p><p><a target="_blank" rel="noopener" href="https://hg.openjdk.org/jdk/jdk11/raw-file/tip/doc/building.html#using-multiple-configurations">ç‚¹å‡»æŸ¥çœ‹CONFå®˜æ–¹æ–‡æ¡£</a></p><p>å‡ºè‡ªæ–‡ä»¶ï¼š<code>./make/InitSupport.gmk</code> ç¬¬245è¡Œ</p><p><img src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/mk-images/sourceCode/openJdk/compileEnv/CONF=.png" srcset="/img/loading.gif" lazyload alt="CONF="></p></div><section class="footnotes"><h2 id="Reference"><a class="anchorjs-link anchorjs-link-left" aria-label="Anchor" data-anchorjs-icon="â¡" href="#Reference" style="position:absolute;margin-left:-1em;padding-right:.5em"></a><a href="#Reference" class="headerlink" title="Reference"> </a>å‚è€ƒ</h2><div class="footnote-list"><ol><li><span id="fn:Targetsæ–‡æ¡£" class="footnote-text"><span><span style="font-weight:700;font-style:italic">Targetsæ–‡æ¡£ï¼š</span><a target="_blank" rel="noopener" href="https://hg.openjdk.org/jdk/jdk11/raw-file/tip/doc/building.html#common-make-targets">https://hg.openjdk.org/jdk/jdk11/raw-file/tip/doc/building.html#common-make-targets</a> <a href="#fnref:Targetsæ–‡æ¡£" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:jetbrains" class="footnote-text"><span><span style="font-weight:700;font-style:italic">jetbrainsï¼š</span><a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/fleet/generating-a-json-compilation-database.html">https://www.jetbrains.com/help/fleet/generating-a-json-compilation-database.html</a> <a href="#fnref:jetbrains" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:å½©è›‹" class="footnote-text"><span><span style="font-weight:700;font-style:italic">å½©è›‹ï¼š</span>æ¥æºç½‘ç»œçš„æ¿€æ´»å·¥å…· <a target="_blank" rel="noopener" href="https://ffff.ga/">https://ffff.ga/</a> <a href="#fnref:å½©è›‹" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:graphvizå®˜ç½‘" class="footnote-text"><span><span style="font-weight:700;font-style:italic">graphvizå®˜ç½‘ï¼š</span><a target="_blank" rel="noopener" href="https://graphviz.org/download/#mac">https://graphviz.org/download/#mac</a> <a href="#fnref:graphvizå®˜ç½‘" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:lldbinit1" class="footnote-text"><span><span style="font-weight:700;font-style:italic">lldbinit1ï¼š</span><a target="_blank" rel="noopener" href="https://blog.jetbrains.com/clion/2020/03/openjdk-with-clion/">https://blog.jetbrains.com/clion/2020/03/openjdk-with-clion/</a> <a href="#fnref:lldbinit1" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:lldbinit2" class="footnote-text"><span><span style="font-weight:700;font-style:italic">lldbinit2ï¼š</span><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/e7891d25ba6a">https://www.jianshu.com/p/e7891d25ba6a</a> <a href="#fnref:lldbinit2" rev="footnote" class="footnote-backref">â†©</a></span></span></li><li><span id="fn:lldbinit3" class="footnote-text"><span><span style="font-weight:700;font-style:italic">lldbinit3ï¼š</span><a target="_blank" rel="noopener" href="https://jiawanggjia.github.io/post/openjdk-bian-yi-zhi-nan/">https://jiawanggjia.github.io/post/openjdk-bian-yi-zhi-nan/</a> <a href="#fnref:lldbinit3" rev="footnote" class="footnote-backref">â†©</a></span></span></li></ol></div></section></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E6%BA%90%E7%A0%81/" class="category-chain-item">æºç </a> <span>></span> <a href="/categories/%E6%BA%90%E7%A0%81/OpenJDK/" class="category-chain-item">OpenJDK</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/OpenJDK/">#OpenJDK</a> <a href="/tags/%E6%BA%90%E7%A0%81/">#æºç </a></div></div><div class="license-box my-3"><div class="license-title"><div>Macç¼–è¯‘OpenJdkæºç </div><div>https://blog.dekun.wang/blog/19ecb602.html</div></div><div class="license-meta"><div class="license-meta-item"><div>ä½œè€…</div><div>Wang Dekun</div></div><div class="license-meta-item license-meta-date"><div>å‘å¸ƒäº</div><div>2023-05-09 13:54 æ˜ŸæœŸäºŒ</div></div><div class="license-meta-item license-meta-date"><div>æ›´æ–°äº</div><div>2023-05-12 22:53 æ˜ŸæœŸäº”</div></div><div class="license-meta-item"><div>è®¸å¯åè®®</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><span class="hint--top hint--rounded" aria-label="BY - ç½²å"><i class="iconfont icon-by"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><span class="hint--top hint--rounded" aria-label="NC - éå•†ä¸šæ€§ä½¿ç”¨"><i class="iconfont icon-nc"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><span class="hint--top hint--rounded" aria-label="ND - ç¦æ­¢æ¼”ç»"><i class="iconfont icon-nd"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/blog/893fdda9.html" title="Markdownè¶…é“¾æ¥æ‰©å±•"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Markdownè¶…é“¾æ¥æ‰©å±•</span> <span class="visible-mobile">ä¸Šä¸€ç¯‡</span></a></article><article class="post-next col-6"><a href="/blog/a428dd75.html" title="idea æ¬¢è¿ç•Œé¢é¡¹ç›®åˆ—è¡¨å³é”®æ‰“å¼€ç»ˆç«¯"><span class="hidden-mobile">idea æ¬¢è¿ç•Œé¢é¡¹ç›®åˆ—è¡¨å³é”®æ‰“å¼€ç»ˆç«¯</span> <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"6kJO6EDHOByCjo57BNnIJrsa-gzGzoHsz","appKey":"WWI7wID27nGtjMEOsPg5pEbP","path":"window.location.pathname","placeholder":"è¯´ç‚¹ä»€ä¹ˆ","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-left:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="æºç " id="heading-5b804b05e14aaacc75033a4f77fc2844" role="tab" data-toggle="collapse" href="#collapse-5b804b05e14aaacc75033a4f77fc2844" aria-expanded="true">æºç  <span class="list-group-count">(1)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-5b804b05e14aaacc75033a4f77fc2844" role="tabpanel" aria-labelledby="heading-5b804b05e14aaacc75033a4f77fc2844"><div class="category-post-list"></div><div class="category-sub row nomargin-x"><a class="category-subitem list-group-item category-item-action col-10 col-md-11 col-xm-11" title="OpenJDK" id="heading-9c7489f1dfc0ef1b77d56bb6be7f5552" role="tab" data-toggle="collapse" href="#collapse-9c7489f1dfc0ef1b77d56bb6be7f5552" aria-expanded="true">OpenJDK <span class="list-group-count">(1)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-9c7489f1dfc0ef1b77d56bb6be7f5552" role="tabpanel" aria-labelledby="heading-9c7489f1dfc0ef1b77d56bb6be7f5552"><div class="category-post-list"><a href="/blog/19ecb602.html" title="Macç¼–è¯‘OpenJdkæºç " class="list-group-item list-group-item-action active"><span class="category-post">Macç¼–è¯‘OpenJdkæºç </span></a></div></div></div></div></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate" placeholder="è¯·è¾“å…¥......."> <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯æœç´¢</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡ </span><span id="busuanzi_container_site_uv" style="display:none">æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/js/events.js"></script><script src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,i=t.getElementById("subtitle");i&&e&&e(i.getAttribute("data-typed-text"))}((window,document))</script><script src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;0<t.find(".toc-list-item").length&&t.css("visibility","visible")}}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://blog-cos-1314018943.cos.ap-beijing.myqcloud.com/js/boot.js"></script><noscript><div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div></noscript><script>var aTagArr=[].slice.apply(document.getElementsByTagName("a"));aTagArr.forEach(function(a,e){-1<a.href.indexOf("_blank")&&(a.target="_blank")})</script></body></html>